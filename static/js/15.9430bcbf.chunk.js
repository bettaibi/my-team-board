(this["webpackJsonpmy-team-board"]=this["webpackJsonpmy-team-board"]||[]).push([[15],{171:function(e,t,a){"use strict";var n=a(18),r=(a(0),a(300)),s=a(146),i=a(25),c=a(118),o=a(7),l=a(2),d=Object(c.a)((function(e){var t;return{drawerOpen:(t={},Object(n.a)(t,e.breakpoints.down("xs"),{width:"100%"}),Object(n.a)(t,"width","40%"),t),drawerClose:{width:0}}}));t.a=function(e,t,a){var c=d(),m=Object(s.a)(a||!1),b=m.handleClose,u=m.handleOpen,j=m.show,p=m.toggle;return{onSidenavClose:b,onSidenavOpen:u,onSidenavToggle:p,SidenavComponent:function(a){var s,d,m=a.children;return Object(l.jsx)(r.a,{transitionDuration:{enter:500,exit:1e3},variant:t,anchor:e,open:j,onClose:b,className:Object(o.a)((s={},Object(n.a)(s,c.drawerOpen,j),Object(n.a)(s,c.drawerClose,!j),s)),classes:{paper:Object(o.a)((d={},Object(n.a)(d,c.drawerOpen,j),Object(n.a)(d,c.drawerClose,!j),d))},children:Object(l.jsx)(i.a,{overflow:"hidden",children:m})})},show:j}}},172:function(e,t,a){"use strict";var n=a(0),r=a(542),s=a(311),i=a(15),c=a(312),o=a(117),l=a(146),d=a(2);t.a=function(e){var t=Object(l.a)(),a=t.show,m=t.handleClose,b=t.handleOpen,u=e.message,j=e.onConfirmClick,p=Object(n.useCallback)((function(){return Object(d.jsxs)(r.a,{open:a,onClose:m,maxWidth:"xs",children:[Object(d.jsxs)(s.a,{dividers:!0,style:{padding:"1.2rem 1rem"},children:[Object(d.jsx)(i.a,{variant:"h6",children:"Confirm"}),Object(d.jsx)("span",{children:u})]}),Object(d.jsxs)(c.a,{children:[Object(d.jsx)(o.a,{size:"small",onClick:m,children:"Close"}),Object(d.jsx)(o.a,{size:"small",variant:"contained",color:"primary",onClick:j,children:"Confirm"})]})]})}),[a,u,m,j]);return{handleClose:m,handleOpen:b,ConfirmDialog:p}}},283:function(e,t,a){"use strict";var n=a(1),r=a(5),s=a(0),i=(a(4),a(7)),c=a(15),o=a(12),l=a(176),d=s.forwardRef((function(e,t){var a=e.children,o=e.classes,d=e.className,m=e.component,b=void 0===m?"div":m,u=e.disablePointerEvents,j=void 0!==u&&u,p=e.disableTypography,h=void 0!==p&&p,O=e.position,f=e.variant,v=Object(r.a)(e,["children","classes","className","component","disablePointerEvents","disableTypography","position","variant"]),x=Object(l.b)()||{},g=f;return f&&x.variant,x&&!g&&(g=x.variant),s.createElement(l.a.Provider,{value:null},s.createElement(b,Object(n.a)({className:Object(i.a)(o.root,d,"end"===O?o.positionEnd:o.positionStart,j&&o.disablePointerEvents,x.hiddenLabel&&o.hiddenLabel,"filled"===g&&o.filled,"dense"===x.margin&&o.marginDense),ref:t},v),"string"!==typeof a||h?a:s.createElement(c.a,{color:"textSecondary"},a)))}));t.a=Object(o.a)({root:{display:"flex",height:"0.01em",maxHeight:"2em",alignItems:"center",whiteSpace:"nowrap"},filled:{"&$positionStart:not($hiddenLabel)":{marginTop:16}},positionStart:{marginRight:8},positionEnd:{marginLeft:8},disablePointerEvents:{pointerEvents:"none"},hiddenLabel:{},marginDense:{}},{name:"MuiInputAdornment"})(d)},311:function(e,t,a){"use strict";var n=a(1),r=a(5),s=a(0),i=(a(4),a(7)),c=a(12),o=s.forwardRef((function(e,t){var a=e.classes,c=e.className,o=e.dividers,l=void 0!==o&&o,d=Object(r.a)(e,["classes","className","dividers"]);return s.createElement("div",Object(n.a)({className:Object(i.a)(a.root,c,l&&a.dividers),ref:t},d))}));t.a=Object(c.a)((function(e){return{root:{flex:"1 1 auto",WebkitOverflowScrolling:"touch",overflowY:"auto",padding:"8px 24px","&:first-child":{paddingTop:20}},dividers:{padding:"16px 24px",borderTop:"1px solid ".concat(e.palette.divider),borderBottom:"1px solid ".concat(e.palette.divider)}}}),{name:"MuiDialogContent"})(o)},312:function(e,t,a){"use strict";var n=a(1),r=a(5),s=a(0),i=(a(4),a(7)),c=a(12),o=s.forwardRef((function(e,t){var a=e.disableSpacing,c=void 0!==a&&a,o=e.classes,l=e.className,d=Object(r.a)(e,["disableSpacing","classes","className"]);return s.createElement("div",Object(n.a)({className:Object(i.a)(o.root,l,!c&&o.spacing),ref:t},d))}));t.a=Object(c.a)({root:{display:"flex",alignItems:"center",padding:8,justifyContent:"flex-end",flex:"0 0 auto"},spacing:{"& > :not(:first-child)":{marginLeft:8}}},{name:"MuiDialogActions"})(o)},479:function(e,t,a){"use strict";var n=a(0),r=a(160);t.a=Object(r.a)(n.createElement("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM8 9h8v10H8V9zm7.5-5l-1-1h-5l-1 1H5v2h14V4z"}),"DeleteOutline")},604:function(e,t,a){"use strict";a.r(t);var n=a(141),r=a.n(n),s=a(142),i=a(9),c=a(140),o=a(18),l=a(0),d=a.n(l),m=a(25),b=a(15),u=a(283),j=a(536),p=a(557),h=a(1),O=a(5),f=(a(4),a(7)),v=a(12),x=a(207),g=l.forwardRef((function(e,t){var a=e.classes,n=e.className,r=Object(O.a)(e,["classes","className"]),s=l.useContext(x.a);return l.createElement("div",Object(h.a)({className:Object(f.a)(a.root,n,"flex-start"===s.alignItems&&a.alignItemsFlexStart),ref:t},r))})),y=Object(v.a)({root:{minWidth:56,flexShrink:0},alignItemsFlexStart:{marginTop:8}},{name:"MuiListItemAvatar"})(g),w=a(616),C=l.forwardRef((function(e,t){var a=e.children,n=e.classes,r=e.className,s=e.disableTypography,i=void 0!==s&&s,c=e.inset,o=void 0!==c&&c,d=e.primary,m=e.primaryTypographyProps,u=e.secondary,j=e.secondaryTypographyProps,p=Object(O.a)(e,["children","classes","className","disableTypography","inset","primary","primaryTypographyProps","secondary","secondaryTypographyProps"]),v=l.useContext(x.a).dense,g=null!=d?d:a;null==g||g.type===b.a||i||(g=l.createElement(b.a,Object(h.a)({variant:v?"body2":"body1",className:n.primary,component:"span",display:"block"},m),g));var y=u;return null==y||y.type===b.a||i||(y=l.createElement(b.a,Object(h.a)({variant:"body2",className:n.secondary,color:"textSecondary",display:"block"},j),y)),l.createElement("div",Object(h.a)({className:Object(f.a)(n.root,r,v&&n.dense,o&&n.inset,g&&y&&n.multiline),ref:t},p),g,y)})),k=Object(v.a)({root:{flex:"1 1 auto",minWidth:0,marginTop:4,marginBottom:4},multiline:{marginTop:6,marginBottom:6},dense:{},inset:{paddingLeft:56},primary:{},secondary:{}},{name:"MuiListItemText"})(C),S=l.forwardRef((function(e,t){var a=e.classes,n=e.className,r=Object(O.a)(e,["classes","className"]);return l.createElement("div",Object(h.a)({className:Object(f.a)(a.root,n),ref:t},r))}));S.muiName="ListItemSecondaryAction";var N,T=Object(v.a)({root:{position:"absolute",right:16,top:"50%",transform:"translateY(-50%)"}},{name:"MuiListItemSecondaryAction"})(S),E=a(555),I=a(539),L=a(538),M=a(479),z=a(56),A=a(118),B=a(618),D=a(551),P=a(547),W=a(143),F=a(237),R=a(210),_=a(172),H=a(171),V=a(144),Y=a(3),J=a(147),U=a(55),$=a(42),q=a.n($),G=a(609),K=a(148),Q=a(2),X={_id:"",name:"",email:"",title:""},Z=function(e){var t=e.onSidenavClose,a=d.a.useState(!1),n=Object(c.a)(a,2),i=n[0],o=n[1],l=d.a.useState([]),u=Object(c.a)(l,2),j=u[0],p=u[1],h=d.a.useState(X),O=Object(c.a)(h,2),f=O[0],v=O[1],x=Object(W.b)().dispatch,g=Object(K.a)(),y=g.loading,w=g.onMutate,C=function(){var e=Object(s.a)(r.a.mark((function e(t){var a,n,s,i;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""===(a=t.target.value)&&v(X),"undefined"!=typeof N&&(null===(n=N)||void 0===n||n.cancel("Operation cancled")),N=q.a.CancelToken.source(),e.prev=4,!a){e.next=13;break}return o(!0),e.next=9,q.a.get("/members/search/".concat(a),{cancelToken:N.token});case 9:s=e.sent,(i=s.data).success&&p(i.data),o(!1);case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(4),console.error(e.t0.message||e.t0);case 18:case"end":return e.stop()}}),e,null,[[4,15]])})));return function(t){return e.apply(this,arguments)}}();function k(){return(k=Object(s.a)(r.a.mark((function e(){var t;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,""===(null===f||void 0===f?void 0:f.email)){e.next=6;break}return e.next=4,w({url:"/workspace/addMember",method:"PATCH",data:null,params:{workspaceId:localStorage.getItem("workspace"),memberId:f._id}});case 4:(t=e.sent).success&&(v(X),x(Object(F.b)(t.data)));case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error(e.t0.message||e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}return Object(Q.jsx)(J.b,{initialValues:f,onSubmit:function(){return k.apply(this,arguments)},children:function(e){var a=e.handleSubmit;return Object(Q.jsxs)(J.a,{onSubmit:a,autoComplete:"off",children:[Object(Q.jsxs)(m.a,{style:{backgroundColor:"#f1f5f9",padding:"2.5rem 1rem"},borderBottom:"1px solid #fafafa",display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",children:[Object(Q.jsx)("div",{}),Object(Q.jsxs)(m.a,{children:[Object(Q.jsx)(U.a,{className:"bg-text-secondary",onClick:t,variant:"outlined",color:"default",size:"medium",type:"button",children:"Cancel"}),Object(Q.jsx)(U.a,{disableElevation:!0,size:"medium",type:"submit",style:{marginLeft:"0.5rem"},variant:"contained",color:"primary",children:y?"Loading...":"Save"})]})]}),Object(Q.jsxs)(m.a,{style:{padding:"1rem 1rem 0 1rem"},children:[Object(Q.jsx)(b.a,{variant:"subtitle1",className:"bg-text-primary fw-700",children:"Add Member"}),Object(Q.jsx)(b.a,{variant:"subtitle2",color:"textSecondary",gutterBottom:!0,children:"Add a new member to the current workspace."}),Object(Q.jsxs)("div",{className:"form-group",children:[Object(Q.jsx)("label",{children:"Email"}),Object(Q.jsx)(G.a,{onChange:function(e,t){return function(e){null!==e&&v(Object(Y.a)(Object(Y.a)({},e),{},{title:e.title||"Title does not mention"}))}(t)},fullWidth:!0,getOptionSelected:function(e,t){return e.email===t.email},getOptionLabel:function(e){return e.email},options:j,loading:i,clearOnBlur:!0,selectOnFocus:!1,renderInput:function(e){return Object(Q.jsx)(V.a,Object(Y.a)(Object(Y.a)({},e),{},{fullWidth:!0,name:"email",variant:"outlined",size:"small",placeholder:"member's Email",onChange:function(e){return C(e)},value:f.email}))}})]}),Object(Q.jsxs)("div",{className:"form-group",children:[Object(Q.jsx)("label",{children:"Name"}),Object(Q.jsx)(V.a,{fullWidth:!0,name:"name",variant:"outlined",size:"small",placeholder:"member's name",value:f.name,disabled:!0})]}),Object(Q.jsxs)("div",{className:"form-group",children:[Object(Q.jsx)("label",{children:"Title"}),Object(Q.jsx)(V.a,{fullWidth:!0,name:"title",variant:"outlined",size:"small",placeholder:"member's title",value:f.title,disabled:!0})]})]})]})}})},ee=a(151),te=Object(A.a)((function(e){return Object(B.a)({root:{width:"100%",backgroundColor:e.palette.background.paper,paddingBottom:"0 !important"},listItem:{cursor:"pointer","&:hover":{backgroundColor:"#f1f5f9"}},search:Object(o.a)({},e.breakpoints.down("xs"),{flexDirection:"column"}),searchFabButton:Object(o.a)({},e.breakpoints.down("xs"),{marginLeft:"0 !important",width:"100%"})})})),ae=function(){var e=te(),t=Object(H.a)("right","persistent"),a=t.onSidenavClose,n=t.onSidenavOpen,r=t.SidenavComponent,s=Object(W.b)(),i=s.currentUser,c=!(s.owner===i._id);return Object(Q.jsxs)(d.a.Fragment,{children:[Object(Q.jsxs)(I.a,{onClick:n,className:e.searchFabButton,variant:"extended",color:"primary",size:"medium",disabled:c,style:{marginLeft:"1rem",minWidth:"120px"},children:[Object(Q.jsx)(P.a,{style:{marginRight:"0.4rem"}}),Object(Q.jsx)("span",{children:"Add"})]}),Object(Q.jsx)(r,{children:Object(Q.jsx)("div",{style:{overflowY:"auto",height:"calc(100% - 56px)",marginTop:"56px"},children:Object(Q.jsx)(Z,{onSidenavClose:a})})})]})},ne=function(e){var t=e.memberId,a=Object(_.a)({onConfirmClick:function(){return j.apply(this,arguments)},message:"Are you sure you want to delete this member? This member would be unlinked to all related projects."}),n=a.ConfirmDialog,i=a.handleOpen,c=a.handleClose,o=Object(W.b)(),l=o.dispatch,m=o.selectedWorkspace,b=!(o.owner===o.currentUser._id),u=Object(R.b)().showMsg;function j(){return(j=Object(s.a)(r.a.mark((function e(){var a,n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!t||!m){e.next=7;break}return e.next=4,q.a.delete("/workspace/members/".concat(t,"/").concat(m));case 4:a=e.sent,(n=a.data).success?(u(n.message,"success"),setTimeout((function(){l(Object(F.a)(t))}))):(u(n.message,"error"),setTimeout((function(){c()})));case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.error(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})))).apply(this,arguments)}return Object(Q.jsxs)(d.a.Fragment,{children:[Object(Q.jsx)(L.a,{onClick:i,disabled:b,children:Object(Q.jsx)(M.a,{})}),Object(Q.jsx)(n,{})]})};t.default=function(){var e=te(),t=Object(z.d)((function(e){return e.members})),a=d.a.useState(t),n=Object(c.a)(a,2),r=n[0],s=n[1],o=d.a.useState(""),l=Object(c.a)(o,2),h=l[0],O=l[1];return d.a.useEffect((function(){if(""===h)s(t);else{var e=Object(i.a)(t).filter((function(e){return e.name.toLowerCase().includes(h.toLowerCase())}));s(e)}}),[t,h]),Object(Q.jsxs)(m.a,{className:"bg-white",width:"100%",height:"100%",children:[Object(Q.jsxs)(m.a,{p:3,children:[Object(Q.jsx)(b.a,{variant:"h4",className:"bg-text-primary fw-700",children:"Members"}),Object(Q.jsxs)(b.a,{variant:"subtitle2",color:"textSecondary",children:[t.length>0?t.length:"Add a new "," contacts"]}),Object(Q.jsxs)(m.a,{display:"flex",flexDirection:"row",my:2,className:e.search,children:[Object(Q.jsx)(V.a,{onChange:function(e){e&&O(e.target.value)},style:{marginBottom:"0.5rem"},value:h,fullWidth:!0,variant:"outlined",placeholder:"Search members",size:"small",InputProps:{startAdornment:Object(Q.jsx)(u.a,{position:"start",children:Object(Q.jsx)(D.a,{color:"disabled"})})}}),Object(Q.jsx)(ae,{})]})]}),Object(Q.jsx)(j.a,{component:"nav",className:e.root,"aria-label":"Members list",children:r.map((function(t){return Object(Q.jsxs)(d.a.Fragment,{children:[Object(Q.jsxs)(p.a,{className:e.listItem,children:[Object(Q.jsx)(y,{children:Object(Q.jsx)(w.a,{src:t.avatar?"".concat("https://my-team-board.herokuapp.com/api","/files/").concat(t.avatar):ee.a})}),Object(Q.jsx)(k,{primary:t.name,secondary:t.title||"Title not mentioned"}),Object(Q.jsx)(T,{children:Object(Q.jsx)(ne,{memberId:t._id||""})})]}),Object(Q.jsx)(E.a,{})]},t._id)}))}),0===r.length&&Object(Q.jsxs)(m.a,{mt:4,p:3,children:[Object(Q.jsx)(b.a,{variant:"subtitle2",component:"div",color:"textSecondary",gutterBottom:!0,children:"No Members found"}),Object(Q.jsx)(b.a,{variant:"body2",component:"small",color:"textSecondary",gutterBottom:!0,children:"Only the owner of the selected workspace has the ability to add or remove members."})]})]})}}}]);
//# sourceMappingURL=15.9430bcbf.chunk.js.map