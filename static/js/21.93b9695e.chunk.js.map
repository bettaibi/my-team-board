{"version":3,"sources":["pages/Team/Profile/BasicInfos.tsx","assets/avatars/camera.png","pages/Team/Profile/MyWorkspaces.tsx","pages/Team/Profile/index.tsx"],"names":["schema","yup","shape","name","required","phone","title","useStyles","makeStyles","theme","card","borderRadius","boxShadow","backgroundColor","largeAvatar","width","spacing","height","marginBottom","cursor","position","content","zindex","color","display","alignItems","justifyContent","top","bottom","left","right","croppedImageContainer","overflow","croppedImage","objectFit","iconColor","ProfileDetails","classes","currentUser","updateCurrentUser","useMutation","loading","onMutate","InitialValue","country","city","address","updateUser","values","a","url","method","data","success","console","error","initialValues","validationSchema","onSubmit","handleSubmit","handleChange","handleBlur","errors","touched","autoComplete","Box","className","clsx","mb","p","flexDirection","borderBottom","component","Typography","variant","RoundedButton","disabled","type","disableElevation","size","MyTextField","fullWidth","placeholder","onChange","onBlur","value","helperText","multiline","rows","ImageCropperContainer","fileRef","React","useRef","useState","selectedImg","setSelectedImg","useDialog","onDialogOpen","onDialogClose","DialogComponent","toBase64","file","Promise","resolve","reject","reader","FileReader","readAsDataURL","onload","result","onerror","e","target","files","img","Fragment","Avatar","alt","src","avatar","process","userAvatar","onClick","current","click","err","ref","hidden","accept","ImageCropper","cropData","setCropData","cropperRef","urlToFile","filename","mimeType","fetch","then","res","arrayBuffer","buf","File","saveAvatar","Date","now","formData","FormData","append","setTimeout","style","marginRight","zoomTo","initialAspectRatio","viewMode","minCropBoxHeight","minCropBoxWidth","background","responsive","crop","imageElement","cropper","getCroppedCanvas","toDataURL","checkOrientation","guides","BasicInfos","useSharedContext","Grid","container","item","xs","sm","gutterBottom","email","MyWorkspaces","useSelector","state","workspaces","TableContainer","Paper","Table","aria-label","TableHead","TableRow","TableCell","Hidden","xsDown","TableBody","map","row","scope","owner","_id","AvatarGroup","max","members","Tooltip","TabPanel","props","children","index","other","role","id","aria-labelledby","a11yProps","mr","TabContainer","setValue","TabIcon","Chip","label","length","Tabs","event","newValue","indicatorColor","textColor","Tab","axis","onChangeIndex","Profile","history","useHistory","goBack"],"mappings":"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","file":"static/js/21.93b9695e.chunk.js","sourcesContent":["import React from 'react';\r\nimport {\r\n    Box,\r\n    Typography,\r\n    Grid,\r\n    makeStyles,\r\n    Theme,\r\n    Avatar\r\n} from '@material-ui/core';\r\nimport { Formik, Form } from \"formik\";\r\nimport { useSharedContext } from '../../../context';\r\nimport { ClassNameMap } from '@material-ui/core/styles/withStyles';\r\nimport { UserModel } from '../../../models/app.model';\r\nimport MyTextField from '../../../components/MyTextField';\r\nimport clsx from 'clsx';\r\nimport RoundedButton from '../../../components/RoundedButton';\r\nimport useMutation from '../../../hooks/useMutation';\r\nimport useDialog from '../../../hooks/useDialog';\r\nimport Cropper from \"react-cropper\";\r\nimport userAvatar from '../../../assets/avatars/profile.jpg';\r\nimport cameraIcon from '../../../assets/avatars/camera.png';\r\nimport * as yup from \"yup\";\r\n\r\nimport \"cropperjs/dist/cropper.css\";\r\n\r\nconst baseURL = process.env.REACT_APP_BASE_URL;\r\n\r\nconst schema = yup.object().shape({\r\n    name: yup.string().required('Name is required'),\r\n    phone: yup.string().required('Phone is required'),\r\n    title: yup.string().required('Title is required')\r\n});\r\n\r\nconst useStyles = makeStyles((theme: Theme) => ({\r\n    card: {\r\n        borderRadius: 10,\r\n        boxShadow: \"rgb(0 0 0 / 20%) 0px 3px 1px -2px, rgb(0 0 0 / 14%) 0px 2px 2px 0px, rgb(0 0 0 / 12%) 0px 1px 5px 0px\",\r\n        backgroundColor: \"#fff\",\r\n    },\r\n    largeAvatar: {\r\n        width: theme.spacing(11),\r\n        height: theme.spacing(11),\r\n        marginBottom: theme.spacing(2),\r\n        cursor: 'pointer',\r\n        position: 'relative',\r\n        '&:hover': {\r\n            '&:before':{\r\n                content: `url(${cameraIcon})`,\r\n                width: '20px',\r\n                height: '20px',\r\n                zindex: 9999999999,\r\n                position: 'absolute',\r\n                color: '#fff !important',\r\n                display: 'flex',\r\n                alignItems: 'center',\r\n                justifyContent: 'center'\r\n            },\r\n            '&:after': {\r\n                content: \"''\",\r\n                position: 'absolute',\r\n                top: 0,\r\n                bottom: 0,\r\n                left: 0,\r\n                right: 0,\r\n                backgroundColor: 'rgba(0,0,0,0.5)',\r\n            }\r\n        }\r\n    },\r\n    croppedImageContainer: {\r\n        overflow: \"hidden\",\r\n        width: theme.spacing(10),\r\n        height: theme.spacing(10),\r\n        borderRadius: '40px',\r\n        position: 'absolute',\r\n        top: theme.spacing(1),\r\n        right: theme.spacing(1),\r\n    },\r\n    croppedImage: {\r\n        objectFit: 'cover',\r\n    },\r\n    iconColor: {\r\n        color: '#64748B'\r\n    }\r\n}))\r\n\r\nconst BasicInfos = () => {\r\n    const classes = useStyles();\r\n    const { currentUser, updateCurrentUser } = useSharedContext();\r\n\r\n    return (\r\n        <Grid container spacing={2}>\r\n\r\n            <Grid item xs={12} sm={4}>\r\n                <Box component=\"div\" p={2} className={clsx(classes.card)}\r\n                    display=\"flex\" flexDirection=\"column\" alignItems=\"center\" justifyContent=\"center\">\r\n                    <ImageCropperContainer classes={classes} currentUser={currentUser} updateCurrentUser={updateCurrentUser} />\r\n                    <Typography variant=\"h6\" className=\"text-center\">\r\n                        {currentUser.name}\r\n                    </Typography>\r\n                    <Typography variant=\"body2\" className={classes.iconColor} gutterBottom>\r\n                        {currentUser.email}\r\n                    </Typography>\r\n                </Box>\r\n            </Grid>\r\n\r\n            <Grid item xs>\r\n                <ProfileDetails classes={classes} currentUser={currentUser} updateCurrentUser={updateCurrentUser} />\r\n            </Grid>\r\n        </Grid>\r\n    )\r\n}\r\ninterface ProfileDetailsProps {\r\n    currentUser: UserModel;\r\n    updateCurrentUser: (u: UserModel) => void;\r\n    classes: ClassNameMap<any>;\r\n}\r\nconst ProfileDetails: React.FC<ProfileDetailsProps> = ({ classes, currentUser, updateCurrentUser }) => {\r\n    const { loading, onMutate } = useMutation();\r\n\r\n    const InitialValue = {\r\n        name: currentUser.name || '',\r\n        country: currentUser.country || '',\r\n        city: currentUser.city || '',\r\n        title: currentUser.title || '',\r\n        phone: currentUser.phone || '',\r\n        address: currentUser.address || ''\r\n    };\r\n\r\n    const updateUser = async (values: any) => {\r\n        try {\r\n            const res = await onMutate({\r\n                url: '/members',\r\n                method: 'PUT',\r\n                data: values\r\n            });\r\n            if (res.success) {\r\n                // set CurrentUser\r\n                updateCurrentUser(values);\r\n            }\r\n        }\r\n        catch (err) {\r\n            console.error(err)\r\n        }\r\n    };\r\n\r\n    return (\r\n        <Formik initialValues={InitialValue} validationSchema={schema} onSubmit={(values) => updateUser(values)}>\r\n            {\r\n                ({ handleSubmit, handleChange, handleBlur, values, errors, touched }) => (\r\n                    <Form onSubmit={handleSubmit} autoComplete=\"off\" >\r\n                        <Box className={clsx(classes.card)} mb={2} overflow=\"hidden\">\r\n                            <Box p={2} display=\"flex\" flexDirection=\"row\" alignItems=\"center\" justifyContent=\"space-between\"\r\n                                borderBottom=\"1px solid lightgray\" component=\"div\">\r\n                                <Typography variant=\"subtitle1\">\r\n                                    General Information\r\n                                </Typography>\r\n                                <RoundedButton disabled={loading} className={classes.iconColor} type=\"submit\" disableElevation variant=\"outlined\" color=\"default\" size=\"small\">\r\n                                    <span>{loading ? 'Loading...' : 'Save'}</span>\r\n                                </RoundedButton>\r\n                            </Box>\r\n                            <Box p={2} component=\"div\">\r\n                                <div className=\"form-group\">\r\n                                    <label>Full name</label>\r\n                                    <MyTextField fullWidth name=\"name\" variant=\"outlined\" size=\"small\" placeholder=\"full name\"\r\n                                        onChange={handleChange} onBlur={handleBlur}\r\n                                        value={values.name}\r\n                                        error={touched.name && !!errors.name}\r\n                                        helperText={touched.name && errors.name} />\r\n                                </div>\r\n                                <div className=\"form-group\">\r\n                                    <label>Title</label>\r\n                                    <MyTextField fullWidth name=\"title\" variant=\"outlined\" size=\"small\" placeholder=\"title\"\r\n                                        onChange={handleChange} onBlur={handleBlur}\r\n                                        value={values.title}\r\n                                        error={touched.title && !!errors.title}\r\n                                        helperText={touched.title && errors.title} />\r\n                                </div>\r\n                                <div className=\"form-group\">\r\n                                    <label>Phone</label>\r\n                                    <MyTextField fullWidth name=\"phone\" variant=\"outlined\" size=\"small\" placeholder=\"phone\"\r\n                                        onChange={handleChange} onBlur={handleBlur}\r\n                                        value={values.phone}\r\n                                        error={touched.phone && !!errors.phone}\r\n                                        helperText={touched.phone && errors.phone} />\r\n                                </div>\r\n                            </Box>\r\n                        </Box>\r\n\r\n                        <Box className={classes.card} overflow=\"hidden\">\r\n                            <Box p={2} borderBottom=\"1px solid lightgray\" component=\"div\">\r\n                                <Typography variant=\"subtitle1\">\r\n                                    Contact\r\n                                </Typography>\r\n                            </Box>\r\n                            <Box p={2} component=\"div\">\r\n                                <div className=\"form-group\">\r\n                                    <label>Address</label>\r\n                                    <MyTextField multiline rows={3} fullWidth name=\"address\" variant=\"outlined\" size=\"small\" placeholder=\"member's address\"\r\n                                        onChange={handleChange} onBlur={handleBlur} />\r\n                                </div>\r\n                                <div className=\"form-group\">\r\n                                    <label>Country</label>\r\n                                    <MyTextField fullWidth name=\"country\" variant=\"outlined\" size=\"small\" placeholder=\"country\"\r\n                                        onChange={handleChange} onBlur={handleBlur} />\r\n                                </div>\r\n                                <div className=\"form-group\">\r\n                                    <label>City</label>\r\n                                    <MyTextField fullWidth name=\"city\" variant=\"outlined\" size=\"small\" placeholder=\"city\"\r\n                                        onChange={handleChange} onBlur={handleBlur} />\r\n                                </div>\r\n                            </Box>\r\n                        </Box>\r\n                    </Form>\r\n                )\r\n            }\r\n        </Formik>\r\n    )\r\n};\r\n\r\nconst ImageCropperContainer: React.FC<ProfileDetailsProps> = ({ classes, currentUser, updateCurrentUser }) => {\r\n    const fileRef = React.useRef<HTMLInputElement>(null);\r\n    const [selectedImg, setSelectedImg] = React.useState<any>();\r\n    const { onDialogOpen, onDialogClose, DialogComponent } = useDialog();\r\n\r\n    const toBase64 = (file: File) => new Promise((resolve, reject) => {\r\n        if(file){\r\n            const reader = new FileReader();\r\n            reader.readAsDataURL(file);\r\n            reader.onload = () => resolve(reader.result);\r\n            reader.onerror = error => reject(error);\r\n        }\r\n    });\r\n\r\n    function imageHandler() {\r\n        try {\r\n            const file = fileRef.current;\r\n            if (file)\r\n            file.click();\r\n        }\r\n        catch (err) {\r\n            console.error(err)\r\n        }\r\n    };\r\n\r\n    async function onChangeHandler(e: any) {\r\n        try {\r\n            if(e){\r\n                const img = await toBase64(e.target.files[0]);\r\n                setSelectedImg(img);\r\n                onDialogOpen();\r\n            }\r\n        }\r\n        catch (err) {\r\n            console.error(err);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <React.Fragment>\r\n            <Avatar alt=\"user profile\" src={currentUser.avatar? `${baseURL}/files/${currentUser.avatar}` : userAvatar} className={classes.largeAvatar}\r\n                onClick={imageHandler} />\r\n            <input ref={fileRef} type=\"file\" hidden accept=\"image/*\" onChange={onChangeHandler} />\r\n            <DialogComponent>\r\n                <ImageCropper currentUser = {currentUser} src={selectedImg} updateCurrentUser={updateCurrentUser}\r\n                    onDialogClose={onDialogClose} classes={classes} />\r\n            </DialogComponent>\r\n        </React.Fragment>\r\n    )\r\n};\r\n\r\ninterface ImageCropperProps {\r\n    src: string;\r\n    onDialogClose: () => void;\r\n    updateCurrentUser: (u: UserModel) => void;\r\n    classes: ClassNameMap<any>;\r\n    currentUser: UserModel;\r\n}\r\nconst ImageCropper: React.FC<ImageCropperProps> = ({ currentUser, classes, src, onDialogClose, updateCurrentUser }) => {\r\n    const { loading, onMutate } = useMutation();\r\n    const [cropData, setCropData] = React.useState();\r\n    const cropperRef = React.useRef<HTMLImageElement>(null);\r\n\r\n    const urlToFile = (url: any, filename: string, mimeType = 'image/jpeg') => {\r\n        return (fetch(url)\r\n            .then((function(res: any){return res.arrayBuffer();}))\r\n            .then((function(buf: any){return new File([buf], filename, {type: mimeType});}))\r\n        );\r\n    }\r\n\r\n    const getCropData = () => {\r\n        const imageElement: any = cropperRef?.current;\r\n        const cropper: any = imageElement?.cropper;\r\n        setCropData(cropper.getCroppedCanvas().toDataURL())\r\n    };\r\n\r\n    const saveAvatar = async () => {\r\n        const file = await urlToFile(cropData, Date.now()+'.jpg');\r\n        const formData = new FormData();\r\n        formData.append('picture', file);\r\n\r\n        try{\r\n            const res = await onMutate({\r\n                url: '/files/avatar',\r\n                method: 'POST',\r\n                data: formData,\r\n            });\r\n            if(res.success){\r\n                onDialogClose();\r\n                setTimeout(()=> {\r\n                    updateCurrentUser({...currentUser, avatar: res.data.avatar});\r\n                },0);\r\n            }\r\n        }\r\n        catch(err){\r\n            console.error(err);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <>\r\n            <Box p={2} borderBottom=\"1px solid lightgray\" component=\"div\"\r\n                display=\"flex\" alignItems=\"center\" justifyContent=\"space-between\">\r\n                <Typography variant=\"subtitle1\" className=\"fw-700\">\r\n                    Image Cropper\r\n                </Typography>\r\n\r\n                <div>\r\n                    <RoundedButton onClick={onDialogClose}\r\n                        style={{ marginRight: '0.5rem', color: 'gray' }} disableElevation variant=\"outlined\" color=\"default\" size=\"small\">\r\n                        <span>Cancel</span>\r\n                    </RoundedButton>\r\n\r\n                    <RoundedButton onClick={saveAvatar}\r\n                        disableElevation variant=\"contained\" color=\"primary\" size=\"small\">\r\n                        <span>{loading?'Loading...':'Save'}</span>\r\n                    </RoundedButton>\r\n                </div>\r\n            </Box>\r\n\r\n            <Box component=\"div\" position=\"relative\" overflow=\"hidden\">\r\n                <Cropper\r\n                    style={{ height: '100vh', width: \"100%\" }}\r\n                    zoomTo={0.5}\r\n                    initialAspectRatio={16 / 9}\r\n                    src={src}\r\n                    viewMode={1}\r\n                    minCropBoxHeight={10}\r\n                    minCropBoxWidth={10}\r\n                    background={true}\r\n                    responsive={true}\r\n                    crop={getCropData}\r\n                    checkOrientation={false}\r\n                    ref={cropperRef}\r\n                    guides={false}\r\n                />\r\n\r\n                <Box className={classes.croppedImageContainer}>\r\n                    <img src={cropData || userAvatar} className={classes.croppedImage} alt=\"cropped avatar\" width=\"100%\" height=\"100%\" />\r\n                </Box>\r\n            </Box>\r\n        </>\r\n    )\r\n}\r\n\r\nexport default BasicInfos;\r\n","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAVwAAACOAQMAAABHWSL/AAAABlBMVEXu7u7///8o06qaAAABg0lEQVRYw+3YMW6DMBQGYCMGRk+dOQqn6Cm69Aa4U++SSwQpQ8aMHUvVrUu9QVTLr7Zp1TQi8L9QqpSaAemXvlgGnl8MgqxIqRWSalGQEjHGeGlRJGRERlrkVImShuJtxP8b33AwMXAyiI8LmGiDV/uFYLtaeFc5PAwH22GcfMM0jNMJWE3BR/V8eOix4j8b138Qwxe4/niECNbuGTBwvmzcUC/uq+fWLcVagMXfpn5llyCWfgYFiP2EVYEt2NZfaI2OHO4eiPe0c78A8RtJejXgnMlIerbgyP7ePRGKaxfLNRNDc1Yu5mhjZGEfJdZFqzJE/7zHi7/qVorOEaw4+K7D7XxYIjjh4JSFmxANZ2TDGXmOaZwxZ/A+nxy5v4u6mKBddF6cgtse84nVT2PrY8bFYkrf+OX2VXG6qOb0Z83p/Kf+U3rq2XRxA20hbBY2VFsUt65AMUxZOO8wfB/Ojxjefm36x3ED4qtr9972EODLirBXaaL4rWAUx09wMcbvogvF7/Qjr/pc9IvHAAAAAElFTkSuQmCC\"","import React from 'react';\r\nimport {\r\n    Table,\r\n    TableBody,\r\n    TableCell,\r\n    TableContainer,\r\n    TableRow,\r\n    TableHead,\r\n    Paper,\r\n    Avatar,\r\n    Hidden,\r\n    Tooltip\r\n} from '@material-ui/core';\r\n\r\nimport { useSelector } from 'react-redux';\r\n\r\nimport AvatarGroup from '@material-ui/lab/AvatarGroup';\r\nimport userAvatar from '../../../assets/avatars/profile.jpg';\r\nimport { AppState } from '../../../models/app.model';\r\nimport { useSharedContext } from '../../../context';\r\n\r\nconst baseURL = process.env.REACT_APP_BASE_URL;\r\n\r\nconst MyWorkspaces = () => {\r\n    const rows = useSelector((state: AppState) => state.workspaces);\r\n    const { currentUser } = useSharedContext(); \r\n\r\n    return (\r\n        <TableContainer component={Paper} style={{ borderRadius: '10px' }}>\r\n            <Table style={{ width: '100%' }} aria-label=\"simple table\">\r\n                <TableHead>\r\n                    <TableRow>\r\n                        <TableCell>Workspace</TableCell>\r\n                        <TableCell>Role</TableCell>\r\n                        <Hidden xsDown>\r\n                            <TableCell>Members</TableCell>\r\n                        </Hidden>\r\n\r\n                    </TableRow>\r\n                </TableHead>\r\n                <TableBody>\r\n                    {rows.map((row) => (\r\n                        <TableRow key={row.name}>\r\n                            <TableCell component=\"th\" scope=\"row\" className=\"text-capitalize\">\r\n                                {row.name}\r\n                            </TableCell>\r\n                            <TableCell>{row.owner._id === currentUser._id?'Owner': 'Member'}</TableCell>\r\n                            <Hidden xsDown>\r\n                                <TableCell>\r\n                                    <AvatarGroup max={3}>\r\n                                        {\r\n                                            row.members.map((item) => (\r\n                                                <Tooltip key={item._id} title={item.name}>\r\n                                                    <Avatar alt=\"user avatar\"  src={item.avatar? `${baseURL}/files/${item.avatar}` : userAvatar} />\r\n                                                </Tooltip>\r\n                                            ))\r\n                                        }\r\n                                    </AvatarGroup>\r\n                                </TableCell>\r\n                            </Hidden>\r\n\r\n                        </TableRow>\r\n                    ))}\r\n                </TableBody>\r\n            </Table>\r\n        </TableContainer>\r\n    )\r\n}\r\n\r\nexport default MyWorkspaces;\r\n","import React from 'react';\r\nimport {\r\n    Box,\r\n    Typography,\r\n    Tabs,\r\n    Tab,\r\n    makeStyles,\r\n    Chip,\r\n    Hidden\r\n} from '@material-ui/core';\r\nimport { useHistory } from 'react-router-dom';\r\nimport RoundedButton from '../../../components/RoundedButton';\r\nimport BasicInfos from './BasicInfos';\r\nimport MyWorkspaces from './MyWorkspaces';\r\nimport clsx from 'clsx';\r\nimport SwipeableViews from 'react-swipeable-views';\r\nimport { AppState } from '../../../models/app.model';\r\nimport { useSelector } from 'react-redux';\r\n\r\ninterface TabPanelProps {\r\n    children?: React.ReactNode;\r\n    index: any;\r\n    value: any;\r\n}\r\n\r\nfunction TabPanel(props: TabPanelProps) {\r\n    const { children, value, index, ...other } = props;\r\n\r\n    return (\r\n        <div\r\n            role=\"tabpanel\"\r\n            hidden={value !== index}\r\n            id={`simple-tabpanel-${index}`}\r\n            aria-labelledby={`simple-tab-${index}`}\r\n            {...other}\r\n        >\r\n            {value === index && (\r\n                <Box p={3}>\r\n                    <Typography>{children}</Typography>\r\n                </Box>\r\n            )}\r\n        </div>\r\n    );\r\n}\r\n\r\nfunction a11yProps(index: any) {\r\n    return {\r\n        id: `simple-tab-${index}`,\r\n        'aria-controls': `simple-tabpanel-${index}`,\r\n    };\r\n}\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    iconColor: {\r\n        color: '#64748B'\r\n    },\r\n    mr: {\r\n        marginRight: theme.spacing(1)\r\n    },\r\n}))\r\n\r\nconst Profile = () => {\r\n    const classes = useStyles();\r\n    const history = useHistory();\r\n\r\n    const goBack = () => {\r\n        history.goBack();\r\n    }\r\n\r\n    return (\r\n        <React.Fragment>\r\n            <Box p={2} className=\"bg-white\" display=\"flex\" alignItems=\"center\" justifyContent=\"flex-end\">\r\n                <RoundedButton variant=\"outlined\" className={clsx(classes.iconColor, classes.mr)} size=\"medium\"\r\n                    onClick={goBack}>\r\n                    <span>Go back</span>\r\n                </RoundedButton>\r\n            </Box>\r\n\r\n            <TabContainer />\r\n\r\n        </React.Fragment>\r\n    )\r\n}\r\n\r\nconst TabContainer = () => {\r\n    const [value, setValue] = React.useState(0);\r\n    const workspaces = useSelector((state: AppState) => state.workspaces);\r\n\r\n    const handleChange = (event: React.ChangeEvent<{}>, newValue: number) => {\r\n        setValue(newValue);\r\n    };\r\n    const handleChangeIndex = (index: number) => {\r\n        setValue(index);\r\n    };\r\n\r\n    const TabIcon = (\r\n        <label>\r\n            <span style={{ marginRight: '0.5rem' }}>My workspaces</span>\r\n            <Hidden xsDown>\r\n                <Chip\r\n                    size=\"small\"\r\n                    label={workspaces.length}\r\n                    color=\"primary\"\r\n                />\r\n            </Hidden>\r\n        </label>\r\n    );\r\n\r\n    return (\r\n        <>\r\n            <Box className=\"bg-white\" borderBottom=\"1px solid lightgray\">\r\n                <Tabs value={value} onChange={handleChange} aria-label=\"simple tabs example\"\r\n                    indicatorColor=\"primary\" textColor=\"primary\">\r\n                    <Tab label=\"Basic information\" {...a11yProps(0)}></Tab>\r\n                    <Tab label={TabIcon} {...a11yProps(1)} />\r\n                </Tabs>\r\n            </Box>\r\n\r\n            <SwipeableViews\r\n                axis='x'\r\n                index={value}\r\n                onChangeIndex={handleChangeIndex} >\r\n                <TabPanel value={value} index={0}>\r\n                    <BasicInfos />\r\n                </TabPanel>\r\n\r\n                <TabPanel value={value} index={1}>\r\n                    <MyWorkspaces />\r\n                </TabPanel>\r\n            </SwipeableViews>\r\n\r\n        </>\r\n    )\r\n};\r\n\r\n\r\nexport default Profile;\r\n"],"sourceRoot":""}