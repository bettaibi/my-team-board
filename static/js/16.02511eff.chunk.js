(this["webpackJsonpmy-team-board"]=this["webpackJsonpmy-team-board"]||[]).push([[16],{171:function(e,t,a){"use strict";var n=a(18),c=(a(0),a(300)),r=a(146),s=a(25),i=a(118),l=a(7),o=a(2),d=Object(i.a)((function(e){var t;return{drawerOpen:(t={},Object(n.a)(t,e.breakpoints.down("xs"),{width:"100%"}),Object(n.a)(t,"width","40%"),t),drawerClose:{width:0}}}));t.a=function(e,t,a){var i=d(),j=Object(r.a)(a||!1),b=j.handleClose,m=j.handleOpen,u=j.show,h=j.toggle;return{onSidenavClose:b,onSidenavOpen:m,onSidenavToggle:h,SidenavComponent:function(a){var r,d,j=a.children;return Object(o.jsx)(c.a,{transitionDuration:{enter:500,exit:1e3},variant:t,anchor:e,open:u,onClose:b,className:Object(l.a)((r={},Object(n.a)(r,i.drawerOpen,u),Object(n.a)(r,i.drawerClose,!u),r)),classes:{paper:Object(l.a)((d={},Object(n.a)(d,i.drawerOpen,u),Object(n.a)(d,i.drawerClose,!u),d))},children:Object(o.jsx)(s.a,{overflow:"hidden",children:j})})},show:u}}},248:function(e,t,a){"use strict";a(0);var n=a(614),c=a(580),r=a(15),s=a(581),i=a(314),l=a.n(i),o=a(118),d=a(618),j=a(2),b=Object(o.a)((function(e){return Object(d.a)({heading:{fontSize:e.typography.pxToRem(15),flexBasis:"33.33%",flexShrink:0},secondaryHeading:{fontSize:e.typography.pxToRem(15),color:e.palette.text.secondary}})}));t.a=function(e){var t=e.label,a=e.description,i=e.children,o=e.isOpen,d=b();return Object(j.jsxs)(n.a,{defaultExpanded:o||!1,children:[Object(j.jsxs)(c.a,{expandIcon:Object(j.jsx)(l.a,{}),"aria-controls":"panel1a-content",id:"panel1a-header",children:[Object(j.jsx)(r.a,{className:d.heading,children:t}),a&&Object(j.jsx)(r.a,{className:d.secondaryHeading,children:a})]}),Object(j.jsx)(s.a,{children:i})]})}},484:function(e,t,a){},611:function(e,t,a){"use strict";a.r(t);var n=a(191),c=a(141),r=a.n(c),s=a(142),i=a(140),l=a(0),o=a.n(l),d=a(118),j=a(25),b=a(616),m=a(15),u=a(617),h=a(538),x=a(545),p=a(555),O=a(583),f=a(584),g=a(585),v=a(586),w=a(587),y=a(588),C=a(589),N=a(590),k=a(591),S=a(507),I=a(55),D=a(143),A=a(170),z=a(238),R=a(146),F=a(171),_=a(582),T=a(248),M=a(144),W=a(2),B=Object(d.a)((function(e){return{lightGrayIcons:{backgroundColor:"#f5f4f4"},mr:{marginRight:e.spacing(3)}}})),E=function(e){var t=e.onSidenavClose,a=e.member,n=B();return Object(W.jsxs)(o.a.Fragment,{children:[Object(W.jsxs)(j.a,{height:"70px",p:2,boxShadow:"0 .125rem .25rem rgba(0,0,0,.075)",display:"flex","flex-direction":"row",alignItems:"center",justifyContent:"space-between",children:[Object(W.jsxs)(j.a,{children:[Object(W.jsx)(m.a,{variant:"h6",className:"bg-text-primary",children:"Details"}),Object(W.jsxs)(m.a,{variant:"body2",color:"textSecondary",children:["#",null===a||void 0===a?void 0:a.name]})]}),Object(W.jsx)(x.a,{title:"Close",children:Object(W.jsx)(h.a,{className:n.lightGrayIcons,size:"small",onClick:t,children:Object(W.jsx)(_.a,{})})})]}),Object(W.jsx)(T.a,{label:"About",isOpen:!0,children:Object(W.jsxs)(j.a,{display:"flex",flexDirection:"column",flexGrow:1,children:[Object(W.jsxs)("div",{className:"form-group",children:[Object(W.jsx)("label",{children:"Name"}),Object(W.jsx)(M.a,{disabled:!0,fullWidth:!0,variant:"outlined",size:"small",value:null===a||void 0===a?void 0:a.name})]}),Object(W.jsxs)("div",{className:"form-group",children:[Object(W.jsx)("label",{children:"Title"}),Object(W.jsx)(M.a,{disabled:!0,fullWidth:!0,variant:"outlined",size:"small",value:(null===a||void 0===a?void 0:a.title)||"Not mention"})]}),Object(W.jsxs)("div",{className:"form-group",children:[Object(W.jsx)("label",{children:"Email"}),Object(W.jsx)(M.a,{disabled:!0,fullWidth:!0,variant:"outlined",size:"small",value:null===a||void 0===a?void 0:a.email})]})]})}),Object(W.jsx)(T.a,{label:"View photos and videos",children:"you will find all sent media in here"}),Object(W.jsx)(T.a,{label:"File Attachment",children:"you will find all sent media in here"}),Object(W.jsx)(T.a,{label:"Calls History",children:"List of peviews calls is here"})]})},H=a(7),L=a.p+"static/media/bg1.9e4de1d1.svg",P=a(151),Y=a(46),G=a.n(Y),U=a(244),J=a.n(U),V=a(148),q=(a(484),a(319)),K=a(196),Q=a(210),X="https://my-team-board.herokuapp.com/api",Z=Object(d.a)((function(e){return{root:{height:"calc(100vh - 56px)",position:"relative",display:"flex",flexDirection:"column",backgroundRepeat:"no-repeat",backgroundImage:"url(".concat(L,")"),backgroundAttachment:"fixed",backgroundSize:"cover",width:"100%",overflow:"hidden"},iconColor:{color:"#64748B"},mr:{marginRight:e.spacing(.5)},bgLightBlue:{backgroundColor:"#f1f5f9"},fileAttachment:{cursor:"pointer",color:"#fff !important",padding:"8px 15px",marginBottom:"5px",marginTop:"5px"},downloadLink:{"&:hover":{textDecoration:"none !important"}}}})),$=function(e){var t=e.memberId,a=Object(I.d)((function(e){return e.members})).find((function(e){return e._id===t})),n=Object(A.c)().onlineUsers;return Object(l.useEffect)((function(){a&&sessionStorage.setItem("userToCall",JSON.stringify(a))}),[t]),Object(W.jsxs)(o.a.Fragment,{children:[Object(W.jsxs)(j.a,{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"start",children:[a&&Object(W.jsx)(b.a,{src:a.avatar?"".concat(X,"/files/").concat(a.avatar):P.a,alt:"receptor"}),Object(W.jsxs)(j.a,{display:"flex",flexDirection:"column",ml:1,children:[Object(W.jsx)(m.a,{variant:"subtitle2",className:"bg-text-primary",children:null===a||void 0===a?void 0:a.name}),Object(W.jsx)("small",{className:"bg-text-secondary",children:(null===a||void 0===a?void 0:a._id)&&n.hasOwnProperty(a._id)?n[a._id].lastSeen?Object(W.jsx)(J.a,{fromNow:!0,children:n[a._id].lastSeen}):"Active Now":"long time ago"})]})]}),Object(W.jsx)(j.a,{children:Object(W.jsx)(re,{member:a})})]})},ee=function(e){var t=e.memberId,a=Z(),c=o.a.useState(""),d=Object(i.a)(c,2),b=d[0],m=d[1],C=Object(R.a)(),N=C.show,k=C.toggle,I=Object(D.b)(),F=I.currentUser,_=I.selectedWorkspace,T=I.dispatch,M=Object(q.b)().onCallStart,B=Object(A.c)(),E=B.sendMessage,H=B.onlineUsers,L=Object(Q.b)().showMsg,P=Object(V.a)().onMutate,Y=Object(l.useRef)(),U=Object(l.useRef)();function J(){return(J=Object(s.a)(r.a.mark((function e(){var a,n,c;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a={text:b,members:[t,F._id||""],workspace:_||"",sender:F._id||"",sentAt:new Date},e.next=4,G.a.post("/messages",a);case 4:n=e.sent,(c=n.data).success&&(m(""),T(Object(z.a)(c.data,t)),E(_,t,c.data)),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.error(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})))).apply(this,arguments)}function X(){return(X=Object(s.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{Object(K.c)(t,H)?M("dial",!1):L("Member is not available right now, call him later","warning")}catch(a){console.error(a)}case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function $(){return($=Object(s.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{Object(K.c)(t,H)?M("dial",!0):L("Member is not available right now, call him later","warning")}catch(a){console.error(a)}case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ee(){return(ee=Object(s.a)(r.a.mark((function e(a){var c,s,i,l,o;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!window.confirm("image(s) have been selected, confirm to send!")){e.next=10;break}c=new FormData,s=Object(n.a)(a.target.files);try{for(s.s();!(i=s.n()).done;)l=i.value,c.append("pictures",l)}catch(r){s.e(r)}finally{s.f()}return e.next=8,P({url:"/files/pictures/".concat(_,"/").concat(t),method:"PATCH",data:c});case 8:(o=e.sent).success&&T(Object(z.a)(o.data,t));case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),console.error(e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})))).apply(this,arguments)}function te(){return(te=Object(s.a)(r.a.mark((function e(a){var n,c;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!window.confirm("file(s) have been selected, confirm to send!")){e.next=9;break}return(n=new FormData).append("file",a.target.files[0]),e.next=7,P({url:"/files/attachment/".concat(_,"/").concat(t),method:"PATCH",data:n});case 7:(c=e.sent).success&&T(Object(z.a)(c.data,t));case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.error(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})))).apply(this,arguments)}return Object(W.jsxs)(j.a,{borderRadius:5,border:"1px solid lightgray",overflow:"hidden",className:"bg-white",children:[Object(W.jsx)(j.a,{p:1,children:Object(W.jsx)(u.a,{onChange:function(e){m(e.target.value)},value:b,multiline:!0,maxRows:3,fullWidth:!0,placeholder:"enter your message right here..",inputProps:{"aria-label":"naked"}})}),Object(W.jsxs)(j.a,{className:a.bgLightBlue,borderTop:"1px solid lightgray",p:1,display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between",children:[Object(W.jsxs)("div",{children:[N&&Object(W.jsx)(S.a,{set:"twitter",onSelect:function(e){return function(e){m((function(t){return t.trim()+" "+e.native})),k()}(e)},style:{position:"absolute",bottom:"60px",left:"1.5rem",zIndex:99999,width:"280px"}}),Object(W.jsx)(h.a,{className:a.mr,size:"small",onClick:k,children:Object(W.jsx)(O.a,{className:a.iconColor})}),Object(W.jsxs)(o.a.Fragment,{children:[Object(W.jsx)(x.a,{title:"send images",children:Object(W.jsx)(h.a,{className:a.mr,size:"small",onClick:function(){return U.current.click()},children:Object(W.jsx)(f.a,{className:a.iconColor})})}),Object(W.jsx)("input",{onChange:function(e){return ee.apply(this,arguments)},ref:U,name:"pictures",hidden:!0,multiple:!0,accept:"image/*",type:"file"})]}),Object(W.jsxs)(o.a.Fragment,{children:[Object(W.jsx)(x.a,{title:"send attachment",children:Object(W.jsx)(h.a,{className:a.mr,size:"small",onClick:function(){return Y.current.click()},children:Object(W.jsx)(g.a,{className:a.iconColor})})}),Object(W.jsx)("input",{onChange:function(e){return te.apply(this,arguments)},ref:Y,hidden:!0,type:"file",name:"file",accept:".xlsx,.xls,.doc, .docx,.ppt, .pptx,.txt,.pdf"})]})]}),Object(W.jsxs)("div",{style:{display:"flex"},children:[Object(W.jsx)(x.a,{title:"audio call",children:Object(W.jsx)(h.a,{className:a.mr,size:"small",onClick:function(){return X.apply(this,arguments)},children:Object(W.jsx)(v.a,{className:a.iconColor})})}),Object(W.jsx)(x.a,{title:"video call",children:Object(W.jsx)(h.a,{size:"small",onClick:function(){return $.apply(this,arguments)},children:Object(W.jsx)(w.a,{className:a.iconColor})})}),Object(W.jsx)(p.a,{orientation:"vertical",flexItem:!0,style:{margin:"0 0.6rem",width:"2px"}}),Object(W.jsx)(x.a,{title:"send",children:Object(W.jsx)("span",{children:Object(W.jsx)(h.a,{size:"small",disabled:""===b,onClick:function(){return J.apply(this,arguments)},children:Object(W.jsx)(y.a,{className:a.iconColor})})})})]})]})]})},te=function(e){var t=e.memberId,a=Object(I.d)((function(e){return e.chat})),n=o.a.useState(a[t]||[]),c=Object(i.a)(n,2),d=c[0],b=c[1],u=Object(l.useRef)(null),h=Object(D.b)(),x=h.selectedWorkspace,p=h.currentUser,O=h.dispatch;return Object(l.useEffect)((function(){var e;null===(e=u.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})}),[d]),Object(l.useEffect)((function(){var e=function(){var e=Object(s.a)(r.a.mark((function e(){var a,n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,G.a.get("/messages/".concat(x,"/").concat(t));case 3:a=e.sent,(n=a.data).success&&(O(Object(z.c)(n.data,t)),b(n.data)),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}();a.hasOwnProperty(t)?b(a[t]):e()}),[t,a]),0===d.length?Object(W.jsxs)(j.a,{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"100%",children:[Object(W.jsx)(C.a,{style:{color:"#9e9e9e",fontSize:60}}),Object(W.jsx)(m.a,{variant:"h6",component:"span",style:{color:"#9e9e9e"},gutterBottom:!0,children:"Start A new Conversation"})]}):Object(W.jsx)(o.a.Fragment,{children:d.map((function(e,t){return Object(W.jsx)("div",{ref:u,children:Object(W.jsx)(ce,{message:e,myId:p._id||"",last:d.length===t+1})},e._id)}))})},ae=function(e){var t=e.message,a=e.mine,n=Z();return Object(W.jsx)(x.a,{title:"download",children:Object(W.jsx)("a",{className:n.downloadLink,target:"_blank",href:"".concat(X,"/files/").concat(t.file),download:t.file,children:Object(W.jsxs)(j.a,{display:"flex",flexDirection:"row",alignItems:"center",maxWidth:"280px",borderRadius:20,className:Object(H.a)(n.fileAttachment,{"my-attachment":a,"your-attachment":!a}),children:[Object(W.jsx)(N.a,{}),Object(W.jsxs)(j.a,{mx:1,children:[Object(W.jsx)(m.a,{variant:"subtitle2",children:" Click to download"}),Object(W.jsxs)("small",{children:["Sent At: \xa0",Object(W.jsx)(J.a,{format:"DD/MM/YYYY",children:null===t||void 0===t?void 0:t.sentAt})]})]})]})})})},ne=function(e){var t=e.pictures;Z();return Object(W.jsx)("div",{className:"gallery",children:t.map((function(e,t){return Object(W.jsx)("figure",{className:"gallery_item".concat(t),children:Object(W.jsx)("a",{href:"".concat(X,"/files/").concat(e),download:!0,target:"_blank",children:Object(W.jsx)("img",{src:"".concat(X,"/files/").concat(e),alt:"pic".concat(t)})})},"pic".concat(t))}))})},ce=function(e){var t=e.message,a=e.myId,n=e.last,c=Object(R.a)(),r=c.show,s=c.toggle;return Object(W.jsx)(o.a.Fragment,{children:t.sender===a?Object(W.jsxs)("div",{className:"messages mine",children:[t.text&&Object(W.jsxs)(W.Fragment,{children:[Object(W.jsx)("div",{className:Object(H.a)("message",{last:n}),onClick:s,children:t.text}),n&&Object(W.jsx)("small",{style:{marginRight:"0.5rem"},className:"bg-text-secondary",children:Object(W.jsx)(J.a,{fromNow:!0,children:t.sentAt})}),!n&&r&&Object(W.jsx)("small",{style:{marginRight:"0.5rem"},className:"bg-text-secondary",children:Object(W.jsx)(J.a,{fromNow:!0,children:t.sentAt})})]}),t.file&&Object(W.jsx)(ae,{message:t,mine:!0}),t.pictures&&Object(W.jsx)(ne,{pictures:t.pictures})]}):Object(W.jsxs)("div",{className:"messages yours",children:[t.text&&Object(W.jsxs)(W.Fragment,{children:[Object(W.jsx)("div",{className:Object(H.a)("message",{last:n}),onClick:s,children:t.text}),n&&Object(W.jsx)("small",{style:{marginRight:"0.5rem"},className:"bg-text-secondary",children:Object(W.jsx)(J.a,{fromNow:!0,children:t.sentAt})}),!n&&r&&Object(W.jsx)("small",{style:{marginRight:"0.5rem"},className:"bg-text-secondary",children:Object(W.jsx)(J.a,{fromNow:!0,children:t.sentAt})})]}),t.file&&Object(W.jsx)(ae,{message:t,mine:!1}),t.pictures&&Object(W.jsx)(ne,{pictures:t.pictures})]})})},re=function(e){var t=e.member,a=Z(),n=Object(F.a)("right","persistent"),c=n.SidenavComponent,r=n.onSidenavClose,s=n.onSidenavOpen;return Object(W.jsxs)(o.a.Fragment,{children:[Object(W.jsx)(h.a,{onClick:s,children:Object(W.jsx)(k.a,{className:a.iconColor})}),Object(W.jsx)(c,{children:Object(W.jsx)("div",{style:{overflowY:"auto",height:"calc(100% - 56px)",marginTop:"56px"},children:Object(W.jsx)(E,{onSidenavClose:r,member:t})})})]})};t.default=function(e){var t=Z(),a=e.match.params.memberId;return Object(W.jsxs)(j.a,{className:t.root,children:[Object(W.jsx)(j.a,{height:"70px",boxShadow:"0 .125rem .25rem rgba(0,0,0,.075)",p:2,display:"flex",flexDirection:"row",className:"bg-white",alignItems:"center",justifyContent:"space-between",children:Object(W.jsx)($,{memberId:a})}),Object(W.jsx)(j.a,{flexGrow:1,p:2,display:"flex",flexDirection:"Column",overflow:"auto",className:"content-scroll",children:Object(W.jsx)(te,{memberId:a})}),Object(W.jsx)(j.a,{style:{padding:"0.5rem 1rem"},position:"sticky",bottom:0,children:Object(W.jsx)(ee,{memberId:a})})]})}}}]);
//# sourceMappingURL=16.02511eff.chunk.js.map