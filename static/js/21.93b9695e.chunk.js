(this["webpackJsonpmy-team-board"]=this["webpackJsonpmy-team-board"]||[]).push([[21],{606:function(e,t,a){"use strict";a.r(t);var n=a(138),r=a(3),c=a(59),i=a(0),s=a.n(i),l=a(25),o=a(15),d=a(116),j=a(120),u=a(506),b=a(599),p=a(596),h=a(10),m=a(53),x=a(139),O=a.n(x),f=a(140),g=a(31),v=a(614),C=a(145),y=a(141),w=a(142),A=a(7),B=a(146),k=a(182),N=a(483),U=a(149),R=a(147),D=(a(485),a(2)),M=R.a().shape({name:R.c().required("Name is required"),phone:R.c().required("Phone is required"),title:R.c().required("Title is required")}),S=Object(d.a)((function(e){return{card:{borderRadius:10,boxShadow:"rgb(0 0 0 / 20%) 0px 3px 1px -2px, rgb(0 0 0 / 14%) 0px 2px 2px 0px, rgb(0 0 0 / 12%) 0px 1px 5px 0px",backgroundColor:"#fff"},largeAvatar:{width:e.spacing(11),height:e.spacing(11),marginBottom:e.spacing(2),cursor:"pointer",position:"relative","&:hover":{"&:before":{content:"url(".concat("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAVwAAACOAQMAAABHWSL/AAAABlBMVEXu7u7///8o06qaAAABg0lEQVRYw+3YMW6DMBQGYCMGRk+dOQqn6Cm69Aa4U++SSwQpQ8aMHUvVrUu9QVTLr7Zp1TQi8L9QqpSaAemXvlgGnl8MgqxIqRWSalGQEjHGeGlRJGRERlrkVImShuJtxP8b33AwMXAyiI8LmGiDV/uFYLtaeFc5PAwH22GcfMM0jNMJWE3BR/V8eOix4j8b138Qwxe4/niECNbuGTBwvmzcUC/uq+fWLcVagMXfpn5llyCWfgYFiP2EVYEt2NZfaI2OHO4eiPe0c78A8RtJejXgnMlIerbgyP7ePRGKaxfLNRNDc1Yu5mhjZGEfJdZFqzJE/7zHi7/qVorOEaw4+K7D7XxYIjjh4JSFmxANZ2TDGXmOaZwxZ/A+nxy5v4u6mKBddF6cgtse84nVT2PrY8bFYkrf+OX2VXG6qOb0Z83p/Kf+U3rq2XRxA20hbBY2VFsUt65AMUxZOO8wfB/Ojxjefm36x3ED4qtr9972EODLirBXaaL4rWAUx09wMcbvogvF7/Qjr/pc9IvHAAAAAElFTkSuQmCC",")"),width:"20px",height:"20px",zindex:9999999999,position:"absolute",color:"#fff !important",display:"flex",alignItems:"center",justifyContent:"center"},"&:after":{content:"''",position:"absolute",top:0,bottom:0,left:0,right:0,backgroundColor:"rgba(0,0,0,0.5)"}}},croppedImageContainer:{overflow:"hidden",width:e.spacing(10),height:e.spacing(10),borderRadius:"40px",position:"absolute",top:e.spacing(1),right:e.spacing(1)},croppedImage:{objectFit:"cover"},iconColor:{color:"#64748B"}}})),F=function(e){var t=e.classes,a=e.currentUser,n=e.updateCurrentUser,r=Object(B.a)(),c=r.loading,i=r.onMutate,s={name:a.name||"",country:a.country||"",city:a.city||"",title:a.title||"",phone:a.phone||"",address:a.address||""},d=function(){var e=Object(f.a)(O.a.mark((function e(t){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,i({url:"/members",method:"PUT",data:t});case 3:e.sent.success&&n(t),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}();return Object(D.jsx)(C.b,{initialValues:s,validationSchema:M,onSubmit:function(e){return d(e)},children:function(e){var a=e.handleSubmit,n=e.handleChange,r=e.handleBlur,i=e.values,s=e.errors,d=e.touched;return Object(D.jsxs)(C.a,{onSubmit:a,autoComplete:"off",children:[Object(D.jsxs)(l.a,{className:Object(A.a)(t.card),mb:2,overflow:"hidden",children:[Object(D.jsxs)(l.a,{p:2,display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between",borderBottom:"1px solid lightgray",component:"div",children:[Object(D.jsx)(o.a,{variant:"subtitle1",children:"General Information"}),Object(D.jsx)(m.a,{disabled:c,className:t.iconColor,type:"submit",disableElevation:!0,variant:"outlined",color:"default",size:"small",children:Object(D.jsx)("span",{children:c?"Loading...":"Save"})})]}),Object(D.jsxs)(l.a,{p:2,component:"div",children:[Object(D.jsxs)("div",{className:"form-group",children:[Object(D.jsx)("label",{children:"Full name"}),Object(D.jsx)(w.a,{fullWidth:!0,name:"name",variant:"outlined",size:"small",placeholder:"full name",onChange:n,onBlur:r,value:i.name,error:d.name&&!!s.name,helperText:d.name&&s.name})]}),Object(D.jsxs)("div",{className:"form-group",children:[Object(D.jsx)("label",{children:"Title"}),Object(D.jsx)(w.a,{fullWidth:!0,name:"title",variant:"outlined",size:"small",placeholder:"title",onChange:n,onBlur:r,value:i.title,error:d.title&&!!s.title,helperText:d.title&&s.title})]}),Object(D.jsxs)("div",{className:"form-group",children:[Object(D.jsx)("label",{children:"Phone"}),Object(D.jsx)(w.a,{fullWidth:!0,name:"phone",variant:"outlined",size:"small",placeholder:"phone",onChange:n,onBlur:r,value:i.phone,error:d.phone&&!!s.phone,helperText:d.phone&&s.phone})]})]})]}),Object(D.jsxs)(l.a,{className:t.card,overflow:"hidden",children:[Object(D.jsx)(l.a,{p:2,borderBottom:"1px solid lightgray",component:"div",children:Object(D.jsx)(o.a,{variant:"subtitle1",children:"Contact"})}),Object(D.jsxs)(l.a,{p:2,component:"div",children:[Object(D.jsxs)("div",{className:"form-group",children:[Object(D.jsx)("label",{children:"Address"}),Object(D.jsx)(w.a,{multiline:!0,rows:3,fullWidth:!0,name:"address",variant:"outlined",size:"small",placeholder:"member's address",onChange:n,onBlur:r})]}),Object(D.jsxs)("div",{className:"form-group",children:[Object(D.jsx)("label",{children:"Country"}),Object(D.jsx)(w.a,{fullWidth:!0,name:"country",variant:"outlined",size:"small",placeholder:"country",onChange:n,onBlur:r})]}),Object(D.jsxs)("div",{className:"form-group",children:[Object(D.jsx)("label",{children:"City"}),Object(D.jsx)(w.a,{fullWidth:!0,name:"city",variant:"outlined",size:"small",placeholder:"city",onChange:n,onBlur:r})]})]})]})]})}})},I=function(e){var t=e.classes,a=e.currentUser,r=e.updateCurrentUser,c=s.a.useRef(null),i=s.a.useState(),l=Object(n.a)(i,2),o=l[0],d=l[1],j=Object(k.a)(),u=j.onDialogOpen,b=j.onDialogClose,p=j.DialogComponent,h=function(e){return new Promise((function(t,a){if(e){var n=new FileReader;n.readAsDataURL(e),n.onload=function(){return t(n.result)},n.onerror=function(e){return a(e)}}}))};function m(){return(m=Object(f.a)(O.a.mark((function e(t){var a;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!t){e.next=7;break}return e.next=4,h(t.target.files[0]);case 4:a=e.sent,d(a),u();case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.error(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})))).apply(this,arguments)}return Object(D.jsxs)(s.a.Fragment,{children:[Object(D.jsx)(v.a,{alt:"user profile",src:a.avatar?"".concat("https://my-team-board.herokuapp.com/api","/files/").concat(a.avatar):U.a,className:t.largeAvatar,onClick:function(){try{var e=c.current;e&&e.click()}catch(t){console.error(t)}}}),Object(D.jsx)("input",{ref:c,type:"file",hidden:!0,accept:"image/*",onChange:function(e){return m.apply(this,arguments)}}),Object(D.jsx)(p,{children:Object(D.jsx)(E,{currentUser:a,src:o,updateCurrentUser:r,onDialogClose:b,classes:t})})]})},E=function(e){var t=e.currentUser,a=e.classes,c=e.src,i=e.onDialogClose,d=e.updateCurrentUser,j=Object(B.a)(),u=j.loading,b=j.onMutate,p=s.a.useState(),h=Object(n.a)(p,2),x=h[0],g=h[1],v=s.a.useRef(null),C=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"image/jpeg";return fetch(e).then((function(e){return e.arrayBuffer()})).then((function(e){return new File([e],t,{type:a})}))},y=function(){var e=Object(f.a)(O.a.mark((function e(){var a,n,c;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C(x,Date.now()+".jpg");case 2:return a=e.sent,(n=new FormData).append("picture",a),e.prev=5,e.next=8,b({url:"/files/avatar",method:"POST",data:n});case 8:(c=e.sent).success&&(i(),setTimeout((function(){d(Object(r.a)(Object(r.a)({},t),{},{avatar:c.data.avatar}))}),0)),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(5),console.error(e.t0);case 15:case"end":return e.stop()}}),e,null,[[5,12]])})));return function(){return e.apply(this,arguments)}}();return Object(D.jsxs)(D.Fragment,{children:[Object(D.jsxs)(l.a,{p:2,borderBottom:"1px solid lightgray",component:"div",display:"flex",alignItems:"center",justifyContent:"space-between",children:[Object(D.jsx)(o.a,{variant:"subtitle1",className:"fw-700",children:"Image Cropper"}),Object(D.jsxs)("div",{children:[Object(D.jsx)(m.a,{onClick:i,style:{marginRight:"0.5rem",color:"gray"},disableElevation:!0,variant:"outlined",color:"default",size:"small",children:Object(D.jsx)("span",{children:"Cancel"})}),Object(D.jsx)(m.a,{onClick:y,disableElevation:!0,variant:"contained",color:"primary",size:"small",children:Object(D.jsx)("span",{children:u?"Loading...":"Save"})})]})]}),Object(D.jsxs)(l.a,{component:"div",position:"relative",overflow:"hidden",children:[Object(D.jsx)(N.a,{style:{height:"100vh",width:"100%"},zoomTo:.5,initialAspectRatio:16/9,src:c,viewMode:1,minCropBoxHeight:10,minCropBoxWidth:10,background:!0,responsive:!0,crop:function(){var e=null===v||void 0===v?void 0:v.current,t=null===e||void 0===e?void 0:e.cropper;g(t.getCroppedCanvas().toDataURL())},checkOrientation:!1,ref:v,guides:!1}),Object(D.jsx)(l.a,{className:a.croppedImageContainer,children:Object(D.jsx)("img",{src:x||U.a,className:a.croppedImage,alt:"cropped avatar",width:"100%",height:"100%"})})]})]})},q=function(){var e=S(),t=Object(y.b)(),a=t.currentUser,n=t.updateCurrentUser;return Object(D.jsxs)(g.a,{container:!0,spacing:2,children:[Object(D.jsx)(g.a,{item:!0,xs:12,sm:4,children:Object(D.jsxs)(l.a,{component:"div",p:2,className:Object(A.a)(e.card),display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",children:[Object(D.jsx)(I,{classes:e,currentUser:a,updateCurrentUser:n}),Object(D.jsx)(o.a,{variant:"h6",className:"text-center",children:a.name}),Object(D.jsx)(o.a,{variant:"body2",className:e.iconColor,gutterBottom:!0,children:a.email})]})}),Object(D.jsx)(g.a,{item:!0,xs:!0,children:Object(D.jsx)(F,{classes:e,currentUser:a,updateCurrentUser:n})})]})},z=a(590),G=a(117),V=a(591),T=a(592),W=a(593),L=a(594),Q=a(595),P=a(543),X=a(54),Y=a(223),J=function(){var e=Object(X.d)((function(e){return e.workspaces})),t=Object(y.b)().currentUser;return Object(D.jsx)(z.a,{component:G.a,style:{borderRadius:"10px"},children:Object(D.jsxs)(V.a,{style:{width:"100%"},"aria-label":"simple table",children:[Object(D.jsx)(T.a,{children:Object(D.jsxs)(W.a,{children:[Object(D.jsx)(L.a,{children:"Workspace"}),Object(D.jsx)(L.a,{children:"Role"}),Object(D.jsx)(j.a,{xsDown:!0,children:Object(D.jsx)(L.a,{children:"Members"})})]})}),Object(D.jsx)(Q.a,{children:e.map((function(e){return Object(D.jsxs)(W.a,{children:[Object(D.jsx)(L.a,{component:"th",scope:"row",className:"text-capitalize",children:e.name}),Object(D.jsx)(L.a,{children:e.owner._id===t._id?"Owner":"Member"}),Object(D.jsx)(j.a,{xsDown:!0,children:Object(D.jsx)(L.a,{children:Object(D.jsx)(Y.a,{max:3,children:e.members.map((function(e){return Object(D.jsx)(P.a,{title:e.name,children:Object(D.jsx)(v.a,{alt:"user avatar",src:e.avatar?"".concat("https://my-team-board.herokuapp.com/api","/files/").concat(e.avatar):U.a})},e._id)}))})})})]},e.name)}))})]})})},Z=a(486),H=a.n(Z),K=["children","value","index"];function _(e){var t=e.children,a=e.value,n=e.index,i=Object(c.a)(e,K);return Object(D.jsx)("div",Object(r.a)(Object(r.a)({role:"tabpanel",hidden:a!==n,id:"simple-tabpanel-".concat(n),"aria-labelledby":"simple-tab-".concat(n)},i),{},{children:a===n&&Object(D.jsx)(l.a,{p:3,children:Object(D.jsx)(o.a,{children:t})})}))}function $(e){return{id:"simple-tab-".concat(e),"aria-controls":"simple-tabpanel-".concat(e)}}var ee=Object(d.a)((function(e){return{iconColor:{color:"#64748B"},mr:{marginRight:e.spacing(1)}}})),te=function(){var e=s.a.useState(0),t=Object(n.a)(e,2),a=t[0],c=t[1],i=Object(X.d)((function(e){return e.workspaces})),o=Object(D.jsxs)("label",{children:[Object(D.jsx)("span",{style:{marginRight:"0.5rem"},children:"My workspaces"}),Object(D.jsx)(j.a,{xsDown:!0,children:Object(D.jsx)(u.a,{size:"small",label:i.length,color:"primary"})})]});return Object(D.jsxs)(D.Fragment,{children:[Object(D.jsx)(l.a,{className:"bg-white",borderBottom:"1px solid lightgray",children:Object(D.jsxs)(b.a,{value:a,onChange:function(e,t){c(t)},"aria-label":"simple tabs example",indicatorColor:"primary",textColor:"primary",children:[Object(D.jsx)(p.a,Object(r.a)({label:"Basic information"},$(0))),Object(D.jsx)(p.a,Object(r.a)({label:o},$(1)))]})}),Object(D.jsxs)(H.a,{axis:"x",index:a,onChangeIndex:function(e){c(e)},children:[Object(D.jsx)(_,{value:a,index:0,children:Object(D.jsx)(q,{})}),Object(D.jsx)(_,{value:a,index:1,children:Object(D.jsx)(J,{})})]})]})};t.default=function(){var e=ee(),t=Object(h.g)();return Object(D.jsxs)(s.a.Fragment,{children:[Object(D.jsx)(l.a,{p:2,className:"bg-white",display:"flex",alignItems:"center",justifyContent:"flex-end",children:Object(D.jsx)(m.a,{variant:"outlined",className:Object(A.a)(e.iconColor,e.mr),size:"medium",onClick:function(){t.goBack()},children:Object(D.jsx)("span",{children:"Go back"})})}),Object(D.jsx)(te,{})]})}}}]);
//# sourceMappingURL=21.93b9695e.chunk.js.map