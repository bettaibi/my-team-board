{"version":3,"sources":["context/index.tsx","components/MyTextField/index.tsx","hooks/useToggle/index.tsx","hooks/useMutation/index.tsx","assets/avatars/profile.jpg","store/actions/board.actions.ts","context/SocketContext.tsx","hooks/useDialog/index.tsx","hooks/useSnackbar/index.tsx","util/helpers.ts","store/actions/project.actions.ts","store/actions/workspace.actions.ts","context/NotificationContext.tsx","pages/Team/Setting/SessionExpired.tsx","hooks/usePopover/index.tsx","store/actions/members.actions.ts","store/actions/chat.actions.ts","components/WithTooltip/index.tsx","pages/Team/Chat/VideoCallContext/Dial.tsx","pages/Team/Chat/VideoCallContext/AnswerCall.tsx","assets/chat/poster.jpg","pages/Team/Chat/VideoCallContext/VideoChat.tsx","pages/Team/Chat/VideoCallContext/VideoCallContainer.tsx","pages/Team/Chat/VideoCallContext/index.tsx","hooks/useSwipeableSidenav/index.tsx","components/Navigation/NewWorkspace/index.tsx","components/Navigation/Workspaces/index.tsx","components/Navigation/index.tsx","components/Header/index.tsx","pages/Team/index.tsx"],"names":["defaultUserState","name","email","title","avatar","country","city","address","_id","phone","Shared","React","createContext","ContextProvider","children","useState","localStorage","getItem","selectedWorkspace","setSelectedWorkspace","appLoading","setAppLoading","owner","setOwner","currentUser","setCurrentUser","dispatch","useDispatch","useEffect","a","axios","get","data","success","setItem","setProjects","projects","setWorkspaceMembers","members","initChat","console","error","onSwitch","getConnectedUser","setWorkspaces","length","getWorkspaces","value","updateCurrentUser","u","state","Provider","Fragment","useSharedContext","useContext","CssTextField","withStyles","theme","root","zIndex","drawer","backgroundColor","palette","common","white","border","fontSize","width","boxShadow","zindex","borderRadius","color","transition","transitions","create","alpha","primary","main","borderColor","borderWidth","TextField","MyTextField","props","useToggle","show","setShow","toggle","handleOpen","handleClose","useMutation","loading","setLoading","showMsg","useNotificationContext","options","message","onMutate","newBoard","payload","type","ActionType","NEW_BOARD","editBoard","id","EDIT_BOARD","deleteBoard","DELETE_BOARD","newAspect","NEW_ASPECT","editAspect","EDIT_ASPECT","deleteAspect","DELETE_ASPECT","newSprint","NEW_SPRINT","editSprint","EDIT_SPRINT","deleteSprint","DELETE_SPRINT","socket","io","process","SocketContext","SocketEvents","ONLINE_USERS","NEW_MESSAGE","CALL","ANSWER","CALL_ACCEPTED","CALL_END","EMIT_SIGNAL","DATA_STREAM","SocketProvider","onlineUsers","setOnlineUsers","useDialogComponent","DialogComponent","onDialogOpen","onDialogClose","msgRingTone","useMemo","Audio","load","pause","currentTime","on","users","PostNewMessage","sender","play","off","emit","workspaceId","userId","workspaces","deleteWorkspace","project","workspace","newProject","updateProject","aspect","aspectId","projectId","fetchBoard","then","catch","err","sendMessage","receiverId","useSocketContext","useCallback","onClose","aria-labelledby","open","SlideTransition","forwardRef","ref","direction","FadeTransition","useDialog","fullSize","useTheme","isXs","useMediaQuery","breakpoints","down","fullScreen","TransitionComponent","useSnackbar","toast","setToast","vertical","horizontal","SnackbarComponent","autoHideDuration","anchorOrigin","Slide","severity","isMemberConnected","memberId","hasOwnProperty","lastSeen","getSocketId","socketId","undefined","SET_PROJECTS","NEW_PROJECT","UPDATE_PROJECT","deleteProject","DELETE_PROJECT","SET_WORKSPACES","newWorkspace","NEW_WORKSPACE","updateWorkspace","UPDATE_WORKSPACE","DELETE_WORKSPACE","NotificationContext","NotificationProvider","SessionExpired","logout","url","method","document","cookie","clear","sessionStorage","setTimeout","window","location","reload","p","maxWidth","variant","gutterBottom","fullWidth","onClick","style","marginTop","UsePopover","anchorEl","setAnchorEl","Boolean","handleClick","event","currentTarget","PopoverComponent","newId","transformOrigin","SET_MEMBERS","newMember","NEW_MEMBER","deleteMember","DELETE_MEMBER","setChat","key","SET_CHAT","POST_MESSAGE","INIT_CHAT","HtmlTooltip","tooltip","typography","pxToRem","Tooltip","WithTooltip","text","baseURL","useStyle","makeStyles","lgAvatar","spacing","height","mb","marginBottom","mr","marginRight","rippleAnimation","position","paper","padding","display","flexDirection","alignItems","justifyContent","textAlign","header","top","right","callRingtone","Dial","onCallAccepted","callState","SetCallState","useVideoCallContext","onCallEnd","isVideo","classes","ob","userToCall","JSON","parse","receiveCallEnd","to","from","loop","once","init","Box","Paper","elevation","className","clsx","Avatar","src","userAvatar","alt","Typography","component","IconButton","CallEnd","Howl","preload","AnswerCall","UserToAnswer","caller","audioRef","useRef","timer","current","click","stop","clearTimeout","hidden","Call","videoPartner","mt","myVideoContainer","bottom","overflow","myVideo","objectFit","speedDial","counter","VideoChat","memo","stream","myPeer","partnerRefStream","myVideoRefStream","myPartner","gotMedia","st","srcObject","URL","createObjectURL","onloadedmetadata","e","initiator","Peer","trickle","dataSignal","onCallEnded","navigator","mediaDevices","getDisplayMedia","cursor","screenStream","replaceTrack","getVideoTracks","getTracks","onended","signal","getUserMedia","video","audio","forEach","track","destroy","autoPlay","playsInline","muted","poster","posterImg","onVideoOff","enabled","onSwitchMic","getAudioTracks","onShareScreen","MenuActionButtons","icon","index","isOn","MicNoneOutlined","iconOff","MicOffOutlined","VideocamOutlined","VideocamOffOutlined","ScreenShareOutlined","StopScreenShareOutlined","actions","setActions","switchIcon","map","item","SpeedDial","ariaLabel","SpeedDialIcon","onOpen","action","SpeedDialAction","tooltipTitle","actionHandler","TimeCounter","seconds","minutes","hours","time","setTime","interval","setInterval","clearInterval","BoxContainer","footer","transform","left","VideoCallContainer","currentComponent","activeComponent","setActiveComponent","Container","VideoCallContext","VideoCallProvider","setCurrentComponent","setCaller","setIsVideo","onCallStart","c","isVideoChat","user","Dialog","useStyles","boxWidth","useSwipeableSidenav","anchor","matches","up","onSidenavClose","onSidenavOpen","onSidenavToggle","SwipeableSidenav","SwipeableDrawer","schema","yup","shape","required","defaultValue","namespaces","icons","NewWorkspace","values","res","initialValues","validationSchema","onSubmit","submitHandler","handleChange","handleSubmit","handleBlur","errors","touched","autoComplete","borderBottom","RoundedButton","disableElevation","placeholder","size","onChange","onBlur","helperText","NewWorkspaceDialog","Add","bgActive","Workspaces","list","useSelector","placement","charAt","toUpperCase","StyledBadge","createStyles","badge","background","animation","content","opacity","Badge","minHeight","overflowY","borderRight","textCenter","textWhite","textSecondary","largeAvatar","navItem","margin","easing","easeOut","duration","enteringScreen","activeItem","Navigation","Grid","container","xs","my","px","Pages","MemberList","history","useHistory","navigateTo","path","push","pathname","AssignmentOutlined","marginLeft","PeopleOutline","isOline","overlap","ml","CurrentUser","flexGrow","menuButton","menuItem","primaryHeader","inline","listItem","SideBarComponent","getElementById","edge","aria-label","Menu","NotificationMenu","aria-describedby","NotificationsOutlined","AccountMenu","post","AccountCircleOutlined","py","mx","Divider","MenuItem","SettingsApplicationsOutlined","ExitToAppOutlined","Notifications","fontWeight","minWidth","maxHeight","NotificationsNoneOutlined","Header","SearchOutlined","Board","lazy","Scrumboard","Members","Chat","Profile","Setting","LoadingPage","CircularProgress","disableShrink","Team","fallback","exact"],"mappings":"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","file":"static/js/11.4cd964a2.chunk.js","sourcesContent":["import React, { Dispatch, useContext, useEffect } from 'react';\r\nimport { useDispatch } from 'react-redux';\r\nimport { setProjects } from '../store/actions/project.actions';\r\nimport { setWorkspaceMembers } from '../store/actions/members.actions';\r\nimport { setWorkspaces } from '../store/actions/workspace.actions';\r\nimport { UserModel } from '../models/app.model';\r\nimport { initChat } from '../store/actions/chat.actions';\r\nimport axios from 'axios';\r\nimport AppSkeleton from '../components/AppSkeleton';\r\n\r\ninterface ContextProps{\r\n    dispatch: Dispatch<any>;\r\n    selectedWorkspace: string | null;\r\n    setSelectedWorkspace: (w: string) => void;\r\n    currentUser: UserModel;\r\n    updateCurrentUser: (u: UserModel) => void;\r\n    owner: string;\r\n}\r\n\r\nconst defaultUserState: UserModel = {\r\n    name: '',\r\n    email: '',\r\n    title: '',\r\n    avatar: '',\r\n    country: '',\r\n    city: '',\r\n    address: '',\r\n    _id: '',\r\n    phone: ''\r\n};\r\n\r\nconst Shared = React.createContext({} as ContextProps);\r\n\r\nexport const ContextProvider = ({children}: {children: JSX.Element}) => {\r\n    const [selectedWorkspace, setSelectedWorkspace] = React.useState<string | null>(localStorage.getItem('workspace'))\r\n    const [ appLoading, setAppLoading ] = React.useState<boolean>(true);\r\n    const [ owner, setOwner ] = React.useState<string>('');\r\n    const [ currentUser, setCurrentUser ] = React.useState<UserModel>(defaultUserState);\r\n\r\n    const dispatch = useDispatch();\r\n\r\n    useEffect(() => {\r\n        async function onSwitch (){\r\n            try{\r\n                if(selectedWorkspace){\r\n                    setAppLoading(true);\r\n                    const {data} = await axios.get(`/workspace/switch/${selectedWorkspace}`);\r\n                    if(data.success){\r\n                        localStorage.setItem('workspace', selectedWorkspace);\r\n                        dispatch(setProjects(data.data.projects));\r\n                        dispatch(setWorkspaceMembers(data.data.members));\r\n                        dispatch(initChat());\r\n                        setOwner(data.data.owner);\r\n                        setAppLoading(false);\r\n                    }\r\n                }\r\n                \r\n            }\r\n            catch(err){\r\n                console.error(err);\r\n            }\r\n        }\r\n        \r\n        onSwitch()\r\n    }, [selectedWorkspace]);\r\n\r\n    useEffect(() => {\r\n        async function getConnectedUser(){\r\n            try{\r\n                const {data} = await axios.get('/auth/user');\r\n                if(data.success){\r\n                    setCurrentUser(data.data)\r\n                }\r\n            }\r\n            catch(err){\r\n                console.error(err)\r\n            }\r\n        }\r\n\r\n        getConnectedUser()\r\n    }, [])\r\n\r\n    useEffect(() => {\r\n        const getWorkspaces = async () => {\r\n            try {\r\n                const { data } = await axios.get('/workspace');\r\n                if (data.success) {\r\n                    dispatch(setWorkspaces(data.data))\r\n\r\n                    if(selectedWorkspace === null && data.data.length > 0) {\r\n                        setSelectedWorkspace(data.data[0]._id);\r\n                        setOwner(data.data[0].owner._id);\r\n                    }\r\n                    setAppLoading(false);\r\n                }\r\n            }\r\n            catch (err) {\r\n                console.error(err);\r\n            }\r\n        };\r\n\r\n        getWorkspaces()\r\n    }, []);\r\n\r\n\r\n    function updateCurrentUser(u: UserModel){\r\n        setCurrentUser(state => {return {...state, ...u}});\r\n    }\r\n\r\n    const value = {\r\n        dispatch,\r\n        selectedWorkspace,\r\n        setSelectedWorkspace,\r\n        currentUser,\r\n        updateCurrentUser,\r\n        owner\r\n    };\r\n\r\n    return(\r\n        <Shared.Provider value = {value}>\r\n           <React.Fragment>\r\n                {appLoading ? <AppSkeleton /> : children}\r\n           </React.Fragment>\r\n        </Shared.Provider>\r\n    )\r\n}\r\n\r\nexport const useSharedContext = () => {\r\n    const values = useContext(Shared);\r\n    return values;\r\n};","import React from 'react';\r\nimport TextField, { TextFieldProps } from '@material-ui/core/TextField';\r\nimport { withStyles, Theme } from '@material-ui/core/styles';\r\nimport { alpha } from '@material-ui/core/styles';\r\n\r\nconst CssTextField = withStyles((theme: Theme) =>({\r\n    root: {\r\n      '& .MuiOutlinedInput-input' : {\r\n        zIndex: theme.zIndex.drawer\r\n      },\r\n      '& .MuiOutlinedInput-root': {\r\n        '& .MuiOutlinedInput-inputAdornedStart': {\r\n          zIndex: theme.zIndex.drawer,\r\n        },\r\n        '& .MuiInputAdornment-positionStart': {\r\n          zIndex: theme.zIndex.drawer,\r\n        },\r\n        '& fieldset': {\r\n        backgroundColor: theme.palette.common.white,\r\n        border: '1px solid #ced4da',\r\n        fontSize: 16,\r\n        width: 'auto',\r\n        boxShadow: '0 1px 2px 0 #0000000d',\r\n        zindex: 75,\r\n        borderRadius: 4,\r\n        color: '#333',\r\n        transition: theme.transitions.create(['border-color', 'box-shadow']),\r\n        },\r\n        '&.Mui-focused fieldset': {\r\n            boxShadow: `${alpha(theme.palette.primary.main, 0.25)} 0 0 0 0.2rem`,\r\n            borderColor: theme.palette.primary.main,\r\n            borderWidth: '1px'\r\n        },\r\n      },\r\n    },\r\n  }))(TextField);\r\n\r\n  \r\nconst MyTextField: React.FC<TextFieldProps> = (props) => {\r\n\r\n    return (\r\n        <CssTextField {...props} />\r\n    )\r\n}\r\n\r\nexport default MyTextField;\r\n","import { useState } from 'react';\r\n\r\nconst useToggle = (state?: boolean) => {\r\n    const [show, setShow] = useState<boolean>(state || false);\r\n\r\n    const toggle = () => {\r\n        setShow(state => !state);\r\n    };\r\n\r\n    const handleClose = () => {\r\n        setShow(false)\r\n    };\r\n\r\n    const handleOpen = () => {\r\n        setShow(true);\r\n    };\r\n\r\n    return {\r\n        toggle,\r\n        handleOpen,\r\n        handleClose,\r\n        show\r\n    };\r\n};\r\n\r\nexport default useToggle;","import React from 'react';\r\nimport { useNotificationContext } from '../../context/NotificationContext';\r\nimport axios, { AxiosRequestConfig } from 'axios';\r\n\r\ninterface toJsonResponse{\r\n    success: boolean;\r\n    message: string;\r\n    data?: any;\r\n}\r\n\r\nconst useMutation = () => {\r\n    const [loading, setLoading] = React.useState<boolean>(false);\r\n    const { showMsg } = useNotificationContext();\r\n\r\n    async function onMutate(options: AxiosRequestConfig): Promise<toJsonResponse> {\r\n        try{\r\n            setLoading(true);\r\n            const { data } = await axios({...options});\r\n            if(data.success){\r\n                showMsg(data.message, 'success');\r\n                setLoading(false);\r\n            }\r\n            else{\r\n                showMsg(data.message, 'error');\r\n                setLoading(false);\r\n            }\r\n            return data;\r\n        }\r\n        catch(err){\r\n            setLoading(false);\r\n            throw err;\r\n        }\r\n    }\r\n    \r\n    return {\r\n        loading,\r\n        onMutate\r\n    }\r\n}\r\n\r\nexport default useMutation;","export default \"data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wCEAAMDAwMDAwQEBAQFBQUFBQcHBgYHBwsICQgJCAsRCwwLCwwLEQ8SDw4PEg8bFRMTFRsfGhkaHyYiIiYwLTA+PlQBAwMDAwMDBAQEBAUFBQUFBwcGBgcHCwgJCAkICxELDAsLDAsRDxIPDg8SDxsVExMVGx8aGRofJiIiJjAtMD4+VP/CABEIAGAAYAMBIgACEQEDEQH/xAAbAAEBAQADAQEAAAAAAAAAAAAACAcEBQYJA//aAAgBAQAAAAD6QAADwOO8XevYAYbJIuDSARTloq7egSXhYp6igRLmI1a0gTDOopSlAfj87eveqv4BFOWtcswHV4jLIpzdO4eHwfE+GDlbRvkIgA//xAAXAQEBAQEAAAAAAAAAAAAAAAAAAwIB/9oACAECEAAAAKtMm6o5bqlh26HHboctoZ//xAAXAQADAQAAAAAAAAAAAAAAAAAAAQMC/9oACAEDEAAAAMCGGYl2ZiW0KDsxRLOWAN//xAA2EAABAwIDBQQIBgMAAAAAAAABAgMEBREGByEAEiAxURATQYEIFCIjMGFxkSQmMkBCgmJyof/aAAgBAQABPwD9hiTMvCWGVrakzO/kp0MaOnvFg9DyCdqj6QNQUtQptHYQnwVIWpwnyTu22gekBXEOj16lQnW/EMlbSvuor2wljihYyiKdgu7rqdHYztg4g/S+o+Y+BnJjuTh+KzR6c6pqXMbK3XUmym2b29noVEc9iSo3PPtBKSCDYjkRtlXiGRiPB8Z6SvvJEVa4zqzqVluxST87KF+POZxxeYFRC+TbUdKPp3aTw5AH8t1QdKhf7tp48+aYiPiWFOQpP4uFZQ8d5o2v9lcPo+SUKgVuNdO8l9le742UCL/8484XZa8f1Jt51SktJZSyDyQgtpVYeZ4cl5MhjHsNtsqCH2JCHR1SEFYv5p487MGVV+rorsGI4/HVEAlFA3y2Wr+0oD+NuAAqNhz2yYwJWabVnK1VIbkVAjFEdDuiypwi6t3mLAcciO1KjvMOp3m3UKQtPVKxY7VenuUmqToDmq4kl1lR6ltRTftwJDM/GNCZ3N4GoMqUn/FtQUr4Ob1Tw/UsVvKpbLiXmVFma5oEPONm28mx8ie3KLEeHMPVtZqTDpky1NMR5ACShgKNlFVyLX6jjqtbpFDj+s1KYxFa8FOrAv8AIDmT9NsV550hMCTGoLT7slbZS3JWju0IvpvAE3JHhe2xJUVEquTqSeDB+eFMap0SHXmpIfZbCDKQkOJWBoFKF7362vtR6/RsQR+/pk1iU347itR/snmnz7cQ5iYSwyVtzJ6VSE847PvXL9CBon+xG2JM9azO32aLGRBaOgeXZx4/Qck7T6jUKpIVJnSXZDyubjqys/c8cKfNp0hEmJJdjPJ/S40soUPMbYbzzr9O3GawwiosjTvRZt0Dy0VthzMbCWKChqJOS1IVyjP+7cv0F9Ff1J2JKjc6k8z8MEpNxoRyO3//xAAdEQEAAwACAwEAAAAAAAAAAAABAAIQICESMTJB/9oACAECAQE/AMK2fyNbB64UBdt1Z2n1t/rRTGKugsOiMRMKV4+BP//EABsRAQACAwEBAAAAAAAAAAAAAAEAEAISISAx/9oACAEDAQE/AK2IZD4zULx+Xn8vB5aDR1gBexHrDjDIa3fO7P/Z\"","import { AspectModel, DynamicBoard, ProjectModel, SprintModel } from '../../models/app.model';\r\nimport ActionType from './types';\r\n\r\nexport const getBoards = () => {\r\n\r\n    return {\r\n        type: ActionType.GET_BOARD,\r\n    };\r\n};\r\n\r\nexport const newBoard = (payload: DynamicBoard) => {\r\n\r\n    return {\r\n        payload,\r\n        type: ActionType.NEW_BOARD,\r\n    };\r\n};\r\n\r\nexport const editBoard = (id: string, payload: ProjectModel) => {\r\n\r\n    return {\r\n        id,\r\n        payload,\r\n        type: ActionType.EDIT_BOARD\r\n    };\r\n};\r\n\r\nexport const deleteBoard = (id: string) => {\r\n\r\n    return {\r\n        id,\r\n        type: ActionType.DELETE_BOARD\r\n    };\r\n};\r\n\r\nexport const newAspect = (id: string, payload: AspectModel) => {\r\n    return {\r\n        id,\r\n        payload,\r\n        type: ActionType.NEW_ASPECT\r\n    };\r\n};\r\nexport const editAspect = (id: string, payload: AspectModel) => {\r\n    return {\r\n        id,\r\n        payload,\r\n        type: ActionType.EDIT_ASPECT\r\n    };\r\n};\r\nexport const deleteAspect = (id: string, payload: string) => {\r\n    return {\r\n        id,\r\n        payload,\r\n        type: ActionType.DELETE_ASPECT\r\n    };\r\n};\r\n\r\nexport const newSprint = (id: string, payload: SprintModel) => {\r\n\r\n    return {\r\n        id,\r\n        payload,\r\n        type: ActionType.NEW_SPRINT\r\n    };\r\n};\r\n\r\nexport const editSprint = (id: string, payload: SprintModel) => {\r\n\r\n    return {\r\n        id,\r\n        payload,\r\n        type: ActionType.EDIT_SPRINT\r\n    };\r\n};\r\n\r\nexport const deleteSprint = (id: string, payload: SprintModel) => {\r\n\r\n    return {\r\n        id,\r\n        payload,\r\n        type: ActionType.DELETE_SPRINT\r\n    };\r\n};","import React, { useCallback, useContext, useEffect } from 'react';\r\nimport { useSharedContext } from '.';\r\n\r\nimport io, { Socket } from 'socket.io-client';\r\nimport { DefaultEventsMap } from 'socket.io-client/build/typed-events';\r\nimport { MessageModel, ProjectModel, WorkspaceModel } from '../models/app.model';\r\nimport { PostNewMessage } from '../store/actions/chat.actions';\r\nimport { deleteWorkspace, setWorkspaces } from '../store/actions/workspace.actions';\r\nimport { Dialog } from '@material-ui/core';\r\n\r\nimport SessionExpired from '../pages/Team/Setting/SessionExpired';\r\nimport useToggle from '../hooks/useToggle';\r\nimport { newProject, updateProject } from '../store/actions/project.actions';\r\nimport { deleteAspect, editAspect, newAspect, newBoard } from '../store/actions/board.actions';\r\nimport { fetchBoard } from '../util/helpers';\r\n\r\ninterface OnlineUserProps{\r\n    [userId: string]: {socketId: string, lastSeen?: Date};\r\n}\r\ninterface ContextProps {\r\n    socket: Socket<DefaultEventsMap, DefaultEventsMap>;\r\n    onlineUsers: OnlineUserProps;\r\n    sendMessage: (workspaceId:string | null, receiverId: string, data: MessageModel) => void;\r\n}\r\n\r\nconst WS = process.env.REACT_APP_WS_URL || '/chat';\r\nconst socket = io(`${WS}/chat`);\r\nconst SocketContext = React.createContext({} as ContextProps);\r\n\r\nexport const SocketEvents = {\r\n    ONLINE_USERS: 'ONLINE_USERS',\r\n    NEW_MESSAGE: 'NEW_MESSAGE',\r\n    CALL: 'CALL',\r\n    ANSWER: 'ANSWER',\r\n    CALL_ACCEPTED: 'CALL_ACCEPTED',\r\n    CALL_END: 'CALL_END',\r\n    EMIT_SIGNAL: 'EMIT_SIGNAL',\r\n    DATA_STREAM: 'DATA_STREAM',\r\n};\r\n\r\nexport const SocketProvider = ({ children }: { children: JSX.Element }) => {\r\n    const { currentUser, selectedWorkspace, dispatch } = useSharedContext();\r\n    const [onlineUsers, setOnlineUsers] = React.useState<OnlineUserProps>({});\r\n    const { DialogComponent, onDialogOpen, onDialogClose } = useDialogComponent();\r\n\r\n    const msgRingTone = React.useMemo(()=> {\r\n        return new Audio('/audio/wsn.mp3');\r\n    }, []);\r\n\r\n    useEffect(() => {\r\n        msgRingTone.load();\r\n\r\n        return () => {\r\n            msgRingTone.pause();\r\n            msgRingTone.currentTime = 0;\r\n        }\r\n    },[]);\r\n\r\n    useEffect(()=> {\r\n        if(selectedWorkspace){\r\n            socket.on(SocketEvents.ONLINE_USERS, (users: OnlineUserProps) => {\r\n                setOnlineUsers(users);\r\n            });\r\n\r\n            socket.on(SocketEvents.NEW_MESSAGE, (data: MessageModel)=> {\r\n                dispatch(PostNewMessage(data, data.sender));\r\n                msgRingTone.play();\r\n            });\r\n\r\n        }\r\n\r\n        return () => {\r\n            if(selectedWorkspace){\r\n                socket.off(SocketEvents.ONLINE_USERS);\r\n                socket.off(SocketEvents.NEW_MESSAGE);\r\n            }\r\n        };\r\n    }, [selectedWorkspace]);\r\n\r\n    useEffect(() => {\r\n        if(selectedWorkspace){\r\n            socket.emit('joinWorkspace', {workspaceId: selectedWorkspace, userId: currentUser._id});\r\n        }\r\n\r\n        return () => {\r\n           if(selectedWorkspace){\r\n            socket.emit('leaveWorkspace', {workspaceId: selectedWorkspace, userId: currentUser._id});\r\n           }\r\n        }\r\n    }, [selectedWorkspace]);\r\n\r\n    // LISTEN TO REALTIME CHANGES\r\n    useEffect(() => {\r\n\r\n        socket.on('new_workspace', (data: WorkspaceModel[])=> {\r\n            dispatch(setWorkspaces(data));\r\n        });\r\n\r\n        socket.on('delete_workspace', ({workspaces, workspaceId}: {workspaces:  WorkspaceModel[], workspaceId: string}) => {\r\n            if(selectedWorkspace == workspaceId){\r\n                onDialogOpen();\r\n            }\r\n            else{\r\n                dispatch(setWorkspaces(workspaces));\r\n            }\r\n        });\r\n\r\n        socket.on('removed_workspace', (id: string)=> {\r\n            if(id == selectedWorkspace ){\r\n                onDialogOpen();\r\n            }\r\n            else{\r\n                dispatch(deleteWorkspace(id))\r\n            }\r\n        });\r\n\r\n        socket.on('new_project', (project: ProjectModel) => {\r\n            if(project.workspace == selectedWorkspace){\r\n                dispatch(newProject(project))\r\n            }\r\n        });\r\n\r\n        socket.on('edit_project', (project: ProjectModel) => {\r\n            if(project.workspace == selectedWorkspace){\r\n                dispatch(updateProject(project))\r\n            }\r\n        });\r\n\r\n        socket.on('new_aspect', ({workspace, aspect})=> {\r\n            if(workspace == selectedWorkspace){\r\n                dispatch(newAspect(aspect.project, aspect));\r\n            }\r\n        });\r\n\r\n        socket.on('delete_aspect', ({workspace, aspectId, projectId}) => {\r\n            if(workspace == selectedWorkspace){\r\n                dispatch(deleteAspect(projectId, aspectId));\r\n            }\r\n        });\r\n\r\n        socket.on('edit_aspect', ({workspace, aspect})=> {\r\n            if(workspace == selectedWorkspace){\r\n                dispatch(editAspect(aspect.project, aspect));     \r\n            }\r\n        });\r\n\r\n        socket.on('sprint_change', ({workspace, projectId}) => {\r\n            if(workspace == selectedWorkspace){\r\n                fetchBoard(projectId).then((data)=> {\r\n                    if(data){\r\n                        dispatch(newBoard(data));\r\n                    }\r\n                }).catch((err)=> console.error(err));\r\n            }\r\n        });\r\n\r\n        return () => {\r\n            socket.off('new_workspace');\r\n            socket.off('delete_workspace');\r\n            socket.off('removed_workspace');\r\n            socket.off('new_project');\r\n            socket.off('edit_project');\r\n            socket.off('new_aspect');\r\n            socket.off('delete_aspect');\r\n            socket.off('edit_aspect');\r\n            socket.off('sprint_change');\r\n        };\r\n    }, []);\r\n\r\n    function sendMessage(workspaceId:string | null, receiverId: string, data: MessageModel): void{\r\n        if(workspaceId){\r\n            socket.emit('sendMessage', {workspaceId, receiverId, data})\r\n        }\r\n    }\r\n\r\n    const value = {\r\n        socket,\r\n        onlineUsers,\r\n        sendMessage\r\n    };\r\n\r\n    return (\r\n        <SocketContext.Provider value = {value}>\r\n            <React.Fragment>\r\n                <DialogComponent>\r\n                    <SessionExpired onDialogClose = {onDialogClose} />\r\n                </DialogComponent>\r\n                {children}\r\n            </React.Fragment>\r\n        </SocketContext.Provider>\r\n    );\r\n};\r\n\r\nexport const useSocketContext = () => {\r\n    const values = useContext(SocketContext);\r\n    return values;\r\n};\r\n\r\nconst useDialogComponent = () => {\r\n    const { handleClose: onDialogClose, handleOpen: onDialogOpen, show } = useToggle();\r\n\r\n    const DialogComponent: React.FC = useCallback(({children}) => {\r\n        return(\r\n        <Dialog \r\n            onClose={onDialogClose} \r\n            aria-labelledby=\"session-expired-dialog\" \r\n            open={show}>\r\n            {children}\r\n        </Dialog>)\r\n    }, [show]);\r\n\r\n    return {\r\n        DialogComponent,\r\n        onDialogClose,\r\n        onDialogOpen,\r\n        show\r\n    }\r\n};\r\n\r\n\r\n","import React, { useCallback } from 'react';\r\nimport {\r\n    Dialog, \r\n    useTheme\r\n} from '@material-ui/core';\r\nimport useToggle from '../useToggle';\r\nimport useMediaQuery from '@material-ui/core/useMediaQuery';\r\nimport Slide from '@material-ui/core/Slide';\r\nimport Fade from '@material-ui/core/Fade';\r\nimport { TransitionProps } from '@material-ui/core/transitions';\r\n\r\nconst SlideTransition = React.forwardRef(function Transition(\r\n    props: TransitionProps & { children?: React.ReactElement<any, any> },\r\n    ref: React.Ref<unknown>,\r\n  ) {\r\n    return <Slide direction=\"right\" ref={ref} {...props} />;\r\n});\r\nconst FadeTransition = React.forwardRef(function Transition(\r\n    props: TransitionProps & { children?: React.ReactElement<any, any> },\r\n    ref: React.Ref<unknown>,\r\n  ) {\r\n    return <Fade  ref={ref} {...props} />;\r\n});\r\n\r\nconst useDialog = (fullSize?: boolean) => {\r\n    const { handleClose: onDialogClose, handleOpen: onDialogOpen, show } = useToggle();\r\n    const theme = useTheme();\r\n    const isXs = useMediaQuery(theme.breakpoints.down('xs'));\r\n    const fullScreen = fullSize || isXs;\r\n\r\n\r\n    const DialogComponent: React.FC = useCallback(({children}) => {\r\n        return(\r\n        <Dialog \r\n            onClose={onDialogClose} \r\n            aria-labelledby=\"customized-dialog-content\" \r\n            open={show}\r\n            TransitionComponent={fullScreen ? SlideTransition: FadeTransition}\r\n            fullScreen={fullScreen}>\r\n            {children}\r\n        </Dialog> )\r\n    }, [show, fullScreen]);\r\n\r\n    return {\r\n        DialogComponent,\r\n        onDialogClose,\r\n        onDialogOpen\r\n    }\r\n};\r\n\r\nexport default useDialog;","import { useCallback, useState } from \"react\";\r\nimport { \r\n    Snackbar\r\n} from '@material-ui/core';\r\nimport { Alert } from '@material-ui/lab';\r\nimport Slide from '@material-ui/core/Slide';\r\n\r\ntype Severity = 'error' | 'warning' | 'info' | 'success';\r\n\r\ninterface Direction {\r\n    vertical: 'top' | 'bottom';\r\n    horizontal: 'left' | 'center' | 'right';\r\n}\r\n\r\ninterface ToastState{\r\n    message: string;\r\n    type: Severity;\r\n    open: boolean;\r\n}\r\n\r\nconst useSnackbar = (direction?: Direction) => {\r\n    const [toast, setToast] = useState<ToastState>({message: '', open: false, type: 'success'})\r\n\r\n    function showMsg(message: string, type: Severity): void {\r\n        setToast({message, open: true, type : type});\r\n    };\r\n\r\n    const handleClose = () => {\r\n        setToast({message: '', open: false, type : 'success'});\r\n    };\r\n\r\n    const { vertical, horizontal } = direction || {vertical: 'top', horizontal: 'right'};\r\n\r\n    const SnackbarComponent = useCallback(\r\n        () => (\r\n            <Snackbar \r\n                open={toast.open} \r\n                autoHideDuration={90000} \r\n                onClose={handleClose}\r\n                anchorOrigin={{ vertical, horizontal }}\r\n                key={vertical + horizontal}\r\n                TransitionComponent={Slide}\r\n                >\r\n                <Alert onClose={handleClose} severity={toast.type}>\r\n                    {toast.message}\r\n                </Alert>\r\n            </Snackbar>\r\n        ),\r\n        [toast, vertical, horizontal],\r\n    )\r\n\r\n    return {\r\n        showMsg,\r\n        SnackbarComponent\r\n    };\r\n};\r\n\r\nexport default useSnackbar;","import axios from 'axios';\r\n\r\nexport function isMemberConnected(memberId: string, users: any ): boolean {\r\n\r\n    return users.hasOwnProperty(memberId) && !users[memberId].lastSeen;\r\n}\r\n\r\nexport async function getSocketId(memberId: string, users: any): Promise<string> {\r\n    if(users.hasOwnProperty(memberId)){\r\n       return users[memberId].socketId;\r\n    }\r\n    else return '';\r\n}\r\n\r\nexport const fetchBoard = async (projectId: string) => {\r\n    try{\r\n        const {data} = await axios.get(`/aspects/${projectId}`);\r\n        if(data.success) {\r\n            return data.data;\r\n        }\r\n        else return undefined;\r\n    }\r\n    catch(err){\r\n        console.error(err);\r\n    }\r\n};","import { ProjectModel } from '../../models/app.model';\r\nimport ActionType from './types';\r\n\r\nexport const getUserProjects = () => {\r\n\r\n    return {\r\n        type: ActionType.GET_PROJECTS,\r\n    };\r\n};\r\n\r\nexport const setProjects = (payload: ProjectModel[]) => {\r\n\r\n    return {\r\n        payload,\r\n        type: ActionType.SET_PROJECTS,\r\n    };\r\n};\r\n\r\nexport const newProject = (payload: ProjectModel) => {\r\n\r\n    return {\r\n        payload,\r\n        type: ActionType.NEW_PROJECT,\r\n    };\r\n};\r\n\r\nexport const updateProject = (payload: ProjectModel) => {\r\n\r\n    return {\r\n        payload,\r\n        type: ActionType.UPDATE_PROJECT,\r\n    };\r\n};\r\n\r\nexport const deleteProject = (payload: string) => {\r\n\r\n    return {\r\n        payload,\r\n        type: ActionType.DELETE_PROJECT,\r\n    };\r\n}","import { WorkspaceModel } from '../../models/app.model';\r\nimport ActionType from './types';\r\n\r\nexport const getUserWorkspaces = () => {\r\n\r\n    return {\r\n        type: ActionType.GET_WORKSPACES,\r\n    };\r\n};\r\n\r\nexport const setWorkspaces = (payload: WorkspaceModel[]) => {\r\n\r\n    return {\r\n        payload,\r\n        type: ActionType.SET_WORKSPACES,\r\n    };\r\n};\r\n\r\nexport const newWorkspace = (payload: WorkspaceModel) => {\r\n\r\n    return {\r\n        payload,\r\n        type: ActionType.NEW_WORKSPACE,\r\n    };\r\n};\r\n\r\nexport const updateWorkspace = (payload: WorkspaceModel) => {\r\n\r\n    return {\r\n        payload,\r\n        type: ActionType.UPDATE_WORKSPACE,\r\n    }\r\n}\r\n\r\nexport const deleteWorkspace = (payload: string) => {\r\n\r\n    return {\r\n        payload,\r\n        type: ActionType.DELETE_WORKSPACE,\r\n    }\r\n}\r\n\r\n","import React, { useContext } from 'react';\r\nimport useSnackbar from '../hooks/useSnackbar';\r\n\r\ntype Severity = 'error' | 'warning' | 'info' | 'success';\r\n\r\ninterface ContextProps{\r\n  showMsg: (msg: string, type: Severity) => void;\r\n}\r\n\r\nconst NotificationContext = React.createContext({} as ContextProps);\r\n\r\nexport const NotificationProvider = ({children}: {children: JSX.Element}) => {\r\n    const { showMsg, SnackbarComponent } = useSnackbar({horizontal: 'right', vertical: 'top'});\r\n\r\n    const value = {\r\n        showMsg\r\n    };\r\n\r\n    return(\r\n        <NotificationContext.Provider value = {value}>\r\n           <React.Fragment>\r\n               <SnackbarComponent />\r\n               {children}\r\n           </React.Fragment>\r\n        </NotificationContext.Provider>\r\n    )\r\n}\r\n\r\nexport const useNotificationContext = () => {\r\n    const values = useContext(NotificationContext);\r\n    return values;\r\n};","import React from 'react';\r\nimport {\r\n    Typography,\r\n    Box\r\n} from '@material-ui/core';\r\nimport RoundedButton from '../../../components/RoundedButton';\r\nimport axios from 'axios';\r\n\r\nconst SessionExpired = ({onDialogClose}: {onDialogClose: () => void}) => {\r\n    const [ loading, setLoading ] = React.useState<boolean>(false);\r\n\r\n    const logout = async () => {\r\n        try{\r\n            setLoading(true);\r\n            const {data} = await axios({\r\n                url: `/auth/logout`,\r\n                method: 'POST',\r\n            });\r\n\r\n            if(data.success){\r\n                onDialogClose();\r\n                document.cookie = \"jwt=;\";\r\n                localStorage.clear();\r\n                sessionStorage.clear();\r\n                setTimeout(() =>{\r\n                    window.location.reload();\r\n                }, 1000);\r\n            }\r\n        }\r\n        catch(err){\r\n            throw err;\r\n        }\r\n    }\r\n\r\n    return (\r\n        <Box p={2} maxWidth={250}>\r\n            <Typography variant=\"h5\" gutterBottom>\r\n                Session Expired!\r\n            </Typography>\r\n\r\n            <Typography variant=\"subtitle2\" color=\"textSecondary\" gutterBottom>\r\n                Your session has expired. Please login again to continue working.\r\n            </Typography>\r\n\r\n            <RoundedButton variant=\"contained\" color=\"primary\" fullWidth onClick={logout}\r\n            style={{marginTop: '0.5rem'}}>\r\n              {loading?'Loading...':'login'}\r\n            </RoundedButton>\r\n        </Box>\r\n    )\r\n}\r\n\r\nexport default SessionExpired;\r\n","import React from 'react';\r\nimport {\r\n    Popover\r\n} from '@material-ui/core';\r\n\r\ninterface PopoverProps{\r\n    id: string;\r\n}\r\n\r\nconst UsePopover = () => {\r\n    const [anchorEl, setAnchorEl] = React.useState<HTMLButtonElement | null>(null);\r\n\r\n    const handleClick = (event: React.MouseEvent<HTMLButtonElement>) => {\r\n        setAnchorEl(event.currentTarget);\r\n    };\r\n\r\n    const handleClose = () => {\r\n        setAnchorEl(null);\r\n    };\r\n\r\n    const open = Boolean(anchorEl);\r\n\r\n    const PopoverComponent: React.FC<PopoverProps> = ({ children, id }) => {\r\n        const newId = open ? id : undefined;\r\n\r\n        return (\r\n            <Popover\r\n                id={newId}\r\n                open={open}\r\n                anchorEl={anchorEl}\r\n                onClose={handleClose}\r\n                anchorOrigin={{\r\n                    vertical: 'bottom',\r\n                    horizontal: 'right',\r\n                }}\r\n                transformOrigin={{\r\n                    vertical: 'top',\r\n                    horizontal: 'left',\r\n                }}\r\n            >\r\n                {children}\r\n            </Popover>\r\n        )\r\n    }\r\n\r\n    return {\r\n        handleClick,\r\n        handleClose,\r\n        PopoverComponent\r\n    }\r\n}\r\n\r\nexport default UsePopover;","import { UserModel } from '../../models/app.model';\r\nimport ActionType from './types';\r\n\r\nexport const getWorkspaceMembers = () => {\r\n\r\n    return {\r\n        type: ActionType.GET_MEMBERS,\r\n    };\r\n};\r\n\r\nexport const setWorkspaceMembers = (payload: UserModel[]) => {\r\n\r\n    return {\r\n        payload,\r\n        type: ActionType.SET_MEMBERS,\r\n    };\r\n};\r\n\r\nexport const newMember = (payload: UserModel) => {\r\n\r\n    return {\r\n        payload,\r\n        type: ActionType.NEW_MEMBER,\r\n    };\r\n};\r\n\r\nexport const deleteMember = (payload: string) => {\r\n\r\n    return{\r\n        payload,\r\n        type: ActionType.DELETE_MEMBER\r\n    }\r\n}","import { MessageModel } from '../../models/app.model';\r\nimport ActionType from './types';\r\n\r\nexport const getChat = () => {\r\n\r\n    return {\r\n        type: ActionType.GET_CHAT,\r\n    };\r\n};\r\n\r\nexport const setChat = (payload: MessageModel[], key: string) => {\r\n\r\n    return {\r\n        key,\r\n        payload,\r\n        type: ActionType.SET_CHAT,\r\n    };\r\n};\r\n\r\nexport const PostNewMessage = (payload: MessageModel, key: string) => {\r\n\r\n    return {\r\n        key,\r\n        payload,\r\n        type: ActionType.POST_MESSAGE,\r\n    };\r\n};\r\n\r\nexport const initChat = () => {\r\n\r\n    return {\r\n        type: ActionType.INIT_CHAT,\r\n    };\r\n};","import React from 'react';\r\nimport {\r\n    Typography,\r\n    Tooltip\r\n} from '@material-ui/core';\r\nimport { withStyles, Theme } from '@material-ui/core/styles';\r\n\r\nconst HtmlTooltip = withStyles((theme: Theme) => ({\r\n    tooltip: {\r\n        backgroundColor: '#f5f5f9',\r\n        color: 'rgba(0, 0, 0, 0.87)',\r\n        maxWidth: 220,\r\n        fontSize: theme.typography.pxToRem(12),\r\n        border: '1px solid #dadde9',\r\n    },\r\n}))(Tooltip);\r\n\r\ninterface WithTooltipProps {\r\n    title: string;\r\n    text: string;\r\n    children: JSX.Element;\r\n}\r\n\r\nconst WithTooltip: React.FC<WithTooltipProps> = ({ title, text, children }) => {\r\n\r\n    return (\r\n        <HtmlTooltip\r\n            title={\r\n                <React.Fragment>\r\n                    <Typography color=\"inherit\">{title}</Typography>\r\n                    <span>{text}</span>\r\n                </React.Fragment>\r\n            }\r\n        >\r\n            {children}\r\n        </HtmlTooltip>\r\n    )\r\n}\r\n\r\nexport default WithTooltip;\r\n","import React, { useEffect } from 'react';\r\nimport {\r\n    IconButton,\r\n    Avatar,\r\n    Typography,\r\n    Box,\r\n    Paper,\r\n    makeStyles,\r\n    Theme,\r\n    Tooltip\r\n} from '@material-ui/core';\r\nimport { CallEnd } from '@material-ui/icons';\r\nimport { UserModel } from '../../../../models/app.model';\r\nimport { useVideoCallContext } from '.';\r\nimport clsx from 'clsx';\r\nimport userAvatar from '../../../../assets/avatars/profile.jpg';\r\nimport { SocketEvents, useSocketContext } from '../../../../context/SocketContext';\r\nimport { getSocketId } from '../../../../util/helpers';\r\n\r\nconst baseURL = process.env.REACT_APP_BASE_URL;\r\n\r\nconst useStyle = makeStyles((theme: Theme) => ({\r\n    lgAvatar: {\r\n        width: theme.spacing(11),\r\n        height: theme.spacing(11),\r\n    },\r\n    mb: {\r\n        marginBottom: theme.spacing(1)\r\n    },\r\n    mr:{\r\n        marginRight: theme.spacing(1)\r\n    },\r\n    rippleAnimation: {\r\n        marginBottom: theme.spacing(3),\r\n        width: theme.spacing(11),\r\n        height: theme.spacing(11),\r\n        position: 'relative'\r\n    },\r\n    paper: {\r\n        padding: theme.spacing(4),\r\n        borderRadius: 10,\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        alignItems: 'center',\r\n        justifyContent: 'center',\r\n        textAlign: 'center'\r\n    },\r\n    header: {\r\n        position: 'absolute',\r\n        top: theme.spacing(2),\r\n        right: theme.spacing(2),\r\n        display: 'flex',\r\n        flexDirection: 'row',\r\n        justifyContent: 'flex-end',\r\n        alignItems: 'center',\r\n        width: '100%',\r\n        zIndex: 99999999\r\n    }\r\n}));\r\n\r\nconst callRingtone = new Audio('/audio/caller.mp3');\r\n\r\nconst Dial = ({currentUser, onCallAccepted}: {currentUser: UserModel, onCallAccepted: () => void}) => {\r\n    const [callState, SetCallState] = React.useState<string>('Dialing...');\r\n    const { onCallEnd, isVideo } = useVideoCallContext();\r\n    const { socket, onlineUsers } = useSocketContext();\r\n    const classes = useStyle();\r\n    let ob = sessionStorage.getItem('userToCall');\r\n    const userToCall: UserModel = ob ? JSON.parse(ob) : null;\r\n\r\n    useEffect(() => {\r\n\r\n        const init = async () => {\r\n            try{\r\n                if(userToCall){\r\n                    const socketId = await getSocketId(userToCall._id || '', onlineUsers);\r\n                    if(socketId){\r\n                        socket.emit('dial', {to: socketId, from: currentUser, isVideo});\r\n                    }\r\n                    callRingtone.loop = true;\r\n                    callRingtone.play();\r\n\r\n                    socket.once(SocketEvents.CALL_END , () => {\r\n                        receiveCallEnd();\r\n                    });\r\n\r\n                    socket.once(SocketEvents.CALL_ACCEPTED, () => {\r\n                        onCallAccepted();\r\n                    });\r\n                } \r\n            }\r\n            catch(err){\r\n                console.error(err);\r\n            }\r\n        };\r\n\r\n        init();\r\n\r\n        return () => {\r\n            callRingtone.load();\r\n            callRingtone.pause();\r\n            callRingtone.currentTime = 0;\r\n            socket.off(SocketEvents.CALL_END);\r\n            socket.off(SocketEvents.CALL_ACCEPTED);\r\n        }\r\n    }, []);\r\n\r\n    function receiveCallEnd (){\r\n        SetCallState('Call Ended.');\r\n        setTimeout(() => {\r\n            onCallEnd();\r\n        }, 1000);\r\n    }\r\n\r\n    async function CallEndHandler() {\r\n        SetCallState('Call Ended.');\r\n        const socketId = await getSocketId(userToCall._id || '', onlineUsers);\r\n        if(socketId)\r\n        socket.emit('cancelCall', socketId);\r\n\r\n        setTimeout(() => {\r\n            onCallEnd();\r\n        }, 1000);\r\n    }\r\n\r\n    return (\r\n        <React.Fragment>\r\n            <Box display=\"flex\" flexDirection=\"column\" alignItems=\"center\"\r\n                justifyContent=\"center\" height=\"100%\">\r\n                {userToCall &&\r\n                    <Paper elevation={3} className={classes.paper}>\r\n                        <Box className={clsx('circle', classes.rippleAnimation)}>\r\n                            <Avatar src={userToCall.avatar ? `${baseURL}/files/${userToCall.avatar}` : userAvatar}\r\n                                alt=\"userToCall\" className={clsx(classes.lgAvatar)} />\r\n                        </Box>\r\n                        <Typography component=\"div\" variant=\"h5\" className=\"bg-text-primary\" gutterBottom>\r\n                            {userToCall?.name}\r\n                        </Typography>\r\n                        <Typography component=\"span\" variant=\"body2\" color=\"textSecondary\" className={classes.mb}>\r\n                            {callState}\r\n                        </Typography>\r\n                        <IconButton style={{ backgroundColor: '#f50057', color: '#fff' }}\r\n                            onClick={CallEndHandler}>\r\n                            <CallEnd />\r\n                        </IconButton>\r\n                    </Paper>\r\n                }\r\n            </Box>\r\n\r\n            <Box className={classes.header}>\r\n                {\r\n                    userToCall && <>\r\n                        <Tooltip title={currentUser.name}>\r\n                            <Avatar src={currentUser.avatar ? `${baseURL}/files/${currentUser.avatar}` : userAvatar}\r\n                                alt=\"mine\" className={classes.mr} />\r\n                        </Tooltip>\r\n\r\n                        <Tooltip title={userToCall?.name}>\r\n                            <Avatar src={userToCall.avatar ? `${baseURL}/files/${userToCall.avatar}` : userAvatar}\r\n                                alt=\"userToCall\" />\r\n                        </Tooltip>\r\n                    </>\r\n                }\r\n            </Box>\r\n        </React.Fragment>\r\n    )\r\n}\r\n\r\nexport default Dial;\r\n","import React, { useEffect, useRef } from 'react';\r\nimport {\r\n    IconButton,\r\n    Avatar,\r\n    Typography,\r\n    Box,\r\n    Paper,\r\n    makeStyles,\r\n    Theme,\r\n    Tooltip\r\n} from '@material-ui/core';\r\nimport { CallEnd, Call } from '@material-ui/icons';\r\nimport { UserModel } from '../../../../models/app.model';\r\nimport { useVideoCallContext } from '.';\r\nimport { SocketEvents, useSocketContext } from '../../../../context/SocketContext';\r\nimport { getSocketId } from '../../../../util/helpers';\r\nimport {Howl} from 'howler'\r\nimport clsx from 'clsx';\r\nimport userAvatar from '../../../../assets/avatars/profile.jpg';\r\n\r\nconst baseURL = process.env.REACT_APP_BASE_URL;\r\n\r\nconst useStyle = makeStyles((theme: Theme) => ({\r\n    lgAvatar: {\r\n        width: theme.spacing(11),\r\n        height: theme.spacing(11),\r\n    },\r\n    mb: {\r\n        marginBottom: theme.spacing(1)\r\n    },\r\n    mr: {\r\n        marginRight: theme.spacing(2)\r\n    },\r\n    rippleAnimation: {\r\n        marginBottom: theme.spacing(3),\r\n        width: theme.spacing(11),\r\n        height: theme.spacing(11),\r\n        position: 'relative'\r\n    },\r\n    paper: {\r\n        padding: theme.spacing(4),\r\n        borderRadius: 10,\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        alignItems: 'center',\r\n        justifyContent: 'center',\r\n        textAlign: 'center'\r\n    },\r\n    header: {\r\n        position: 'absolute',\r\n        top: theme.spacing(2),\r\n        right: theme.spacing(2),\r\n        display: 'flex',\r\n        flexDirection: 'row',\r\n        justifyContent: 'flex-end',\r\n        alignItems: 'center',\r\n        width: '100%',\r\n        zIndex: 99999999\r\n    }\r\n}));\r\n\r\nconst callRingtone = new Howl({\r\n    src: '/audio/app_call.mp3',\r\n    loop: true,\r\n    preload: true\r\n  })\r\n\r\nconst AnswerCall = ({ currentUser, onCallAccepted }: { currentUser: UserModel, onCallAccepted: () => void }) => {\r\n\r\n    const classes = useStyle();\r\n    const { onCallEnd, caller: UserToAnswer } = useVideoCallContext();\r\n    const { socket, onlineUsers } = useSocketContext();\r\n    const [callState, SetCallState] = React.useState<string>('Calling...');\r\n    const audioRef = useRef<HTMLButtonElement>(null);\r\n\r\n    useEffect(() => {\r\n        var timer: NodeJS.Timeout;\r\n        const init = async () => {\r\n            try{\r\n                timer = setTimeout(() =>{\r\n                    audioRef.current?.click();\r\n                },1000);\r\n\r\n                socket.once(SocketEvents.CALL_END , ()=> {\r\n                    receiveCallEnd();\r\n                });\r\n            }\r\n            catch(err){\r\n                console.error(err);\r\n            }\r\n        };\r\n\r\n        init();\r\n\r\n        return () => {\r\n            callRingtone.stop();\r\n            clearTimeout(timer);\r\n            socket.off(SocketEvents.CALL_END);\r\n        }\r\n    }, []);\r\n\r\n    function audionHandler(){\r\n        callRingtone.play();\r\n    }\r\n\r\n    function receiveCallEnd (){\r\n        SetCallState('Call Ended.');\r\n        setTimeout(() => {\r\n            onCallEnd();\r\n        }, 1000);\r\n    }\r\n\r\n    async function CallEndHandler() {\r\n       try{\r\n        SetCallState('Call Ended.')\r\n        const socketId = await getSocketId(UserToAnswer._id || '', onlineUsers);\r\n        if(socketId)\r\n        socket.emit('cancelCall', socketId);\r\n\r\n        setTimeout(() => {\r\n            onCallEnd();\r\n        }, 1000);\r\n       }\r\n       catch(err){\r\n           throw err;\r\n       }\r\n    }\r\n\r\n    async function CallAcceptedHandler(){\r\n       try{            \r\n            onCallAccepted();\r\n       }\r\n       catch(err){\r\n           console.error(err)\r\n       }\r\n    }\r\n\r\n    return (\r\n        <React.Fragment>\r\n            <Box display=\"flex\" flexDirection=\"column\" alignItems=\"center\"\r\n                justifyContent=\"center\" height=\"100%\">\r\n                {UserToAnswer &&\r\n                    <Paper elevation={3} className={classes.paper}>\r\n                        <Box className={clsx('circle', classes.rippleAnimation)}>\r\n                            <Avatar src={UserToAnswer.avatar ? `${baseURL}/files/${UserToAnswer.avatar}` : userAvatar}\r\n                                alt=\"userToCall\" className={clsx(classes.lgAvatar)} />\r\n                        </Box>\r\n                        <Typography component=\"div\" variant=\"h5\" className=\"bg-text-primary\" gutterBottom>\r\n                            {UserToAnswer?.name}\r\n                        </Typography>\r\n                        <Typography component=\"span\" variant=\"body2\" color=\"textSecondary\" className={classes.mb}>\r\n                            {callState}\r\n                        </Typography>\r\n\r\n                        <Box>\r\n                            <button hidden ref={audioRef} onClick={audionHandler}></button>\r\n\r\n                            <IconButton className={clsx('wobble', classes.mr)} style={{ backgroundColor: '#04AA6D', color: '#fff' }}\r\n                                onClick={CallAcceptedHandler}>\r\n                                <Call />\r\n                            </IconButton>\r\n\r\n                            <IconButton style={{ backgroundColor: '#f50057', color: '#fff' }}\r\n                                onClick={CallEndHandler}>\r\n                                <CallEnd />\r\n                            </IconButton>\r\n                        </Box>\r\n                    </Paper>\r\n                }\r\n            </Box>\r\n            \r\n            <Box className={classes.header}>\r\n                {\r\n                    UserToAnswer && <>\r\n                        <Tooltip title={currentUser.name}>\r\n                            <Avatar src={currentUser.avatar ? `${baseURL}/files/${currentUser.avatar}` : userAvatar}\r\n                                alt=\"mine\" className={classes.mr} />\r\n                        </Tooltip>\r\n\r\n                        <Tooltip title={UserToAnswer?.name}>\r\n                            <Avatar src={UserToAnswer.avatar ? `${baseURL}/files/${UserToAnswer.avatar}` : userAvatar}\r\n                                alt=\"userToCall\" />\r\n                        </Tooltip>\r\n                    </>\r\n                }\r\n            </Box>\r\n        </React.Fragment>\r\n    )\r\n}\r\n\r\nexport default AnswerCall;\r\n","export default __webpack_public_path__ + \"static/media/poster.60a869c3.jpg\";","import React, { useRef, useEffect } from 'react';\r\nimport {\r\n    Box,\r\n    makeStyles,\r\n    Theme,\r\n    Tooltip,\r\n    Avatar,\r\n    Typography\r\n} from '@material-ui/core';\r\nimport {\r\n    CallEnd,\r\n    MicOffOutlined,\r\n    MicNoneOutlined,\r\n    VideocamOffOutlined,\r\n    VideocamOutlined,\r\n    StopScreenShareOutlined,\r\n    ScreenShareOutlined,\r\n} from '@material-ui/icons';\r\nimport { SpeedDial, SpeedDialAction, SpeedDialIcon } from '@material-ui/lab';\r\nimport useToggle from '../../../../hooks/useToggle';\r\nimport { useVideoCallContext } from '.';\r\nimport { UserModel } from '../../../../models/app.model';\r\n\r\nimport userAvatar from '../../../../assets/avatars/profile.jpg';\r\nimport { SocketEvents, useSocketContext } from '../../../../context/SocketContext';\r\nimport { getSocketId } from '../../../../util/helpers';\r\nimport Peer from \"simple-peer\";\r\nimport posterImg from '../../../../assets/chat/poster.jpg';\r\n\r\nconst baseURL = process.env.REACT_APP_BASE_URL;\r\n\r\nconst useStyle = makeStyles((theme: Theme) => ({\r\n    videoPartner: {\r\n        width: '100%',\r\n        height: 'auto',\r\n        [theme.breakpoints.down('xs')]: {\r\n            height: '100vh'\r\n        },\r\n    },\r\n    mr: {\r\n        marginRight: theme.spacing(1)\r\n    },\r\n    mt: {\r\n        marginTop: theme.spacing(1)\r\n    },\r\n    myVideoContainer: {\r\n        width: theme.spacing(12),\r\n        height: theme.spacing(12),\r\n        borderRadius: '50%',\r\n        position: 'absolute',\r\n        bottom: theme.spacing(4),\r\n        right: theme.spacing(1),\r\n        border: '2px solid #fff',\r\n        padding: '5px',\r\n        overflow: 'hidden'\r\n    },\r\n    myVideo: {\r\n        width: '100%',\r\n        height: '100%',\r\n        objectFit: 'cover',\r\n        borderRadius: '50%',\r\n    },\r\n    speedDial: {\r\n        position: 'absolute',\r\n        bottom: theme.spacing(18),\r\n        right: theme.spacing(2.5),\r\n    },\r\n    header: {\r\n        position: 'absolute',\r\n        top: theme.spacing(2),\r\n        right: theme.spacing(2),\r\n        display: 'flex',\r\n        flexDirection: 'row',\r\n        justifyContent: 'flex-end',\r\n        alignItems: 'center',\r\n        width: '100%',\r\n        zIndex: 99999999\r\n    },\r\n    counter: {\r\n        position: 'absolute',\r\n        top: theme.spacing(8),\r\n        width: '100%',\r\n        color: 'white',\r\n        [theme.breakpoints.down('xs')]: {\r\n            color: '#1E293B',\r\n            top: theme.spacing(10),\r\n        },\r\n    },\r\n}));\r\n\r\nconst VideoChat = React.memo(({ currentUser }: { currentUser: UserModel }) => {\r\n\r\n    const classes = useStyle();\r\n    const { onCallEnd, caller, isVideo } = useVideoCallContext();\r\n    const { socket, onlineUsers } = useSocketContext();\r\n\r\n    let ob = sessionStorage.getItem('userToCall');\r\n    const userToCall: UserModel = ob ? JSON.parse(ob) : null;\r\n\r\n    const partnerRefStream = useRef<HTMLVideoElement>(null);\r\n    const myVideoRefStream = useRef<HTMLVideoElement>(null);\r\n\r\n    const myPartner = React.useMemo(() => {\r\n        return caller.hasOwnProperty('_id') ? caller : userToCall;\r\n    }, [currentUser, caller]);\r\n\r\n    const socketId = React.useMemo(async () => {\r\n        return await getSocketId(myPartner._id || '', onlineUsers);\r\n    }, [])\r\n\r\n    let stream: any;\r\n    let myPeer: Peer.Instance;\r\n\r\n    useEffect(() => {\r\n        socket.once(SocketEvents.CALL_END, () => {\r\n            onCallEnd();\r\n        });\r\n\r\n        socket.once(SocketEvents.EMIT_SIGNAL, (dataSignal: Peer.SignalData) => {\r\n            myPeer.signal(dataSignal);\r\n        });\r\n\r\n        return () => {\r\n            socket.off(SocketEvents.CALL_END);\r\n            socket.off(SocketEvents.EMIT_SIGNAL);\r\n        }\r\n    }, []);\r\n\r\n    useEffect(() => {\r\n        loadMedia();\r\n\r\n        return () => {\r\n            try {\r\n                if (stream) {\r\n                    const tracks = stream.getTracks();\r\n                    tracks.forEach(function (track: any) {\r\n                        track.stop();\r\n                    });\r\n\r\n                    if (myPeer) {\r\n                        myPeer.destroy();\r\n                    }\r\n                }\r\n            }\r\n            catch (err) {\r\n                console.error(err);\r\n            }\r\n        }\r\n    }, []);\r\n\r\n    function loadMedia() {\r\n        if (navigator.mediaDevices === undefined) {\r\n            navigator.getUserMedia({\r\n                video: isVideo,\r\n                audio: true\r\n            }, gotMedia, (err) => { console.error(err) });\r\n        }\r\n        else {\r\n            navigator.mediaDevices.getUserMedia({\r\n                video: isVideo,\r\n                audio: true\r\n            }).then(gotMedia).catch((err) => { console.error(err) });\r\n        }\r\n    }\r\n\r\n    async function gotMedia(st: MediaStream) {\r\n        try {\r\n            if (isVideo && myVideoRefStream.current) {\r\n                if (\"srcObject\" in myVideoRefStream.current) {\r\n                    myVideoRefStream.current.srcObject = st;\r\n                } else {\r\n                    // Avoid using this in new browsers, as it is going away.\r\n                    // @ts-ignore\r\n                    myVideoRefStream.current.src = window.URL.createObjectURL(st);\r\n                }\r\n                myVideoRefStream.current.onloadedmetadata = function (e) {\r\n                    myVideoRefStream.current?.play();\r\n                };\r\n            }\r\n            stream = st;\r\n            const initiator = !caller.hasOwnProperty('_id');\r\n            let to = await socketId;\r\n\r\n            if (initiator === false) {\r\n                socket.emit('onCallAccepted', to);\r\n            }\r\n\r\n            myPeer = new Peer({ initiator: initiator, stream: st, trickle: false });\r\n            myPeer.on('signal', data => {\r\n                socket.emit('receiveSignal', { to: to, dataSignal: data });\r\n            });\r\n\r\n            myPeer.on('stream', stream => {\r\n                if (partnerRefStream.current) {\r\n                    if (\"srcObject\" in partnerRefStream.current) {\r\n                        partnerRefStream.current.srcObject = stream;\r\n                    } else {\r\n                        // Avoid using this in new browsers, as it is going away.\r\n                        // @ts-ignore\r\n                        partnerRefStream.current.src = window.URL.createObjectURL(stream);\r\n                    }\r\n                    partnerRefStream.current.onloadedmetadata = function (e) {\r\n                        partnerRefStream.current?.play();\r\n                    };\r\n                }\r\n            });\r\n\r\n            myPeer.on('error', (err)=>{\r\n                onCallEnded();\r\n            });\r\n        }\r\n        catch (err) {\r\n            throw err;\r\n        }\r\n    }\r\n\r\n    function onVideoOff() {\r\n        try {\r\n            stream.getVideoTracks()[0].enabled = !(stream.getVideoTracks()[0].enabled);\r\n        }\r\n        catch (err) {\r\n            console.error(err.message);\r\n        }\r\n    }\r\n\r\n    function onSwitchMic() {\r\n        try {\r\n            stream.getAudioTracks()[0].enabled = !(stream.getAudioTracks()[0].enabled);\r\n        }\r\n        catch (err) {\r\n            console.error(err.message);\r\n        }\r\n    }\r\n\r\n    async function onShareScreen() {\r\n        try {\r\n            // @ts-ignore\r\n            let screenStream = await navigator.mediaDevices.getDisplayMedia({cursor: true});\r\n\r\n            if (myVideoRefStream.current) {\r\n                myPeer.replaceTrack(stream.getVideoTracks()[0], screenStream.getVideoTracks()[0], stream)\r\n                myVideoRefStream.current.srcObject = screenStream\r\n               \r\n                screenStream.getTracks()[0].onended = () =>{\r\n                    if(myVideoRefStream.current){\r\n                        myPeer.replaceTrack(screenStream.getVideoTracks()[0], stream.getVideoTracks()[0], stream)\r\n                        myVideoRefStream.current.srcObject=stream\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        catch (err) {\r\n            console.error(err.message);\r\n        }\r\n    }\r\n\r\n    async function onCallEnded() {\r\n        try {\r\n            const to = await socketId;\r\n            if (to)\r\n                socket.emit('cancelCall', to);\r\n\r\n            setTimeout(() => {\r\n                onCallEnd();\r\n            }, 0);\r\n        }\r\n        catch (err) {\r\n            console.error(err.message);\r\n        }\r\n    }\r\n\r\n\r\n\r\n    function callContent(): JSX.Element {\r\n        if (isVideo) {\r\n            return (\r\n                <React.Fragment>\r\n                    <video ref={partnerRefStream} className={classes.videoPartner} \r\n                    autoPlay playsInline />\r\n\r\n                    <Box className={classes.myVideoContainer}>\r\n                        <video className={classes.myVideo} ref={myVideoRefStream} muted autoPlay />\r\n                    </Box>\r\n                </React.Fragment>\r\n            )\r\n        }\r\n        else {\r\n            return (\r\n                <React.Fragment>\r\n                    <Box className={classes.counter} display=\"flex\" flexDirection=\"column\"\r\n                        alignItems=\"center\" justifyContent=\"center\" textAlign=\"center\">\r\n                        <Typography component=\"span\" variant=\"subtitle1\" gutterBottom>\r\n                            Incoming call...\r\n                        </Typography>\r\n                        <TimeCounter />\r\n                    </Box>\r\n                    <video ref={partnerRefStream} className={classes.videoPartner}\r\n                        autoPlay poster={posterImg} playsInline />\r\n\r\n                </React.Fragment>\r\n            )\r\n        }\r\n    }\r\n\r\n    return (\r\n        <Box width=\"100%\" height=\"100vh\" position=\"relative\">\r\n            {callContent()}\r\n\r\n            <MenuActionButtons onVideoOff={onVideoOff} onSwitchMic={onSwitchMic}\r\n                onCallEnded={onCallEnded} onShareScreen={onShareScreen} isVideo={isVideo} />\r\n\r\n            <Box className={classes.header}>\r\n                <Tooltip title={currentUser.name}>\r\n                    <Avatar src={currentUser.avatar ? `${baseURL}/files/${currentUser.avatar}` : userAvatar}\r\n                        alt=\"mine\" className={classes.mr} />\r\n                </Tooltip>\r\n                <Tooltip title={myPartner?.name}>\r\n                    <Avatar src={myPartner.avatar ? `${baseURL}/files/${myPartner.avatar}` : userAvatar}\r\n                        alt=\"userToCall\" />\r\n                </Tooltip>\r\n            </Box>\r\n        </Box>\r\n    )\r\n});\r\n\r\ninterface MenuActionsProps {\r\n    onSwitchMic: () => void;\r\n    onShareScreen: () => void;\r\n    onVideoOff: () => void;\r\n    onCallEnded: () => void;\r\n    isVideo: boolean;\r\n}\r\nconst MenuActionButtons: React.FC<MenuActionsProps> = ({ onSwitchMic, onShareScreen, onCallEnded, onVideoOff, isVideo }) => {\r\n    const { handleClose, handleOpen, show } = useToggle();\r\n    const classes = useStyle();\r\n    const [actions, setActions] = React.useState(\r\n        [\r\n            { icon: <CallEnd />, name: 'End Call', index: 1, isOn: true },\r\n            { icon: <MicNoneOutlined />, name: 'Mute', index: 2, iconOff: <MicOffOutlined />, isOn: true },\r\n            { icon: <VideocamOutlined />, name: 'Video Camera Off', index: 3, iconOff: <VideocamOffOutlined />, isOn: true },\r\n            { icon: <ScreenShareOutlined />, name: 'Share Screen', index: 4, iconOff: <StopScreenShareOutlined />, isOn: false }\r\n        ]\r\n    );\r\n\r\n    React.useEffect(() => {\r\n        if (!isVideo) {\r\n            setActions([\r\n                { icon: <CallEnd />, name: 'End Call', index: 1, isOn: true },\r\n                { icon: <MicNoneOutlined />, name: 'Mute', index: 2, iconOff: <MicOffOutlined />, isOn: true },\r\n                { icon: <ScreenShareOutlined />, name: 'Share Screen', index: 4, iconOff: <StopScreenShareOutlined />, isOn: false }\r\n            ]);\r\n        }\r\n    }, [])\r\n\r\n    function switchIcon(index: number): void {\r\n        setActions([...actions.map((item: any) => item.index != index ? item : { ...item, isOn: !item.isOn })]);\r\n    }\r\n\r\n    function actionHandler(index: number): void {\r\n        switch (index) {\r\n            case 1: onCallEnded(); break;\r\n            case 2: onSwitchMic(); switchIcon(index); break;\r\n            case 3: onVideoOff(); switchIcon(index); break;\r\n            case 4: onShareScreen(); switchIcon(index); break;\r\n        }\r\n    }\r\n\r\n    return (\r\n        <React.Fragment>\r\n            <SpeedDial\r\n                ariaLabel=\"SpeedDial openIcon example\"\r\n                className={classes.speedDial}\r\n                hidden={false}\r\n                icon={<SpeedDialIcon />}\r\n                onClose={handleClose}\r\n                onOpen={handleOpen}\r\n                open={show}\r\n            >\r\n                {actions.map((action) => (\r\n                    <SpeedDialAction\r\n                        key={action.index}\r\n                        icon={action.isOn ? action.icon : action.iconOff}\r\n                        tooltipTitle={action.name}\r\n                        onClick={() => actionHandler(action.index)}\r\n                    />\r\n                ))}\r\n            </SpeedDial>\r\n        </React.Fragment>\r\n    )\r\n}\r\n\r\ninterface TimeConterProps{\r\n    seconds: number;\r\n    minutes: number;\r\n    hours: number;\r\n}\r\nconst TimeCounter = () => {\r\n    const [time, setTime] = React.useState<TimeConterProps>({seconds: 0, minutes: 0, hours: 0});\r\n\r\n    React.useEffect(() => {\r\n        let interval = setInterval( () => {\r\n            \r\n            if(time.seconds < 59){\r\n                setTime(state => {return {...state, seconds: state.seconds + 1}});\r\n            }\r\n            else if( time.minutes < 59){\r\n                setTime(state => {return {...state, seconds: 0, minutes: state.minutes + 1}});\r\n            }\r\n            else{\r\n                setTime(state => {return {hours: state.hours + 1, seconds: 0, minutes: 0}});\r\n            }\r\n        }, 1000);\r\n\r\n        return () => {\r\n            clearInterval(interval);\r\n        };\r\n    }, [time]);\r\n\r\n    return (\r\n        <span>\r\n            {`${time.hours} : ${time.minutes} : ${time.seconds}`}\r\n        </span>\r\n    )\r\n};\r\n\r\nexport default VideoChat;\r\n","import React from 'react';\r\nimport {\r\n    Box,\r\n    Typography,\r\n    Container,\r\n    makeStyles,\r\n    Theme\r\n} from '@material-ui/core';\r\nimport { useSharedContext } from '../../../../context';\r\nimport Dial from './Dial';\r\nimport AnswerCall from './AnswerCall';\r\nimport VideoChat from './VideoChat';\r\n\r\nimport { ComponentSeverity } from '.';\r\n\r\n\r\nconst useStyle = makeStyles((theme: Theme) => ({\r\n    root: {\r\n        backgroundColor: '#fff',\r\n        width: '100%',\r\n        height: '100vh',\r\n        overflow: 'hidden'\r\n    },\r\n    BoxContainer: {\r\n        backgroundColor: '#f1f5f9',\r\n        height: '100%',\r\n        position: 'relative',\r\n        padding: '0 !important',\r\n    },\r\n    footer: {\r\n        position: 'absolute',\r\n        bottom: theme.spacing(1),\r\n        transform: 'translate(-50%, 0)',\r\n        left: '50%',\r\n        width: '100%',\r\n        textAlign: 'center',\r\n    },\r\n    mr:{\r\n        marginRight: theme.spacing(1)\r\n    },\r\n    header: {\r\n        position: 'absolute',\r\n        top: theme.spacing(2),\r\n        right: theme.spacing(2),\r\n        display: 'flex',\r\n        flexDirection: 'row',\r\n        justifyContent: 'flex-end',\r\n        alignItems: 'center',\r\n        width: '100%',\r\n        zIndex: 99999999\r\n    }\r\n}))\r\n\r\ninterface VideoCallContainerProps{\r\n    currentComponent: ComponentSeverity;\r\n}\r\nconst VideoCallContainer: React.FC<VideoCallContainerProps> = ({currentComponent}) => {\r\n    const { currentUser } = useSharedContext();\r\n    const [activeComponent, setActiveComponent] = React.useState<ComponentSeverity>(currentComponent);\r\n    const classes = useStyle();\r\n\r\n    const onCallAccepted = () => {\r\n        setActiveComponent('videoChat');\r\n    };\r\n\r\n    return (\r\n       <Box className={classes.root}>\r\n            <Container maxWidth=\"md\" className={classes.BoxContainer}>\r\n\r\n               {activeComponent === 'dial' && <Dial  currentUser = {currentUser} onCallAccepted = {onCallAccepted} />}\r\n               {activeComponent === 'answer' && <AnswerCall currentUser = {currentUser} onCallAccepted = {onCallAccepted} />}\r\n               {activeComponent === 'videoChat' && <VideoChat currentUser = {currentUser} />}\r\n\r\n                 <Box className={classes.footer}>\r\n                    <Typography component=\"span\" variant=\"body2\" style={{color:'#ccc'}}>\r\n                            Created by Nidhal Bettaibi\r\n                    </Typography>\r\n                 </Box>\r\n            </Container>\r\n       </Box>\r\n    )\r\n}\r\n\r\nexport default VideoCallContainer;\r\n","import React, { useCallback, useContext, useEffect } from 'react';\r\nimport { SocketEvents, useSocketContext } from '../../../../context/SocketContext';\r\nimport { UserModel } from '../../../../models/app.model';\r\nimport { Dialog } from '@material-ui/core';\r\nimport { TransitionProps } from '@material-ui/core/transitions';\r\nimport VideoCallContainer from './VideoCallContainer';\r\nimport Slide from '@material-ui/core/Slide';\r\nimport useToggle from '../../../../hooks/useToggle';\r\n\r\nexport type ComponentSeverity = 'dial' | 'answer' | 'videoChat' | null;\r\n\r\nconst SlideTransition = React.forwardRef(function Transition(\r\n    props: TransitionProps & { children?: React.ReactElement<any, any> },\r\n    ref: React.Ref<unknown>,\r\n  ) {\r\n    return <Slide direction=\"right\" ref={ref} {...props} />;\r\n});\r\n\r\ninterface ContextProps {\r\n    onCallStart: (c: ComponentSeverity, isVideo: boolean) => void;\r\n    onCallEnd : () => void;\r\n    caller: UserModel;\r\n    isVideo: boolean;\r\n}\r\n\r\nconst VideoCallContext = React.createContext({} as ContextProps);\r\n\r\nexport const VideoCallProvider = React.memo(({ children }: { children: JSX.Element }) => {\r\n    const { DialogComponent, onDialogClose, onDialogOpen, show } = useDialogComponent();\r\n    const { socket } = useSocketContext();\r\n    const [currentComponent, setCurrentComponent] = React.useState<ComponentSeverity>(null);\r\n   const [caller, setCaller] = React.useState<UserModel>({} as UserModel);\r\n   const [isVideo, setIsVideo] = React.useState<boolean>(true);\r\n\r\n   useEffect(()=> {\r\n    socket.on(SocketEvents.CALL, ({user, isVideo}: {user: UserModel, isVideo: boolean}) => {\r\n        if(user){\r\n            setCaller(user);\r\n            onCallStart('answer', isVideo);\r\n        }\r\n    });\r\n\r\n    socket.on('disconnect', ()=> {\r\n        if(show){\r\n            onCallEnd()\r\n        }\r\n    });\r\n\r\n    return ()=> {\r\n        socket.off(SocketEvents.CALL);\r\n    }\r\n   }, []);\r\n\r\n    function onCallStart(c: ComponentSeverity, isVideoChat: boolean) {\r\n        setIsVideo(isVideoChat);\r\n        setCurrentComponent(c);\r\n\r\n        setTimeout(() => {\r\n            onDialogOpen();\r\n        })\r\n    };\r\n\r\n    function onCallEnd(){\r\n        onDialogClose();\r\n        setCaller({} as UserModel);\r\n    }\r\n    \r\n    const value = {\r\n        onCallStart,\r\n        onCallEnd,\r\n        caller,\r\n        isVideo\r\n    };\r\n\r\n    return (\r\n        <VideoCallContext.Provider value = {value}>\r\n            <React.Fragment>\r\n                <DialogComponent>\r\n                   <VideoCallContainer currentComponent = {currentComponent} />\r\n                </DialogComponent>\r\n\r\n                {children}\r\n            </React.Fragment>\r\n        </VideoCallContext.Provider>\r\n    );\r\n});\r\n\r\nconst useDialogComponent = () => {\r\n    const { handleClose: onDialogClose, handleOpen: onDialogOpen, show } = useToggle();\r\n\r\n    const DialogComponent: React.FC = useCallback(({children}) => {\r\n        return(\r\n        <Dialog \r\n            onClose={onDialogClose} \r\n            aria-labelledby=\"video-chat-dialog\" \r\n            open={show}\r\n            TransitionComponent={SlideTransition}\r\n            fullScreen={true}>\r\n            {children}\r\n        </Dialog>)\r\n    }, [show]);\r\n\r\n    return {\r\n        DialogComponent,\r\n        onDialogClose,\r\n        onDialogOpen,\r\n        show\r\n    }\r\n};\r\n\r\n\r\nexport const useVideoCallContext = () => {\r\n    const values = useContext(VideoCallContext);\r\n    return values;\r\n};\r\n\r\n","import React from 'react';\r\nimport SwipeableDrawer from '@material-ui/core/SwipeableDrawer';\r\nimport useToggle from '../useToggle';\r\nimport { Box } from '@material-ui/core';\r\nimport useMediaQuery from '@material-ui/core/useMediaQuery';\r\nimport { useTheme, makeStyles,Theme } from '@material-ui/core/styles';\r\n\r\n\r\ntype Anchors = 'left' | 'right' | 'top' | 'bottom';\r\ntype Variant = 'temporary' | 'permanent' | 'persistent';\r\n\r\nconst useStyles = makeStyles((theme: Theme) => ({\r\n    boxWidth: {\r\n        [theme.breakpoints.down('xs')]: {\r\n            width: '100vw'\r\n        },\r\n    },\r\n}));\r\n\r\nconst useSwipeableSidenav = (anchor: Anchors, variant: Variant, width: number) => {\r\n    const classes = useStyles();\r\n    const theme = useTheme();\r\n    const matches = useMediaQuery(theme.breakpoints.up('sm'));\r\n\r\n    const { handleClose: onSidenavClose, handleOpen: onSidenavOpen, show, toggle: onSidenavToggle } = useToggle(true);\r\n\r\n\r\n    const SwipeableSidenav: React.FC = ({ children }) => {\r\n        return (\r\n            <SwipeableDrawer\r\n                variant={matches ? variant : 'temporary'}\r\n                anchor={anchor}\r\n                open={show}\r\n                onOpen={onSidenavOpen}\r\n                onClose={onSidenavClose}>\r\n\r\n                <Box width={width} overflow=\"hidden\" className = {classes.boxWidth}>\r\n                    {children}\r\n                </Box>\r\n            </SwipeableDrawer>\r\n        )\r\n    };\r\n\r\n    return {\r\n        onSidenavClose,\r\n        onSidenavOpen,\r\n        onSidenavToggle,\r\n        SwipeableSidenav,\r\n        show\r\n    };\r\n\r\n};\r\n\r\nexport default useSwipeableSidenav;","import React from 'react';\r\nimport useDialog from '../../../hooks/useDialog';\r\nimport {\r\n    Avatar,\r\n    makeStyles,\r\n    Box\r\n} from '@material-ui/core';\r\nimport { Add } from '@material-ui/icons';\r\nimport WithTooltip from '../../WithTooltip';\r\nimport RoundedButton from '../../RoundedButton';\r\nimport MyTextField from '../../MyTextField';\r\nimport clsx from 'clsx';\r\nimport { Formik, Form } from 'formik';\r\nimport * as yup from 'yup';\r\nimport { useSharedContext } from '../../../context';\r\nimport { newWorkspace } from '../../../store/actions/workspace.actions';\r\nimport useMutation from '../../../hooks/useMutation';\r\n\r\nconst schema = yup.object().shape({\r\n    name: yup.string().required('Name is required')\r\n});\r\n\r\nconst defaultValue = {\r\n    name: ''\r\n};\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    mb: {\r\n        marginBottom: theme.spacing(1)\r\n    },\r\n    mr: {\r\n        marginRight: theme.spacing(1)\r\n    },\r\n    namespaces: {\r\n        backgroundColor: '#2c3344',\r\n        cursor: 'pointer',\r\n        fontSize: '14px',\r\n        color: '#868c94',\r\n        '&:hover': {\r\n            backgroundColor: '#475569',\r\n        }\r\n    },\r\n    icons: {\r\n        color: '#64748B'\r\n    },\r\n}));\r\n\r\nconst NewWorkspaceDialog = () => {\r\n    const { DialogComponent, onDialogClose, onDialogOpen } = useDialog();\r\n    const classes = useStyles();\r\n\r\n    return (\r\n        <React.Fragment>\r\n            <WithTooltip title=\"New Workspace\"\r\n                text=\"Create a new workspace or switch to a different workspace by clicking on the icons above.\">\r\n                <Avatar onClick={onDialogOpen} variant=\"rounded\" className={classes.mb + ' ' + classes.namespaces}>\r\n                     <Add className={classes.icons} />\r\n                </Avatar>\r\n            </WithTooltip>\r\n\r\n            <DialogComponent>\r\n                <NewWorkspace onDialogClose={onDialogClose} />\r\n            </DialogComponent>\r\n        </React.Fragment>\r\n    )\r\n}\r\n\r\nconst NewWorkspace = ({ onDialogClose }: { onDialogClose: () => void }) => {\r\n    const classes = useStyles();\r\n    const { dispatch } = useSharedContext();\r\n    const { loading, onMutate } = useMutation();\r\n\r\n    async function submitHandler(values: any){\r\n        try{\r\n            const res = await onMutate({\r\n                url: '/workspace',\r\n                method: 'POST',\r\n                data: values,\r\n            });\r\n            if(res.success){\r\n                onDialogClose();\r\n                setTimeout(() =>{\r\n                    dispatch(newWorkspace(res.data));\r\n                },0);\r\n            }\r\n        }\r\n        catch(err){\r\n            console.error(err)\r\n        }\r\n    }\r\n\r\n    return (\r\n        <Formik initialValues={defaultValue} validationSchema={schema} onSubmit={(values) => submitHandler(values)}>\r\n            {\r\n                ({handleChange, handleSubmit, handleBlur, values, errors, touched }) => (\r\n                    <Form onSubmit={handleSubmit} autoComplete=\"off\">\r\n                        <Box p={2} borderBottom=\"1px solid lightgray\" height=\"64px\" textAlign=\"right\">\r\n                            <RoundedButton variant=\"outlined\" color=\"default\" className={clsx(classes.icons, classes.mr)}\r\n                                onClick={onDialogClose} >Cancel</RoundedButton>\r\n                            <RoundedButton disableElevation variant=\"contained\" color=\"primary\" type=\"submit\">\r\n                                {loading?'Loading...':'Save'}\r\n                            </RoundedButton>\r\n                        </Box>\r\n                        <Box p={2}>\r\n                            <div className=\"form-group\">\r\n                                <label>Workspace's name</label>\r\n                                <MyTextField name=\"name\" placeholder=\"Workspace name\" fullWidth\r\n                                    variant=\"outlined\"\r\n                                    size=\"small\"\r\n                                    onChange={handleChange}\r\n                                    onBlur={handleBlur}\r\n                                    value={values.name}\r\n                                    error = {touched.name && !!errors.name} \r\n                                    helperText = {touched.name && errors.name}\r\n                                 />\r\n                            </div>\r\n                        </Box>\r\n                    </Form>\r\n                )\r\n            }\r\n        </Formik>\r\n    )\r\n};\r\n\r\n\r\nexport default NewWorkspaceDialog;\r\n","import React from 'react';\r\nimport {\r\n    Avatar,\r\n    Tooltip\r\n} from '@material-ui/core';\r\nimport { makeStyles, Theme } from '@material-ui/core/styles';\r\nimport { useSelector } from 'react-redux';\r\nimport { AppState, WorkspaceModel } from '../../../models/app.model';\r\nimport clsx from 'clsx';\r\nimport { useSharedContext } from '../../../context';\r\n\r\nconst useStyles = makeStyles((theme: Theme) => ({\r\n    mb: {\r\n        marginBottom: theme.spacing(1)\r\n    },\r\n    namespaces: {\r\n        backgroundColor: '#2c3344',\r\n        cursor: 'pointer',\r\n        fontSize: '14px',\r\n        color: '#868c94',\r\n        '&:hover': {\r\n            backgroundColor: '#475569',\r\n        }\r\n    },\r\n    bgActive: {\r\n        backgroundColor: '#475569',\r\n    },\r\n\r\n}))\r\n\r\nconst Workspaces = () => {\r\n    const classes = useStyles();\r\n    const list = useSelector((state: AppState) => state.workspaces);\r\n    const {selectedWorkspace, setSelectedWorkspace} = useSharedContext();\r\n\r\n    function onSwitch (id: string){\r\n        if(id){\r\n            setSelectedWorkspace(id);\r\n        }\r\n    }\r\n\r\n    return (\r\n        <React.Fragment>\r\n            {\r\n                list.map((item: WorkspaceModel) => (\r\n                    <Tooltip title={item.name} key={item._id} placement=\"right\">\r\n                        <Avatar variant=\"rounded\" onClick={()=> onSwitch(item._id || '')}\r\n                            className={clsx(classes.mb , classes.namespaces, {[classes.bgActive]: item._id === selectedWorkspace})}>\r\n                                {item.name.charAt(0).toUpperCase()+item.name.charAt(1).toUpperCase()}\r\n                        </Avatar>\r\n                    </Tooltip>\r\n                ))\r\n            }\r\n        </React.Fragment>\r\n    )\r\n}\r\n\r\nexport default Workspaces\r\n","import React from 'react';\r\nimport {\r\n    Box,\r\n    Grid,\r\n    Avatar,\r\n    Typography,\r\n    Badge,\r\n} from '@material-ui/core';\r\nimport { Theme, makeStyles, withStyles, createStyles } from '@material-ui/core/styles';\r\nimport { AssignmentOutlined, PeopleOutline } from '@material-ui/icons';\r\nimport NewWorkspaceDialog from './NewWorkspace';\r\nimport userAvatar from '../../assets/avatars/profile.jpg';\r\nimport { useHistory } from 'react-router-dom';\r\nimport clsx from 'clsx';\r\nimport Workspaces from './Workspaces';\r\nimport { useSharedContext } from '../../context';\r\nimport { useSelector } from 'react-redux';\r\nimport { AppState, UserModel } from '../../models/app.model';\r\nimport { ClassNameMap } from '@material-ui/core/styles/withStyles';\r\nimport { useSocketContext } from '../../context/SocketContext';\r\n\r\nconst baseURL = process.env.REACT_APP_BASE_URL;\r\n\r\nconst StyledBadge = withStyles((theme: Theme) =>\r\n    createStyles({\r\n        badge: {\r\n            backgroundColor: '#44b700',\r\n            color: '#44b700',\r\n            boxShadow: `0 0 0 2px ${theme.palette.background.paper}`,\r\n            '&::after': {\r\n                position: 'absolute',\r\n                top: 0,\r\n                left: 0,\r\n                width: '100%',\r\n                height: '100%',\r\n                borderRadius: '50%',\r\n                animation: '$ripple 1.2s infinite ease-in-out',\r\n                border: '1px solid currentColor',\r\n                content: '\"\"',\r\n            },\r\n        },\r\n        '@keyframes ripple': {\r\n            '0%': {\r\n                transform: 'scale(.8)',\r\n                opacity: 1,\r\n            },\r\n            '100%': {\r\n                transform: 'scale(2.4)',\r\n                opacity: 0,\r\n            },\r\n        },\r\n    }),\r\n)(Badge);\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    root: {\r\n        backgroundColor: '#0f172a',\r\n        height: '100%',\r\n        minHeight: '100vh',\r\n        overflowY: 'hidden',\r\n        '&:hover': {\r\n            overflowY: 'auto'\r\n        }\r\n    },\r\n    borderRight: {\r\n        borderRight: '1px solid #2c3344'\r\n    },\r\n    textCenter: {\r\n        textAlign: 'center'\r\n    },\r\n    mb: {\r\n        marginBottom: theme.spacing(1)\r\n    },\r\n\r\n    textWhite: {\r\n        color: '#fafafa'\r\n    },\r\n    textSecondary: {\r\n        color: '#868c94'\r\n    },\r\n    icons: {\r\n        color: '#64748B'\r\n    },\r\n    largeAvatar: {\r\n        width: theme.spacing(8),\r\n        height: theme.spacing(8),\r\n        marginBottom: theme.spacing(1)\r\n    },\r\n    navItem: {\r\n        margin: theme.spacing(1, 0),\r\n        padding: '0.25rem 0',\r\n        cursor: 'pointer',\r\n        borderRadius: '5px',\r\n        transition: theme.transitions.create(['padding', 'background'], {\r\n            easing: theme.transitions.easing.easeOut,\r\n            duration: theme.transitions.duration.enteringScreen,\r\n        }),\r\n        '&:hover': {\r\n            backgroundColor: '#2c3344',\r\n            padding: theme.spacing(1),\r\n        }\r\n    },\r\n    activeItem: {\r\n        backgroundColor: '#475569',\r\n        padding: theme.spacing(1),\r\n    }\r\n\r\n}));\r\n\r\ninterface PagesNavProps{\r\n    classes: ClassNameMap;\r\n}\r\n\r\nconst Navigation = React.memo(() => {\r\n    const classes = useStyles();\r\n\r\n    return (\r\n        <Grid container className={clsx(classes.root, 'content-scroll')}>\r\n            <Grid className={classes.borderRight} item xs={3}>\r\n                <Box my={2} px={1} display=\"flex\" flexDirection=\"column\" alignItems=\"center\">\r\n                    <Workspaces />\r\n                    <NewWorkspaceDialog />\r\n                </Box>\r\n            </Grid>\r\n            <Grid item xs>\r\n\r\n                <CurrentUser />\r\n\r\n                <Pages classes={classes} />\r\n\r\n                <Box p={2} >\r\n                    <Typography variant=\"subtitle2\" color=\"primary\">\r\n                        Members\r\n                    </Typography>\r\n                    <small className={classes.textSecondary}>\r\n                        Workspace's Members\r\n                    </small>\r\n\r\n                    <MemberList classes={classes} />\r\n\r\n                </Box>\r\n\r\n            </Grid>\r\n        </Grid>\r\n    )\r\n});\r\n\r\nconst Pages: React.FC<PagesNavProps> = React.memo(({classes}) => {\r\n    const history = useHistory();\r\n\r\n    const navigateTo = (path: string) => {\r\n        history.push(path);\r\n    };\r\n\r\n   \r\n    return (\r\n        <Box p={2} >\r\n            <Typography variant=\"subtitle2\" color=\"primary\">\r\n                Workspace\r\n            </Typography>\r\n            <small className={classes.textSecondary}>\r\n                Workspace Managment\r\n            </small>\r\n\r\n            <Box className={clsx(classes.navItem, { [classes.activeItem]: history.location.pathname === '/team' })} onClick={() => navigateTo('/team')}\r\n                display=\"flex\" flexDirection=\"row\" alignItems=\"center\" justifyContent=\"start\">\r\n                <AssignmentOutlined className={classes.textWhite} />\r\n                <span className={classes.textWhite} style={{ marginLeft: '8px' }} >Scrumboard</span>\r\n            </Box>\r\n\r\n            <Box className={clsx(classes.navItem, { [classes.activeItem]: history.location.pathname === '/team/members' })} onClick={() => navigateTo('/team/members')}\r\n                display=\"flex\" flexDirection=\"row\" alignItems=\"center\" justifyContent=\"start\">\r\n                <PeopleOutline className={classes.textWhite} />\r\n                <span className={classes.textWhite} style={{ marginLeft: '8px' }} >Members</span>\r\n            </Box>\r\n\r\n        </Box>\r\n    )\r\n});\r\n\r\nconst MemberList: React.FC<PagesNavProps> = React.memo (({classes}) => {\r\n    const members = useSelector((state: AppState) => state.members);\r\n    const history = useHistory();\r\n    const { onlineUsers } = useSocketContext();\r\n\r\n    const navigateTo = (path: string) => {\r\n        history.push(path);\r\n    };\r\n\r\n    const isOline = React.useCallback( (id: string | undefined): boolean => {\r\n        if(id){\r\n           return onlineUsers.hasOwnProperty(id) && !onlineUsers[id].lastSeen ? true: false;\r\n        }\r\n        return false;\r\n    }, [onlineUsers]);\r\n\r\n    return (\r\n        <>\r\n            {\r\n                members.map((item: UserModel) => (\r\n                    <Box key={item._id} className={clsx(classes.navItem, { [classes.activeItem]: history.location.pathname === `/team/chat/${item._id}` })} onClick={() => navigateTo(`/team/chat/${item._id}`)}\r\n                        display=\"flex\" flexDirection=\"row\" alignItems=\"center\" justifyContent=\"start\">\r\n\r\n                       { isOline(item._id) ? <StyledBadge\r\n                            overlap=\"circular\"\r\n                            anchorOrigin={{\r\n                                vertical: 'bottom',\r\n                                horizontal: 'right',\r\n                            }}\r\n                            variant=\"dot\"\r\n                        >\r\n                            <Avatar alt=\"team member\" src={item.avatar? `${baseURL}/files/${item.avatar}` : userAvatar} />\r\n                        </StyledBadge>:\r\n                        <Avatar alt=\"team member\" src={item.avatar? `${baseURL}/files/${item.avatar}` : userAvatar} />\r\n                       }\r\n                        <Box display=\"flex\" flexDirection=\"column\" ml={1} className={classes.textWhite}>\r\n                            <span >{item.name}</span>\r\n                            <small >{item.title || 'Not mention'}</small>\r\n                        </Box>\r\n                    </Box>\r\n                ))\r\n            }\r\n        </>\r\n    )\r\n\r\n});\r\n\r\nconst CurrentUser = () => {\r\n    const classes = useStyles();\r\n    const { currentUser } = useSharedContext();\r\n\r\n    return (\r\n        <Box borderBottom=\"1px solid #2c3344\" textAlign=\"center\" display=\"flex\" flexDirection=\"column\" alignItems=\"center\" justifyContent=\"center\"\r\n            style={{ padding: '1.5rem 1rem' }}>\r\n            <Avatar alt=\"user avatar\" src={currentUser.avatar? `${baseURL}/files/${currentUser.avatar}` : userAvatar} className={classes.largeAvatar} />\r\n            <Typography variant=\"subtitle2\" className={clsx(classes.textWhite, 'text-capitalize')} gutterBottom>\r\n                {currentUser.name || 'Unknown'}\r\n            </Typography>\r\n            <small className={classes.textSecondary}>\r\n                {currentUser.email || 'unknown@gmail.com'}\r\n            </small>\r\n        </Box>\r\n    )\r\n};\r\n\r\nexport default Navigation;\r\n","import React, {useEffect} from 'react';\r\nimport {\r\n    IconButton,\r\n    Box,\r\n    Badge,\r\n    MenuItem,\r\n    Divider,\r\n    Typography,\r\n    List,\r\n    ListItem,\r\n    ListItemAvatar,\r\n    Avatar,\r\n    ListItemText,\r\n    ListItemSecondaryAction,\r\n    Tooltip,\r\n    useMediaQuery\r\n} from '@material-ui/core';\r\nimport { Menu, CloseOutlined, NotificationsOutlined, SearchOutlined, AccountCircleOutlined, ExitToAppOutlined, SettingsApplicationsOutlined, NotificationsNoneOutlined } from '@material-ui/icons';\r\nimport { createStyles, makeStyles, Theme, useTheme } from '@material-ui/core/styles';\r\nimport { useHistory } from 'react-router-dom';\r\nimport { useSharedContext } from '../../context';\r\nimport clsx from 'clsx';\r\nimport axios from 'axios';\r\nimport useSwipeableSidenav from '../../hooks/useSwipeableSidenav';\r\nimport UsePopover from '../../hooks/usePopover';\r\nimport Navigation from '../Navigation';\r\n\r\nconst drawerWidth = 280;\r\n\r\nconst useStyles = makeStyles((theme: Theme) =>\r\n    createStyles({\r\n        root: {\r\n            zIndex: theme.zIndex.drawer + 1,\r\n            flexGrow: 1,\r\n            display: 'flex',\r\n            flexDirection: 'row',\r\n            justifyContent: 'space-between',\r\n            alignItems: 'center',\r\n            backgroundColor: '#fff',\r\n            padding: '0 1rem',\r\n            height: '56px',\r\n            boxShadow: '0 .125rem .25rem rgba(0,0,0,.075)',\r\n            position: 'sticky',\r\n            top: 0\r\n        },\r\n        menuButton: {\r\n            marginRight: theme.spacing(1),\r\n        },\r\n        icons: {\r\n            color: '#64748B'\r\n        },\r\n        menuItem: {\r\n            padding: '0.8rem '\r\n        },\r\n        primaryHeader: {\r\n            backgroundColor: theme.palette.primary.main,\r\n            padding: theme.spacing(2),\r\n            color: '#fafafa'\r\n        },\r\n        inline: {\r\n            display: 'inline',\r\n        },\r\n        listItem: {\r\n            backgroundColor: '#fff',\r\n            '&:hover': {\r\n                backgroundColor: '#fafafa', \r\n            }\r\n        },\r\n        activeItem: {\r\n            backgroundColor: '#f1f5f9 !important',\r\n        },\r\n    }),\r\n);\r\n\r\nconst Header = () => {\r\n    const classes = useStyles();\r\n\r\n    return (\r\n        <header className={classes.root}>\r\n            <SideBarComponent />\r\n\r\n            <Box>\r\n                <IconButton edge=\"start\" color=\"inherit\" aria-label=\"Search\" className={classes.menuButton}>\r\n                    <SearchOutlined className={classes.icons} />\r\n                </IconButton>\r\n\r\n                <NotificationMenu />\r\n                <AccountMenu />\r\n            </Box>\r\n        </header>\r\n    )\r\n};\r\n\r\nconst SideBarComponent = () => {\r\n    const { SwipeableSidenav, onSidenavToggle, show } = useSwipeableSidenav('left', 'persistent', drawerWidth);\r\n    const classes = useStyles();\r\n    const theme = useTheme();\r\n    const matches = useMediaQuery(theme.breakpoints.up('sm'));\r\n    let main: HTMLElement | null = document.getElementById('app-main');\r\n\r\n    useEffect(() => {\r\n        if(main){\r\n            if(show){\r\n               main.style.marginLeft = matches ? `${drawerWidth}px`: `0px`;\r\n            }\r\n            else{\r\n                main.style.marginLeft = `${0}px`;\r\n            }\r\n        }\r\n    }, [show, matches, main]);\r\n \r\n    return (\r\n        <React.Fragment>\r\n            <IconButton onClick={onSidenavToggle}\r\n                edge=\"start\" className={classes.menuButton} color=\"inherit\" aria-label=\"menu\">\r\n                <Menu className={classes.icons} />\r\n            </IconButton>\r\n\r\n            <SwipeableSidenav>\r\n                <Navigation />\r\n            </SwipeableSidenav>\r\n        </React.Fragment>\r\n    )\r\n}\r\n\r\nconst NotificationMenu = () => {\r\n    const classes = useStyles();\r\n    const { PopoverComponent, handleClick } = UsePopover();\r\n\r\n    return (\r\n        <React.Fragment>\r\n            <IconButton aria-describedby=\"notification-menu\" edge=\"start\" color=\"inherit\" aria-label=\"messages\"\r\n                className={classes.menuButton} onClick={handleClick}>\r\n                    <NotificationsOutlined className={classes.icons} />\r\n                {/* <Badge badgeContent={4} color=\"secondary\">\r\n                    <NotificationsOutlined className={classes.icons} />\r\n                </Badge> */}\r\n            </IconButton>\r\n\r\n            <PopoverComponent id=\"notification-menu\">\r\n                <React.Fragment>\r\n                    <Notifications />\r\n                </React.Fragment>\r\n            </PopoverComponent>\r\n\r\n        </React.Fragment>\r\n    )\r\n};\r\n\r\nconst AccountMenu = () => {\r\n    const history = useHistory();\r\n    const classes = useStyles();\r\n    const { currentUser } = useSharedContext();\r\n    const { PopoverComponent, handleClick, handleClose } = UsePopover();\r\n\r\n    const navigateTo = (path: string) => {\r\n        history.push(path);\r\n        handleClose();\r\n    };\r\n\r\n    const logout = async () => {\r\n        try{\r\n            const { data } = await axios.post(`/auth/logout`);\r\n            if(data.success){\r\n                document.cookie = \"jwt=;\";\r\n                localStorage.clear();\r\n                sessionStorage.clear();\r\n                history.push('/login');\r\n            }\r\n            else{\r\n                handleClose();\r\n            }\r\n        }\r\n        catch(err){\r\n            throw err;\r\n        }\r\n    }\r\n\r\n    return (\r\n        <React.Fragment>\r\n            <IconButton aria-describedby=\"account-menu\" color=\"inherit\" aria-label=\"profile\" onClick={handleClick}>\r\n                <AccountCircleOutlined className={classes.icons} />\r\n            </IconButton>\r\n\r\n            <PopoverComponent id=\"account-menu\">\r\n                <React.Fragment>\r\n                    <Box py={1} mx={2}>\r\n                        <Typography variant=\"subtitle2\">\r\n                            Signed in as\r\n                        </Typography>\r\n                        <small>{currentUser.email || 'unknown@gmail.com'}</small>\r\n                    </Box>\r\n                    <Divider />\r\n                    <MenuItem onClick={() => navigateTo('/team/profile')} className={classes.menuItem}>\r\n                        <AccountCircleOutlined className={classes.icons} />\r\n                        <span style={{ marginLeft: '0.8rem' }}>Profile</span>\r\n                    </MenuItem>\r\n                    <MenuItem onClick={() => navigateTo('/team/setting')} className={classes.menuItem}>\r\n                        <SettingsApplicationsOutlined className={classes.icons} />\r\n                        <span style={{ marginLeft: '0.8rem' }}>Setting</span>\r\n                    </MenuItem>\r\n                    <Divider />\r\n                    <MenuItem onClick={logout} className={classes.menuItem}>\r\n                        <ExitToAppOutlined className={classes.icons} />\r\n                        <span style={{ marginLeft: '0.8rem' }}>Logout</span>\r\n                    </MenuItem>\r\n                </React.Fragment>\r\n            </PopoverComponent>\r\n        </React.Fragment>\r\n    )\r\n};\r\n\r\nconst Notifications = () => {\r\n    const classes = useStyles();\r\n\r\n    return (\r\n        <Box>\r\n            <Box className={classes.primaryHeader}>\r\n                <Typography variant=\"subtitle1\" style={{ fontWeight: 600 }}>\r\n                    Notifications\r\n                </Typography>\r\n            </Box>\r\n            <Box className=\"content-scroll\" minWidth=\"350px\" maxWidth=\"420px\" maxHeight=\"400px\" overflow=\"auto\">\r\n                {/* <List className=\"bg-white p-0\">\r\n                    <ListItem alignItems=\"flex-start\" className={clsx(classes.listItem,classes.activeItem)}>\r\n                        <ListItemAvatar>\r\n                            <Avatar alt=\"Remy Sharp\" src=\"/static/images/avatar/1.jpg\" />\r\n                        </ListItemAvatar>\r\n                        <ListItemText\r\n                            primary=\"Brunch this weekend?\"\r\n                            secondary={\r\n                                <React.Fragment>\r\n                                    <Typography\r\n                                        component=\"span\"\r\n                                        variant=\"body2\"\r\n                                        className={classes.inline}\r\n                                        color=\"textPrimary\"\r\n                                    >\r\n                                        Ali Connors\r\n                                    </Typography>\r\n                                    {\" — I'll be in your neighborhood doing errands this…\"}\r\n                                </React.Fragment>\r\n                            }\r\n                        />\r\n                        <ListItemSecondaryAction>\r\n                            <Tooltip title=\"remove\">\r\n                                <IconButton edge=\"end\" aria-label=\"delete\" size=\"small\">\r\n                                    <CloseOutlined />\r\n                                </IconButton>\r\n                            </Tooltip>\r\n                        </ListItemSecondaryAction>\r\n                    </ListItem>\r\n\r\n                    <ListItem alignItems=\"flex-start\" className={clsx(classes.listItem)}>\r\n                        <ListItemAvatar>\r\n                            <Avatar alt=\"Remy Sharp\" src=\"/static/images/avatar/1.jpg\" />\r\n                        </ListItemAvatar>\r\n                        <ListItemText\r\n                            primary=\"Brunch this weekend?\"\r\n                            secondary={\r\n                                <React.Fragment>\r\n                                    <Typography\r\n                                        component=\"span\"\r\n                                        variant=\"body2\"\r\n                                        className={classes.inline}\r\n                                        color=\"textPrimary\"\r\n                                    >\r\n                                        Ali Connors\r\n                                    </Typography>\r\n                                    {\" — I'll be in your neighborhood doing errands this…\"}\r\n                                </React.Fragment>\r\n                            }\r\n                        />\r\n                        <ListItemSecondaryAction>\r\n                            <Tooltip title=\"remove\">\r\n                                <IconButton edge=\"end\" aria-label=\"delete\" size=\"small\">\r\n                                    <CloseOutlined />\r\n                                </IconButton>\r\n                            </Tooltip>\r\n                        </ListItemSecondaryAction>\r\n                    </ListItem>\r\n\r\n                </List> */}\r\n                <Box display=\"flex\" flexDirection=\"column\" justifyContent=\"center\" alignItems=\"center\"\r\n                width=\"100%\" height=\"250px\">\r\n                    <NotificationsNoneOutlined color=\"disabled\" style={{fontSize: '55px', marginBottom: '.5rem'}} />\r\n                    <Typography component=\"div\" variant=\"body2\" color=\"textSecondary\">\r\n                        No notifications found\r\n                    </Typography>\r\n                </Box>\r\n            </Box>\r\n        </Box>\r\n    )\r\n}\r\n\r\nexport default Header;\r\n","import React, { lazy, Suspense } from 'react';\r\nimport { Switch, Route } from 'react-router-dom';\r\nimport { createStyles, makeStyles, Theme } from '@material-ui/core/styles';\r\nimport { ContextProvider } from '../../context';\r\nimport { NotificationProvider } from '../../context/NotificationContext';\r\nimport { SocketProvider } from '../../context/SocketContext';\r\nimport { Box, CircularProgress, Typography } from '@material-ui/core';\r\nimport Header from '../../components/Header';\r\nimport { VideoCallProvider } from './Chat/VideoCallContext';\r\n\r\nconst Board = lazy(() => import('./Board'));\r\nconst Scrumboard = lazy(() => import('./Board/Scrumboard'));\r\nconst Members = lazy(() => import('./Members'));\r\nconst Chat = lazy(() => import('./Chat'));\r\nconst Profile = lazy(() => import('./Profile'));\r\nconst Setting = lazy(() => import('./Setting'));\r\n\r\nconst useStyles = makeStyles((theme: Theme) =>\r\n    createStyles({\r\n        open: {\r\n            [theme.breakpoints.up('sm')]: {\r\n\r\n                transition: theme.transitions.create(['margin', 'width'], {\r\n                    easing: theme.transitions.easing.easeOut,\r\n                    duration: theme.transitions.duration.enteringScreen,\r\n                }),\r\n            },\r\n        }\r\n    }),\r\n);\r\n\r\nconst Team = () => {\r\n    const classes = useStyles();\r\n    return (\r\n        <ContextProvider>\r\n            <SocketProvider>\r\n                <VideoCallProvider>\r\n                    <NotificationProvider>\r\n                        <React.Fragment>\r\n                            <main id=\"app-main\" className={classes.open}>\r\n                                <Header />\r\n                                <Suspense fallback={<LoadingPage />}>\r\n                                    <Switch>\r\n                                        <Route path=\"/team\" exact component={Board} />\r\n                                        <Route path=\"/team/scrumboard/:projectId\" component={Scrumboard} />\r\n                                        <Route path=\"/team/members\" component={Members} />\r\n                                        <Route path=\"/team/profile\" component={Profile} />\r\n                                        <Route path=\"/team/setting\" component={Setting} />\r\n                                        <Route path=\"/team/chat/:memberId\" component={Chat} />\r\n                                    </Switch>\r\n                                </Suspense>\r\n                            </main>\r\n                        </React.Fragment>\r\n                    </NotificationProvider>\r\n                </VideoCallProvider>\r\n            </SocketProvider>\r\n        </ContextProvider>\r\n    )\r\n};\r\n\r\nconst LoadingPage = () => {\r\n\r\n    return (\r\n        <Box display=\"flex\" flexDirection=\"column\" alignItems=\"center\" justifyContent=\"center\"\r\n            width=\"100%\" height=\"calc(100vh - 56px)\">\r\n            <Typography component=\"div\" variant=\"subtitle1\" color=\"textSecondary\" gutterBottom>\r\n                Loading....\r\n            </Typography>\r\n            <CircularProgress disableShrink />\r\n        </Box>\r\n    )\r\n};\r\n\r\nexport default Team;\r\n"],"sourceRoot":""}