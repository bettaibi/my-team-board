(this["webpackJsonpmy-team-board"]=this["webpackJsonpmy-team-board"]||[]).push([[11],{143:function(e,t,n){"use strict";n.d(t,"a",(function(){return v})),n.d(t,"b",(function(){return A}));var a=n(3),r=n(141),c=n.n(r),o=n(142),i=n(140),s=n(0),l=n.n(s),u=n(56),d=n(208),j=n(237),p=n(209),b=n(238),f=n(42),m=n.n(f),h=n(62),O=n(2),x={name:"",email:"",title:"",avatar:"",country:"",city:"",address:"",_id:"",phone:""},g=l.a.createContext({}),v=function(e){var t=e.children,n=l.a.useState(localStorage.getItem("workspace")),r=Object(i.a)(n,2),f=r[0],v=r[1],A=l.a.useState(!0),C=Object(i.a)(A,2),y=C[0],w=C[1],k=l.a.useState(""),E=Object(i.a)(k,2),S=E[0],N=E[1],D=l.a.useState(x),I=Object(i.a)(D,2),T=I[0],B=I[1],_=Object(u.c)();Object(s.useEffect)((function(){function e(){return(e=Object(o.a)(c.a.mark((function e(){var t,n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!f){e.next=8;break}return w(!0),e.next=5,m.a.get("/workspace/switch/".concat(f));case 5:t=e.sent,(n=t.data).success&&(localStorage.setItem("workspace",f),_(Object(d.c)(n.data.projects)),_(Object(j.c)(n.data.members)),_(Object(b.b)()),N(n.data.owner),w(!1));case 8:e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.error(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[f]),Object(s.useEffect)((function(){function e(){return(e=Object(o.a)(c.a.mark((function e(){var t,n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m.a.get("/auth/user");case 3:t=e.sent,(n=t.data).success&&B(n.data),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),Object(s.useEffect)((function(){(function(){var e=Object(o.a)(c.a.mark((function e(){var t,n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m.a.get("/workspace");case 3:t=e.sent,(n=t.data).success&&(_(Object(p.c)(n.data)),null===f&&n.data.length>0&&(v(n.data[0]._id),N(n.data[0].owner._id)),w(!1)),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}})()()}),[]);var R={dispatch:_,selectedWorkspace:f,setSelectedWorkspace:v,currentUser:T,updateCurrentUser:function(e){B((function(t){return Object(a.a)(Object(a.a)({},t),e)}))},owner:S};return Object(O.jsx)(g.Provider,{value:R,children:Object(O.jsx)(l.a.Fragment,{children:y?Object(O.jsx)(h.a,{}):t})})},A=function(){return Object(s.useContext)(g)}},144:function(e,t,n){"use strict";var a=n(3),r=(n(0),n(599)),c=n(12),o=n(20),i=n(2),s=Object(c.a)((function(e){return{root:{"& .MuiOutlinedInput-input":{zIndex:e.zIndex.drawer},"& .MuiOutlinedInput-root":{"& .MuiOutlinedInput-inputAdornedStart":{zIndex:e.zIndex.drawer},"& .MuiInputAdornment-positionStart":{zIndex:e.zIndex.drawer},"& fieldset":{backgroundColor:e.palette.common.white,border:"1px solid #ced4da",fontSize:16,width:"auto",boxShadow:"0 1px 2px 0 #0000000d",zindex:75,borderRadius:4,color:"#333",transition:e.transitions.create(["border-color","box-shadow"])},"&.Mui-focused fieldset":{boxShadow:"".concat(Object(o.a)(e.palette.primary.main,.25)," 0 0 0 0.2rem"),borderColor:e.palette.primary.main,borderWidth:"1px"}}}}}))(r.a);t.a=function(e){return Object(i.jsx)(s,Object(a.a)({},e))}},146:function(e,t,n){"use strict";var a=n(140),r=n(0);t.a=function(e){var t=Object(r.useState)(e||!1),n=Object(a.a)(t,2),c=n[0],o=n[1];return{toggle:function(){o((function(e){return!e}))},handleOpen:function(){o(!0)},handleClose:function(){o(!1)},show:c}}},148:function(e,t,n){"use strict";var a=n(141),r=n.n(a),c=n(3),o=n(142),i=n(140),s=n(0),l=n.n(s),u=n(210),d=n(42),j=n.n(d);t.a=function(){var e=l.a.useState(!1),t=Object(i.a)(e,2),n=t[0],a=t[1],s=Object(u.b)().showMsg;function d(){return(d=Object(o.a)(r.a.mark((function e(t){var n,o;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a(!0),e.next=4,j()(Object(c.a)({},t));case 4:return n=e.sent,(o=n.data).success?(s(o.message,"success"),a(!1)):(s(o.message,"error"),a(!1)),e.abrupt("return",o);case 10:throw e.prev=10,e.t0=e.catch(0),a(!1),e.t0;case 14:case"end":return e.stop()}}),e,null,[[0,10]])})))).apply(this,arguments)}return{loading:n,onMutate:function(e){return d.apply(this,arguments)}}}},151:function(e,t,n){"use strict";t.a="data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wCEAAMDAwMDAwQEBAQFBQUFBQcHBgYHBwsICQgJCAsRCwwLCwwLEQ8SDw4PEg8bFRMTFRsfGhkaHyYiIiYwLTA+PlQBAwMDAwMDBAQEBAUFBQUFBwcGBgcHCwgJCAkICxELDAsLDAsRDxIPDg8SDxsVExMVGx8aGRofJiIiJjAtMD4+VP/CABEIAGAAYAMBIgACEQEDEQH/xAAbAAEBAQADAQEAAAAAAAAAAAAACAcEBQYJA//aAAgBAQAAAAD6QAADwOO8XevYAYbJIuDSARTloq7egSXhYp6igRLmI1a0gTDOopSlAfj87eveqv4BFOWtcswHV4jLIpzdO4eHwfE+GDlbRvkIgA//xAAXAQEBAQEAAAAAAAAAAAAAAAAAAwIB/9oACAECEAAAAKtMm6o5bqlh26HHboctoZ//xAAXAQADAQAAAAAAAAAAAAAAAAAAAQMC/9oACAEDEAAAAMCGGYl2ZiW0KDsxRLOWAN//xAA2EAABAwIDBQQIBgMAAAAAAAABAgMEBREGByEAEiAxURATQYEIFCIjMGFxkSQmMkBCgmJyof/aAAgBAQABPwD9hiTMvCWGVrakzO/kp0MaOnvFg9DyCdqj6QNQUtQptHYQnwVIWpwnyTu22gekBXEOj16lQnW/EMlbSvuor2wljihYyiKdgu7rqdHYztg4g/S+o+Y+BnJjuTh+KzR6c6pqXMbK3XUmym2b29noVEc9iSo3PPtBKSCDYjkRtlXiGRiPB8Z6SvvJEVa4zqzqVluxST87KF+POZxxeYFRC+TbUdKPp3aTw5AH8t1QdKhf7tp48+aYiPiWFOQpP4uFZQ8d5o2v9lcPo+SUKgVuNdO8l9le742UCL/8484XZa8f1Jt51SktJZSyDyQgtpVYeZ4cl5MhjHsNtsqCH2JCHR1SEFYv5p487MGVV+rorsGI4/HVEAlFA3y2Wr+0oD+NuAAqNhz2yYwJWabVnK1VIbkVAjFEdDuiypwi6t3mLAcciO1KjvMOp3m3UKQtPVKxY7VenuUmqToDmq4kl1lR6ltRTftwJDM/GNCZ3N4GoMqUn/FtQUr4Ob1Tw/UsVvKpbLiXmVFma5oEPONm28mx8ie3KLEeHMPVtZqTDpky1NMR5ACShgKNlFVyLX6jjqtbpFDj+s1KYxFa8FOrAv8AIDmT9NsV550hMCTGoLT7slbZS3JWju0IvpvAE3JHhe2xJUVEquTqSeDB+eFMap0SHXmpIfZbCDKQkOJWBoFKF7362vtR6/RsQR+/pk1iU347itR/snmnz7cQ5iYSwyVtzJ6VSE847PvXL9CBon+xG2JM9azO32aLGRBaOgeXZx4/Qck7T6jUKpIVJnSXZDyubjqys/c8cKfNp0hEmJJdjPJ/S40soUPMbYbzzr9O3GawwiosjTvRZt0Dy0VthzMbCWKChqJOS1IVyjP+7cv0F9Ff1J2JKjc6k8z8MEpNxoRyO3//xAAdEQEAAwACAwEAAAAAAAAAAAABAAIQICESMTJB/9oACAECAQE/AMK2fyNbB64UBdt1Z2n1t/rRTGKugsOiMRMKV4+BP//EABsRAQACAwEBAAAAAAAAAAAAAAEAEAISISAx/9oACAEDAQE/AK2IZD4zULx+Xn8vB5aDR1gBexHrDjDIa3fO7P/Z"},167:function(e,t,n){"use strict";n.d(t,"h",(function(){return r})),n.d(t,"e",(function(){return c})),n.d(t,"b",(function(){return o})),n.d(t,"g",(function(){return i})),n.d(t,"d",(function(){return s})),n.d(t,"a",(function(){return l})),n.d(t,"i",(function(){return u})),n.d(t,"f",(function(){return d})),n.d(t,"c",(function(){return j}));var a=n(6),r=function(e){return{payload:e,type:a.a.NEW_BOARD}},c=function(e,t){return{id:e,payload:t,type:a.a.EDIT_BOARD}},o=function(e){return{id:e,type:a.a.DELETE_BOARD}},i=function(e,t){return{id:e,payload:t,type:a.a.NEW_ASPECT}},s=function(e,t){return{id:e,payload:t,type:a.a.EDIT_ASPECT}},l=function(e,t){return{id:e,payload:t,type:a.a.DELETE_ASPECT}},u=function(e,t){return{id:e,payload:t,type:a.a.NEW_SPRINT}},d=function(e,t){return{id:e,payload:t,type:a.a.EDIT_SPRINT}},j=function(e,t){return{id:e,payload:t,type:a.a.DELETE_SPRINT}}},170:function(e,t,n){"use strict";n.d(t,"a",(function(){return g})),n.d(t,"b",(function(){return v})),n.d(t,"c",(function(){return A}));var a=n(140),r=n(0),c=n.n(r),o=n(143),i=n(434),s=n.n(i),l=n(238),u=n(209),d=n(542),j=n(213),p=n(146),b=n(208),f=n(167),m=n(196),h=n(2),O=s()("".concat("ws://my-team-board.herokuapp.com/","/chat")),x=c.a.createContext({}),g={ONLINE_USERS:"ONLINE_USERS",NEW_MESSAGE:"NEW_MESSAGE",CALL:"CALL",ANSWER:"ANSWER",CALL_ACCEPTED:"CALL_ACCEPTED",CALL_END:"CALL_END",EMIT_SIGNAL:"EMIT_SIGNAL",DATA_STREAM:"DATA_STREAM"},v=function(e){var t=e.children,n=Object(o.b)(),i=n.currentUser,s=n.selectedWorkspace,d=n.dispatch,p=c.a.useState({}),v=Object(a.a)(p,2),A=v[0],y=v[1],w=C(),k=w.DialogComponent,E=w.onDialogOpen,S=w.onDialogClose,N=c.a.useMemo((function(){return new Audio("".concat("/my-team-board","/audio/wsn.mp3"))}),[]);Object(r.useEffect)((function(){return N.load(),function(){N.pause(),N.currentTime=0}}),[]),Object(r.useEffect)((function(){return s&&(O.on(g.ONLINE_USERS,(function(e){y(e)})),O.on(g.NEW_MESSAGE,(function(e){d(Object(l.a)(e,e.sender)),N.play()}))),function(){s&&(O.off(g.ONLINE_USERS),O.off(g.NEW_MESSAGE))}}),[s]),Object(r.useEffect)((function(){return s&&O.emit("joinWorkspace",{workspaceId:s,userId:i._id}),function(){s&&O.emit("leaveWorkspace",{workspaceId:s,userId:i._id})}}),[s]),Object(r.useEffect)((function(){return O.on("new_workspace",(function(e){d(Object(u.c)(e))})),O.on("delete_workspace",(function(e){var t=e.workspaces,n=e.workspaceId;s==n?E():d(Object(u.c)(t))})),O.on("removed_workspace",(function(e){e==s?E():d(Object(u.a)(e))})),O.on("new_project",(function(e){e.workspace==s&&d(Object(b.b)(e))})),O.on("edit_project",(function(e){e.workspace==s&&d(Object(b.d)(e))})),O.on("new_aspect",(function(e){var t=e.workspace,n=e.aspect;t==s&&d(Object(f.g)(n.project,n))})),O.on("delete_aspect",(function(e){var t=e.workspace,n=e.aspectId,a=e.projectId;t==s&&d(Object(f.a)(a,n))})),O.on("edit_aspect",(function(e){var t=e.workspace,n=e.aspect;t==s&&d(Object(f.d)(n.project,n))})),O.on("sprint_change",(function(e){var t=e.workspace,n=e.projectId;t==s&&Object(m.a)(n).then((function(e){e&&d(Object(f.h)(e))})).catch((function(e){return console.error(e)}))})),function(){O.off("new_workspace"),O.off("delete_workspace"),O.off("removed_workspace"),O.off("new_project"),O.off("edit_project"),O.off("new_aspect"),O.off("delete_aspect"),O.off("edit_aspect"),O.off("sprint_change")}}),[]);var D={socket:O,onlineUsers:A,sendMessage:function(e,t,n){e&&O.emit("sendMessage",{workspaceId:e,receiverId:t,data:n})}};return Object(h.jsx)(x.Provider,{value:D,children:Object(h.jsxs)(c.a.Fragment,{children:[Object(h.jsx)(k,{children:Object(h.jsx)(j.a,{onDialogClose:S})}),t]})})},A=function(){return Object(r.useContext)(x)},C=function(){var e=Object(p.a)(),t=e.handleClose,n=e.handleOpen,a=e.show;return{DialogComponent:Object(r.useCallback)((function(e){var n=e.children;return Object(h.jsx)(d.a,{onClose:t,"aria-labelledby":"session-expired-dialog",open:a,children:n})}),[a]),onDialogClose:t,onDialogOpen:n,show:a}}},184:function(e,t,n){"use strict";var a=n(3),r=n(0),c=n.n(r),o=n(33),i=n(542),s=n(146),l=n(136),u=n(537),d=n(543),j=n(2),p=c.a.forwardRef((function(e,t){return Object(j.jsx)(u.a,Object(a.a)({direction:"right",ref:t},e))})),b=c.a.forwardRef((function(e,t){return Object(j.jsx)(d.a,Object(a.a)({ref:t},e))}));t.a=function(e){var t=Object(s.a)(),n=t.handleClose,a=t.handleOpen,c=t.show,u=Object(o.a)(),d=Object(l.a)(u.breakpoints.down("xs")),f=e||d;return{DialogComponent:Object(r.useCallback)((function(e){var t=e.children;return Object(j.jsx)(i.a,{onClose:n,"aria-labelledby":"customized-dialog-content",open:c,TransitionComponent:f?p:b,fullScreen:f,children:t})}),[c,f]),onDialogClose:n,onDialogOpen:a}}},193:function(e,t,n){"use strict";var a=n(140),r=n(0),c=n(612),o=n(607),i=n(537),s=n(2);t.a=function(e){var t=Object(r.useState)({message:"",open:!1,type:"success"}),n=Object(a.a)(t,2),l=n[0],u=n[1];var d=function(){u({message:"",open:!1,type:"success"})},j=e||{vertical:"top",horizontal:"right"},p=j.vertical,b=j.horizontal;return{showMsg:function(e,t){u({message:e,open:!0,type:t})},SnackbarComponent:Object(r.useCallback)((function(){return Object(s.jsx)(c.a,{open:l.open,autoHideDuration:9e4,onClose:d,anchorOrigin:{vertical:p,horizontal:b},TransitionComponent:i.a,children:Object(s.jsx)(o.a,{onClose:d,severity:l.type,children:l.message})},p+b)}),[l,p,b])}}},196:function(e,t,n){"use strict";n.d(t,"c",(function(){return s})),n.d(t,"b",(function(){return l})),n.d(t,"a",(function(){return d}));var a=n(141),r=n.n(a),c=n(142),o=n(42),i=n.n(o);function s(e,t){return t.hasOwnProperty(e)&&!t[e].lastSeen}function l(e,t){return u.apply(this,arguments)}function u(){return(u=Object(c.a)(r.a.mark((function e(t,n){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.hasOwnProperty(t)){e.next=4;break}return e.abrupt("return",n[t].socketId);case 4:return e.abrupt("return","");case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var d=function(){var e=Object(c.a)(r.a.mark((function e(t){var n,a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,i.a.get("/aspects/".concat(t));case 3:if(n=e.sent,!(a=n.data).success){e.next=9;break}return e.abrupt("return",a.data);case 9:return e.abrupt("return",void 0);case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),console.error(e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t){return e.apply(this,arguments)}}()},208:function(e,t,n){"use strict";n.d(t,"c",(function(){return r})),n.d(t,"b",(function(){return c})),n.d(t,"d",(function(){return o})),n.d(t,"a",(function(){return i}));var a=n(6),r=function(e){return{payload:e,type:a.a.SET_PROJECTS}},c=function(e){return{payload:e,type:a.a.NEW_PROJECT}},o=function(e){return{payload:e,type:a.a.UPDATE_PROJECT}},i=function(e){return{payload:e,type:a.a.DELETE_PROJECT}}},209:function(e,t,n){"use strict";n.d(t,"c",(function(){return r})),n.d(t,"b",(function(){return c})),n.d(t,"d",(function(){return o})),n.d(t,"a",(function(){return i}));var a=n(6),r=function(e){return{payload:e,type:a.a.SET_WORKSPACES}},c=function(e){return{payload:e,type:a.a.NEW_WORKSPACE}},o=function(e){return{payload:e,type:a.a.UPDATE_WORKSPACE}},i=function(e){return{payload:e,type:a.a.DELETE_WORKSPACE}}},210:function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return l}));var a=n(0),r=n.n(a),c=n(193),o=n(2),i=r.a.createContext({}),s=function(e){var t=e.children,n=Object(c.a)({horizontal:"right",vertical:"top"}),a=n.showMsg,s=n.SnackbarComponent,l={showMsg:a};return Object(o.jsx)(i.Provider,{value:l,children:Object(o.jsxs)(r.a.Fragment,{children:[Object(o.jsx)(s,{}),t]})})},l=function(){return Object(a.useContext)(i)}},213:function(e,t,n){"use strict";var a=n(141),r=n.n(a),c=n(142),o=n(140),i=n(0),s=n.n(i),l=n(25),u=n(15),d=n(55),j=n(42),p=n.n(j),b=n(2);t.a=function(e){var t=e.onDialogClose,n=s.a.useState(!1),a=Object(o.a)(n,2),i=a[0],j=a[1],f=function(){var e=Object(c.a)(r.a.mark((function e(){var n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,j(!0),e.next=4,p()({url:"/auth/logout",method:"POST"});case 4:n=e.sent,n.data.success&&(t(),document.cookie="jwt=;",localStorage.clear(),sessionStorage.clear(),setTimeout((function(){window.location.reload()}),1e3)),e.next=12;break;case 9:throw e.prev=9,e.t0=e.catch(0),e.t0;case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}();return Object(b.jsxs)(l.a,{p:2,maxWidth:250,children:[Object(b.jsx)(u.a,{variant:"h5",gutterBottom:!0,children:"Session Expired!"}),Object(b.jsx)(u.a,{variant:"subtitle2",color:"textSecondary",gutterBottom:!0,children:"Your session has expired. Please login again to continue working."}),Object(b.jsx)(d.a,{variant:"contained",color:"primary",fullWidth:!0,onClick:f,style:{marginTop:"0.5rem"},children:i?"Loading...":"login"})]})}},214:function(e,t,n){"use strict";var a=n(140),r=n(0),c=n.n(r),o=n(533),i=n(2);t.a=function(){var e=c.a.useState(null),t=Object(a.a)(e,2),n=t[0],r=t[1],s=function(){r(null)},l=Boolean(n);return{handleClick:function(e){r(e.currentTarget)},handleClose:s,PopoverComponent:function(e){var t=e.children,a=e.id,r=l?a:void 0;return Object(i.jsx)(o.a,{id:r,open:l,anchorEl:n,onClose:s,anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"left"},children:t})}}}},237:function(e,t,n){"use strict";n.d(t,"c",(function(){return r})),n.d(t,"b",(function(){return c})),n.d(t,"a",(function(){return o}));var a=n(6),r=function(e){return{payload:e,type:a.a.SET_MEMBERS}},c=function(e){return{payload:e,type:a.a.NEW_MEMBER}},o=function(e){return{payload:e,type:a.a.DELETE_MEMBER}}},238:function(e,t,n){"use strict";n.d(t,"c",(function(){return r})),n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return o}));var a=n(6),r=function(e,t){return{key:t,payload:e,type:a.a.SET_CHAT}},c=function(e,t){return{key:t,payload:e,type:a.a.POST_MESSAGE}},o=function(){return{type:a.a.INIT_CHAT}}},301:function(e,t,n){"use strict";var a=n(0),r=n.n(a),c=n(545),o=n(15),i=n(12),s=n(2),l=Object(i.a)((function(e){return{tooltip:{backgroundColor:"#f5f5f9",color:"rgba(0, 0, 0, 0.87)",maxWidth:220,fontSize:e.typography.pxToRem(12),border:"1px solid #dadde9"}}}))(c.a);t.a=function(e){var t=e.title,n=e.text,a=e.children;return Object(s.jsx)(l,{title:Object(s.jsxs)(r.a.Fragment,{children:[Object(s.jsx)(o.a,{color:"inherit",children:t}),Object(s.jsx)("span",{children:n})]}),children:a})}},319:function(e,t,n){"use strict";n.d(t,"a",(function(){return se})),n.d(t,"b",(function(){return ue}));var a=n(140),r=n(3),c=n(0),o=n.n(c),i=n(170),s=n(542),l=n(118),u=n(25),d=n(570),j=n(15),p=n(143),b=n(141),f=n.n(b),m=n(142),h=n(119),O=n(616),x=n(538),g=n(545),v=n(561),A=n(7),C=n(151),y=n(196),w=n(2),k="https://my-team-board.herokuapp.com/api",E=Object(l.a)((function(e){return{lgAvatar:{width:e.spacing(11),height:e.spacing(11)},mb:{marginBottom:e.spacing(1)},mr:{marginRight:e.spacing(1)},rippleAnimation:{marginBottom:e.spacing(3),width:e.spacing(11),height:e.spacing(11),position:"relative"},paper:{padding:e.spacing(4),borderRadius:10,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",textAlign:"center"},header:{position:"absolute",top:e.spacing(2),right:e.spacing(2),display:"flex",flexDirection:"row",justifyContent:"flex-end",alignItems:"center",width:"100%",zIndex:99999999}}})),S=new Audio("".concat("/my-team-board","/audio/caller.mp3")),N=function(e){var t=e.currentUser,n=e.onCallAccepted,r=o.a.useState("Dialing..."),s=Object(a.a)(r,2),l=s[0],d=s[1],p=ue(),b=p.onCallEnd,N=p.isVideo,D=Object(i.c)(),I=D.socket,T=D.onlineUsers,B=E(),_=sessionStorage.getItem("userToCall"),R=_?JSON.parse(_):null;function M(){d("Call Ended."),setTimeout((function(){b()}),1e3)}function L(){return(L=Object(m.a)(f.a.mark((function e(){var t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return d("Call Ended."),e.next=3,Object(y.b)(R._id||"",T);case 3:(t=e.sent)&&I.emit("cancelCall",t),setTimeout((function(){b()}),1e3);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(c.useEffect)((function(){return function(){var e=Object(m.a)(f.a.mark((function e(){var a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!R){e.next=10;break}return e.next=4,Object(y.b)(R._id||"",T);case 4:(a=e.sent)&&I.emit("dial",{to:a,from:t,isVideo:N}),S.loop=!0,S.play(),I.once(i.a.CALL_END,(function(){M()})),I.once(i.a.CALL_ACCEPTED,(function(){n()}));case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),console.error(e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}}()(),function(){S.load(),S.pause(),S.currentTime=0,I.off(i.a.CALL_END),I.off(i.a.CALL_ACCEPTED)}}),[]),Object(w.jsxs)(o.a.Fragment,{children:[Object(w.jsx)(u.a,{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"100%",children:R&&Object(w.jsxs)(h.a,{elevation:3,className:B.paper,children:[Object(w.jsx)(u.a,{className:Object(A.a)("circle",B.rippleAnimation),children:Object(w.jsx)(O.a,{src:R.avatar?"".concat(k,"/files/").concat(R.avatar):C.a,alt:"userToCall",className:Object(A.a)(B.lgAvatar)})}),Object(w.jsx)(j.a,{component:"div",variant:"h5",className:"bg-text-primary",gutterBottom:!0,children:null===R||void 0===R?void 0:R.name}),Object(w.jsx)(j.a,{component:"span",variant:"body2",color:"textSecondary",className:B.mb,children:l}),Object(w.jsx)(x.a,{style:{backgroundColor:"#f50057",color:"#fff"},onClick:function(){return L.apply(this,arguments)},children:Object(w.jsx)(v.a,{})})]})}),Object(w.jsx)(u.a,{className:B.header,children:R&&Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)(g.a,{title:t.name,children:Object(w.jsx)(O.a,{src:t.avatar?"".concat(k,"/files/").concat(t.avatar):C.a,alt:"mine",className:B.mr})}),Object(w.jsx)(g.a,{title:null===R||void 0===R?void 0:R.name,children:Object(w.jsx)(O.a,{src:R.avatar?"".concat(k,"/files/").concat(R.avatar):C.a,alt:"userToCall"})})]})})]})},D=n(562),I=n(463),T="https://my-team-board.herokuapp.com/api",B=Object(l.a)((function(e){return{lgAvatar:{width:e.spacing(11),height:e.spacing(11)},mb:{marginBottom:e.spacing(1)},mr:{marginRight:e.spacing(2)},rippleAnimation:{marginBottom:e.spacing(3),width:e.spacing(11),height:e.spacing(11),position:"relative"},paper:{padding:e.spacing(4),borderRadius:10,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",textAlign:"center"},header:{position:"absolute",top:e.spacing(2),right:e.spacing(2),display:"flex",flexDirection:"row",justifyContent:"flex-end",alignItems:"center",width:"100%",zIndex:99999999}}})),_=new I.Howl({src:"".concat("/my-team-board","/audio/app_call.mp3"),loop:!0,preload:!0}),R=function(e){var t=e.currentUser,n=e.onCallAccepted,r=B(),s=ue(),l=s.onCallEnd,d=s.caller,p=Object(i.c)(),b=p.socket,k=p.onlineUsers,E=o.a.useState("Calling..."),S=Object(a.a)(E,2),N=S[0],I=S[1],R=Object(c.useRef)(null);function M(){I("Call Ended."),setTimeout((function(){l()}),1e3)}function L(){return(L=Object(m.a)(f.a.mark((function e(){var t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,I("Call Ended."),e.next=4,Object(y.b)(d._id||"",k);case 4:(t=e.sent)&&b.emit("cancelCall",t),setTimeout((function(){l()}),1e3),e.next=12;break;case 9:throw e.prev=9,e.t0=e.catch(0),e.t0;case 12:case"end":return e.stop()}}),e,null,[[0,9]])})))).apply(this,arguments)}function P(){return(P=Object(m.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{n()}catch(t){console.error(t)}case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(c.useEffect)((function(){var e;return function(){var t=Object(m.a)(f.a.mark((function t(){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:try{e=setTimeout((function(){var e;null===(e=R.current)||void 0===e||e.click()}),1e3),b.once(i.a.CALL_END,(function(){M()}))}catch(n){console.error(n)}case 1:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()(),function(){_.stop(),clearTimeout(e),b.off(i.a.CALL_END)}}),[]),Object(w.jsxs)(o.a.Fragment,{children:[Object(w.jsx)(u.a,{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"100%",children:d&&Object(w.jsxs)(h.a,{elevation:3,className:r.paper,children:[Object(w.jsx)(u.a,{className:Object(A.a)("circle",r.rippleAnimation),children:Object(w.jsx)(O.a,{src:d.avatar?"".concat(T,"/files/").concat(d.avatar):C.a,alt:"userToCall",className:Object(A.a)(r.lgAvatar)})}),Object(w.jsx)(j.a,{component:"div",variant:"h5",className:"bg-text-primary",gutterBottom:!0,children:null===d||void 0===d?void 0:d.name}),Object(w.jsx)(j.a,{component:"span",variant:"body2",color:"textSecondary",className:r.mb,children:N}),Object(w.jsxs)(u.a,{children:[Object(w.jsx)("button",{hidden:!0,ref:R,onClick:function(){_.play()}}),Object(w.jsx)(x.a,{className:Object(A.a)("wobble",r.mr),style:{backgroundColor:"#04AA6D",color:"#fff"},onClick:function(){return P.apply(this,arguments)},children:Object(w.jsx)(D.a,{})}),Object(w.jsx)(x.a,{style:{backgroundColor:"#f50057",color:"#fff"},onClick:function(){return L.apply(this,arguments)},children:Object(w.jsx)(v.a,{})})]})]})}),Object(w.jsx)(u.a,{className:r.header,children:d&&Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)(g.a,{title:t.name,children:Object(w.jsx)(O.a,{src:t.avatar?"".concat(T,"/files/").concat(t.avatar):C.a,alt:"mine",className:r.mr})}),Object(w.jsx)(g.a,{title:null===d||void 0===d?void 0:d.name,children:Object(w.jsx)(O.a,{src:d.avatar?"".concat(T,"/files/").concat(d.avatar):C.a,alt:"userToCall"})})]})})]})},M=n(9),L=n(18),P=n(563),W=n(564),U=n(565),V=n(566),F=n(567),z=n(568),Q=n(620),J=n(621),K=n(569),G=n(146),H=n(464),Y=n.n(H),q=n.p+"static/media/poster.60a869c3.jpg",Z="https://my-team-board.herokuapp.com/api",X=Object(l.a)((function(e){return{videoPartner:Object(L.a)({width:"100%",height:"auto"},e.breakpoints.down("xs"),{height:"100vh"}),mr:{marginRight:e.spacing(1)},mt:{marginTop:e.spacing(1)},myVideoContainer:{width:e.spacing(12),height:e.spacing(12),borderRadius:"50%",position:"absolute",bottom:e.spacing(4),right:e.spacing(1),border:"2px solid #fff",padding:"5px",overflow:"hidden"},myVideo:{width:"100%",height:"100%",objectFit:"cover",borderRadius:"50%"},speedDial:{position:"absolute",bottom:e.spacing(18),right:e.spacing(2.5)},header:{position:"absolute",top:e.spacing(2),right:e.spacing(2),display:"flex",flexDirection:"row",justifyContent:"flex-end",alignItems:"center",width:"100%",zIndex:99999999},counter:Object(L.a)({position:"absolute",top:e.spacing(8),width:"100%",color:"white"},e.breakpoints.down("xs"),{color:"#1E293B",top:e.spacing(10)})}})),$=o.a.memo((function(e){var t,n,a=e.currentUser,r=X(),s=ue(),l=s.onCallEnd,d=s.caller,p=s.isVideo,b=Object(i.c)(),h=b.socket,x=b.onlineUsers,v=sessionStorage.getItem("userToCall"),A=v?JSON.parse(v):null,k=Object(c.useRef)(null),E=Object(c.useRef)(null),S=o.a.useMemo((function(){return d.hasOwnProperty("_id")?d:A}),[a,d]),N=o.a.useMemo(Object(m.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(y.b)(S._id||"",x);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),[]);function D(e){return I.apply(this,arguments)}function I(){return(I=Object(m.a)(f.a.mark((function e(a){var r,c;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,p&&E.current&&("srcObject"in E.current?E.current.srcObject=a:E.current.src=window.URL.createObjectURL(a),E.current.onloadedmetadata=function(e){var t;null===(t=E.current)||void 0===t||t.play()}),t=a,r=!d.hasOwnProperty("_id"),e.next=6,N;case 6:c=e.sent,!1===r&&h.emit("onCallAccepted",c),(n=new Y.a({initiator:r,stream:a,trickle:!1})).on("signal",(function(e){h.emit("receiveSignal",{to:c,dataSignal:e})})),n.on("stream",(function(e){k.current&&("srcObject"in k.current?k.current.srcObject=e:k.current.src=window.URL.createObjectURL(e),k.current.onloadedmetadata=function(e){var t;null===(t=k.current)||void 0===t||t.play()})})),n.on("error",(function(e){B()})),e.next=17;break;case 14:throw e.prev=14,e.t0=e.catch(0),e.t0;case 17:case"end":return e.stop()}}),e,null,[[0,14]])})))).apply(this,arguments)}function T(){return(T=Object(m.a)(f.a.mark((function e(){var a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,navigator.mediaDevices.getDisplayMedia({cursor:!0});case 3:a=e.sent,E.current&&(n.replaceTrack(t.getVideoTracks()[0],a.getVideoTracks()[0],t),E.current.srcObject=a,a.getTracks()[0].onended=function(){E.current&&(n.replaceTrack(a.getVideoTracks()[0],t.getVideoTracks()[0],t),E.current.srcObject=t)}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error(e.t0.message);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function B(){return _.apply(this,arguments)}function _(){return(_=Object(m.a)(f.a.mark((function e(){var t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,N;case 3:(t=e.sent)&&h.emit("cancelCall",t),setTimeout((function(){l()}),0),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error(e.t0.message);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}return Object(c.useEffect)((function(){return h.once(i.a.CALL_END,(function(){l()})),h.once(i.a.EMIT_SIGNAL,(function(e){n.signal(e)})),function(){h.off(i.a.CALL_END),h.off(i.a.EMIT_SIGNAL)}}),[]),Object(c.useEffect)((function(){return void 0===navigator.mediaDevices?navigator.getUserMedia({video:p,audio:!0},D,(function(e){console.error(e)})):navigator.mediaDevices.getUserMedia({video:p,audio:!0}).then(D).catch((function(e){console.error(e)})),function(){try{if(t)t.getTracks().forEach((function(e){e.stop()})),n&&n.destroy()}catch(e){console.error(e)}}}),[]),Object(w.jsxs)(u.a,{width:"100%",height:"100vh",position:"relative",children:[p?Object(w.jsxs)(o.a.Fragment,{children:[Object(w.jsx)("video",{ref:k,className:r.videoPartner,autoPlay:!0,playsInline:!0}),Object(w.jsx)(u.a,{className:r.myVideoContainer,children:Object(w.jsx)("video",{className:r.myVideo,ref:E,muted:!0,autoPlay:!0})})]}):Object(w.jsxs)(o.a.Fragment,{children:[Object(w.jsxs)(u.a,{className:r.counter,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",textAlign:"center",children:[Object(w.jsx)(j.a,{component:"span",variant:"subtitle1",gutterBottom:!0,children:"Incoming call..."}),Object(w.jsx)(te,{})]}),Object(w.jsx)("video",{ref:k,className:r.videoPartner,autoPlay:!0,poster:q,playsInline:!0})]}),Object(w.jsx)(ee,{onVideoOff:function(){try{t.getVideoTracks()[0].enabled=!t.getVideoTracks()[0].enabled}catch(e){console.error(e.message)}},onSwitchMic:function(){try{t.getAudioTracks()[0].enabled=!t.getAudioTracks()[0].enabled}catch(e){console.error(e.message)}},onCallEnded:B,onShareScreen:function(){return T.apply(this,arguments)},isVideo:p}),Object(w.jsxs)(u.a,{className:r.header,children:[Object(w.jsx)(g.a,{title:a.name,children:Object(w.jsx)(O.a,{src:a.avatar?"".concat(Z,"/files/").concat(a.avatar):C.a,alt:"mine",className:r.mr})}),Object(w.jsx)(g.a,{title:null===S||void 0===S?void 0:S.name,children:Object(w.jsx)(O.a,{src:S.avatar?"".concat(Z,"/files/").concat(S.avatar):C.a,alt:"userToCall"})})]})]})})),ee=function(e){var t=e.onSwitchMic,n=e.onShareScreen,c=e.onCallEnded,i=e.onVideoOff,s=e.isVideo,l=Object(G.a)(),u=l.handleClose,d=l.handleOpen,j=l.show,p=X(),b=o.a.useState([{icon:Object(w.jsx)(v.a,{}),name:"End Call",index:1,isOn:!0},{icon:Object(w.jsx)(P.a,{}),name:"Mute",index:2,iconOff:Object(w.jsx)(W.a,{}),isOn:!0},{icon:Object(w.jsx)(U.a,{}),name:"Video Camera Off",index:3,iconOff:Object(w.jsx)(V.a,{}),isOn:!0},{icon:Object(w.jsx)(F.a,{}),name:"Share Screen",index:4,iconOff:Object(w.jsx)(z.a,{}),isOn:!1}]),f=Object(a.a)(b,2),m=f[0],h=f[1];function O(e){h(Object(M.a)(m.map((function(t){return t.index!=e?t:Object(r.a)(Object(r.a)({},t),{},{isOn:!t.isOn})}))))}return o.a.useEffect((function(){s||h([{icon:Object(w.jsx)(v.a,{}),name:"End Call",index:1,isOn:!0},{icon:Object(w.jsx)(P.a,{}),name:"Mute",index:2,iconOff:Object(w.jsx)(W.a,{}),isOn:!0},{icon:Object(w.jsx)(F.a,{}),name:"Share Screen",index:4,iconOff:Object(w.jsx)(z.a,{}),isOn:!1}])}),[]),Object(w.jsx)(o.a.Fragment,{children:Object(w.jsx)(Q.a,{ariaLabel:"SpeedDial openIcon example",className:p.speedDial,hidden:!1,icon:Object(w.jsx)(J.a,{}),onClose:u,onOpen:d,open:j,children:m.map((function(e){return Object(w.jsx)(K.a,{icon:e.isOn?e.icon:e.iconOff,tooltipTitle:e.name,onClick:function(){return function(e){switch(e){case 1:c();break;case 2:t(),O(e);break;case 3:i(),O(e);break;case 4:n(),O(e)}}(e.index)}},e.index)}))})})},te=function(){var e=o.a.useState({seconds:0,minutes:0,hours:0}),t=Object(a.a)(e,2),n=t[0],c=t[1];return o.a.useEffect((function(){var e=setInterval((function(){n.seconds<59?c((function(e){return Object(r.a)(Object(r.a)({},e),{},{seconds:e.seconds+1})})):n.minutes<59?c((function(e){return Object(r.a)(Object(r.a)({},e),{},{seconds:0,minutes:e.minutes+1})})):c((function(e){return{hours:e.hours+1,seconds:0,minutes:0}}))}),1e3);return function(){clearInterval(e)}}),[n]),Object(w.jsx)("span",{children:"".concat(n.hours," : ").concat(n.minutes," : ").concat(n.seconds)})},ne=$,ae=Object(l.a)((function(e){return{root:{backgroundColor:"#fff",width:"100%",height:"100vh",overflow:"hidden"},BoxContainer:{backgroundColor:"#f1f5f9",height:"100%",position:"relative",padding:"0 !important"},footer:{position:"absolute",bottom:e.spacing(1),transform:"translate(-50%, 0)",left:"50%",width:"100%",textAlign:"center"},mr:{marginRight:e.spacing(1)},header:{position:"absolute",top:e.spacing(2),right:e.spacing(2),display:"flex",flexDirection:"row",justifyContent:"flex-end",alignItems:"center",width:"100%",zIndex:99999999}}})),re=function(e){var t=e.currentComponent,n=Object(p.b)().currentUser,r=o.a.useState(t),c=Object(a.a)(r,2),i=c[0],s=c[1],l=ae(),b=function(){s("videoChat")};return Object(w.jsx)(u.a,{className:l.root,children:Object(w.jsxs)(d.a,{maxWidth:"md",className:l.BoxContainer,children:["dial"===i&&Object(w.jsx)(N,{currentUser:n,onCallAccepted:b}),"answer"===i&&Object(w.jsx)(R,{currentUser:n,onCallAccepted:b}),"videoChat"===i&&Object(w.jsx)(ne,{currentUser:n}),Object(w.jsx)(u.a,{className:l.footer,children:Object(w.jsx)(j.a,{component:"span",variant:"body2",style:{color:"#ccc"},children:"Created by Nidhal Bettaibi"})})]})})},ce=n(537),oe=o.a.forwardRef((function(e,t){return Object(w.jsx)(ce.a,Object(r.a)({direction:"right",ref:t},e))})),ie=o.a.createContext({}),se=o.a.memo((function(e){var t=e.children,n=le(),r=n.DialogComponent,s=n.onDialogClose,l=n.onDialogOpen,u=n.show,d=Object(i.c)().socket,j=o.a.useState(null),p=Object(a.a)(j,2),b=p[0],f=p[1],m=o.a.useState({}),h=Object(a.a)(m,2),O=h[0],x=h[1],g=o.a.useState(!0),v=Object(a.a)(g,2),A=v[0],C=v[1];function y(e,t){C(t),f(e),setTimeout((function(){l()}))}function k(){s(),x({})}Object(c.useEffect)((function(){return d.on(i.a.CALL,(function(e){var t=e.user,n=e.isVideo;t&&(x(t),y("answer",n))})),d.on("disconnect",(function(){u&&k()})),function(){d.off(i.a.CALL)}}),[]);var E={onCallStart:y,onCallEnd:k,caller:O,isVideo:A};return Object(w.jsx)(ie.Provider,{value:E,children:Object(w.jsxs)(o.a.Fragment,{children:[Object(w.jsx)(r,{children:Object(w.jsx)(re,{currentComponent:b})}),t]})})})),le=function(){var e=Object(G.a)(),t=e.handleClose,n=e.handleOpen,a=e.show;return{DialogComponent:Object(c.useCallback)((function(e){var n=e.children;return Object(w.jsx)(s.a,{onClose:t,"aria-labelledby":"video-chat-dialog",open:a,TransitionComponent:oe,fullScreen:!0,children:n})}),[a]),onDialogClose:t,onDialogOpen:n,show:a}},ue=function(){return Object(c.useContext)(ie)}},468:function(e,t){},470:function(e,t){},603:function(e,t,n){"use strict";n.r(t);var a=n(18),r=n(0),c=n.n(r),o=n(10),i=n(118),s=n(618),l=n(143),u=n(210),d=n(170),j=n(25),p=n(15),b=n(571),f=n(141),m=n.n(f),h=n(142),O=n(538),x=n(136),g=n(555),v=n(556),A=n(551),C=n(552),y=n(553),w=n(554),k=n(558),E=n(559),S=n(560),N=n(33),D=n(42),I=n.n(D),T=n(613),B=n(146),_=n(2),R=Object(i.a)((function(e){return{boxWidth:Object(a.a)({},e.breakpoints.down("xs"),{width:"100vw"})}})),M=function(e,t,n){var a=R(),r=Object(N.a)(),c=Object(x.a)(r.breakpoints.up("sm")),o=Object(B.a)(!0),i=o.handleClose,s=o.handleOpen,l=o.show,u=o.toggle;return{onSidenavClose:i,onSidenavOpen:s,onSidenavToggle:u,SwipeableSidenav:function(r){var o=r.children;return Object(_.jsx)(T.a,{variant:c?t:"temporary",anchor:e,open:l,onOpen:s,onClose:i,children:Object(_.jsx)(j.a,{width:n,overflow:"hidden",className:a.boxWidth,children:o})})},show:l}},L=n(214),P=n(548),W=n(31),U=n(616),V=n(12),F=n(549),z=n(550),Q=n(184),J=n(547),K=n(301),G=n(55),H=n(144),Y=n(7),q=n(147),Z=n(149),X=n(209),$=n(148),ee=Z.a().shape({name:Z.c().required("Name is required")}),te={name:""},ne=Object(i.a)((function(e){return{mb:{marginBottom:e.spacing(1)},mr:{marginRight:e.spacing(1)},namespaces:{backgroundColor:"#2c3344",cursor:"pointer",fontSize:"14px",color:"#868c94","&:hover":{backgroundColor:"#475569"}},icons:{color:"#64748B"}}})),ae=function(e){var t=e.onDialogClose,n=ne(),a=Object(l.b)().dispatch,r=Object($.a)(),c=r.loading,o=r.onMutate;function i(){return(i=Object(h.a)(m.a.mark((function e(n){var r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,o({url:"/workspace",method:"POST",data:n});case 3:(r=e.sent).success&&(t(),setTimeout((function(){a(Object(X.b)(r.data))}),0)),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}return Object(_.jsx)(q.b,{initialValues:te,validationSchema:ee,onSubmit:function(e){return function(e){return i.apply(this,arguments)}(e)},children:function(e){var a=e.handleChange,r=e.handleSubmit,o=e.handleBlur,i=e.values,s=e.errors,l=e.touched;return Object(_.jsxs)(q.a,{onSubmit:r,autoComplete:"off",children:[Object(_.jsxs)(j.a,{p:2,borderBottom:"1px solid lightgray",height:"64px",textAlign:"right",children:[Object(_.jsx)(G.a,{variant:"outlined",color:"default",className:Object(Y.a)(n.icons,n.mr),onClick:t,children:"Cancel"}),Object(_.jsx)(G.a,{disableElevation:!0,variant:"contained",color:"primary",type:"submit",children:c?"Loading...":"Save"})]}),Object(_.jsx)(j.a,{p:2,children:Object(_.jsxs)("div",{className:"form-group",children:[Object(_.jsx)("label",{children:"Workspace's name"}),Object(_.jsx)(H.a,{name:"name",placeholder:"Workspace name",fullWidth:!0,variant:"outlined",size:"small",onChange:a,onBlur:o,value:i.name,error:l.name&&!!s.name,helperText:l.name&&s.name})]})})]})}})},re=function(){var e=Object(Q.a)(),t=e.DialogComponent,n=e.onDialogClose,a=e.onDialogOpen,r=ne();return Object(_.jsxs)(c.a.Fragment,{children:[Object(_.jsx)(K.a,{title:"New Workspace",text:"Create a new workspace or switch to a different workspace by clicking on the icons above.",children:Object(_.jsx)(U.a,{onClick:a,variant:"rounded",className:r.mb+" "+r.namespaces,children:Object(_.jsx)(J.a,{className:r.icons})})}),Object(_.jsx)(t,{children:Object(_.jsx)(ae,{onDialogClose:n})})]})},ce=n(151),oe=n(545),ie=n(56),se=Object(i.a)((function(e){return{mb:{marginBottom:e.spacing(1)},namespaces:{backgroundColor:"#2c3344",cursor:"pointer",fontSize:"14px",color:"#868c94","&:hover":{backgroundColor:"#475569"}},bgActive:{backgroundColor:"#475569"}}})),le=function(){var e=se(),t=Object(ie.d)((function(e){return e.workspaces})),n=Object(l.b)(),r=n.selectedWorkspace,o=n.setSelectedWorkspace;return Object(_.jsx)(c.a.Fragment,{children:t.map((function(t){return Object(_.jsx)(oe.a,{title:t.name,placement:"right",children:Object(_.jsx)(U.a,{variant:"rounded",onClick:function(){var e;(e=t._id||"")&&o(e)},className:Object(Y.a)(e.mb,e.namespaces,Object(a.a)({},e.bgActive,t._id===r)),children:t.name.charAt(0).toUpperCase()+t.name.charAt(1).toUpperCase()})},t._id)}))})},ue="https://my-team-board.herokuapp.com/api",de=Object(V.a)((function(e){return Object(s.a)({badge:{backgroundColor:"#44b700",color:"#44b700",boxShadow:"0 0 0 2px ".concat(e.palette.background.paper),"&::after":{position:"absolute",top:0,left:0,width:"100%",height:"100%",borderRadius:"50%",animation:"$ripple 1.2s infinite ease-in-out",border:"1px solid currentColor",content:'""'}},"@keyframes ripple":{"0%":{transform:"scale(.8)",opacity:1},"100%":{transform:"scale(2.4)",opacity:0}}})}))(P.a),je=Object(i.a)((function(e){return{root:{backgroundColor:"#0f172a",height:"100%",minHeight:"100vh",overflowY:"hidden","&:hover":{overflowY:"auto"}},borderRight:{borderRight:"1px solid #2c3344"},textCenter:{textAlign:"center"},mb:{marginBottom:e.spacing(1)},textWhite:{color:"#fafafa"},textSecondary:{color:"#868c94"},icons:{color:"#64748B"},largeAvatar:{width:e.spacing(8),height:e.spacing(8),marginBottom:e.spacing(1)},navItem:{margin:e.spacing(1,0),padding:"0.25rem 0",cursor:"pointer",borderRadius:"5px",transition:e.transitions.create(["padding","background"],{easing:e.transitions.easing.easeOut,duration:e.transitions.duration.enteringScreen}),"&:hover":{backgroundColor:"#2c3344",padding:e.spacing(1)}},activeItem:{backgroundColor:"#475569",padding:e.spacing(1)}}})),pe=c.a.memo((function(){var e=je();return Object(_.jsxs)(W.a,{container:!0,className:Object(Y.a)(e.root,"content-scroll"),children:[Object(_.jsx)(W.a,{className:e.borderRight,item:!0,xs:3,children:Object(_.jsxs)(j.a,{my:2,px:1,display:"flex",flexDirection:"column",alignItems:"center",children:[Object(_.jsx)(le,{}),Object(_.jsx)(re,{})]})}),Object(_.jsxs)(W.a,{item:!0,xs:!0,children:[Object(_.jsx)(me,{}),Object(_.jsx)(be,{classes:e}),Object(_.jsxs)(j.a,{p:2,children:[Object(_.jsx)(p.a,{variant:"subtitle2",color:"primary",children:"Members"}),Object(_.jsx)("small",{className:e.textSecondary,children:"Workspace's Members"}),Object(_.jsx)(fe,{classes:e})]})]})]})})),be=c.a.memo((function(e){var t=e.classes,n=Object(o.g)(),r=function(e){n.push(e)};return Object(_.jsxs)(j.a,{p:2,children:[Object(_.jsx)(p.a,{variant:"subtitle2",color:"primary",children:"Workspace"}),Object(_.jsx)("small",{className:t.textSecondary,children:"Workspace Managment"}),Object(_.jsxs)(j.a,{className:Object(Y.a)(t.navItem,Object(a.a)({},t.activeItem,"/team"===n.location.pathname)),onClick:function(){return r("/team")},display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"start",children:[Object(_.jsx)(F.a,{className:t.textWhite}),Object(_.jsx)("span",{className:t.textWhite,style:{marginLeft:"8px"},children:"Scrumboard"})]}),Object(_.jsxs)(j.a,{className:Object(Y.a)(t.navItem,Object(a.a)({},t.activeItem,"/team/members"===n.location.pathname)),onClick:function(){return r("/team/members")},display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"start",children:[Object(_.jsx)(z.a,{className:t.textWhite}),Object(_.jsx)("span",{className:t.textWhite,style:{marginLeft:"8px"},children:"Members"})]})]})})),fe=c.a.memo((function(e){var t=e.classes,n=Object(ie.d)((function(e){return e.members})),r=Object(o.g)(),i=Object(d.c)().onlineUsers,s=c.a.useCallback((function(e){return!!e&&!(!i.hasOwnProperty(e)||i[e].lastSeen)}),[i]);return Object(_.jsx)(_.Fragment,{children:n.map((function(e){return Object(_.jsxs)(j.a,{className:Object(Y.a)(t.navItem,Object(a.a)({},t.activeItem,r.location.pathname==="/team/chat/".concat(e._id))),onClick:function(){return t="/team/chat/".concat(e._id),void r.push(t);var t},display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"start",children:[s(e._id)?Object(_.jsx)(de,{overlap:"circular",anchorOrigin:{vertical:"bottom",horizontal:"right"},variant:"dot",children:Object(_.jsx)(U.a,{alt:"team member",src:e.avatar?"".concat(ue,"/files/").concat(e.avatar):ce.a})}):Object(_.jsx)(U.a,{alt:"team member",src:e.avatar?"".concat(ue,"/files/").concat(e.avatar):ce.a}),Object(_.jsxs)(j.a,{display:"flex",flexDirection:"column",ml:1,className:t.textWhite,children:[Object(_.jsx)("span",{children:e.name}),Object(_.jsx)("small",{children:e.title||"Not mention"})]})]},e._id)}))})})),me=function(){var e=je(),t=Object(l.b)().currentUser;return Object(_.jsxs)(j.a,{borderBottom:"1px solid #2c3344",textAlign:"center",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",style:{padding:"1.5rem 1rem"},children:[Object(_.jsx)(U.a,{alt:"user avatar",src:t.avatar?"".concat(ue,"/files/").concat(t.avatar):ce.a,className:e.largeAvatar}),Object(_.jsx)(p.a,{variant:"subtitle2",className:Object(Y.a)(e.textWhite,"text-capitalize"),gutterBottom:!0,children:t.name||"Unknown"}),Object(_.jsx)("small",{className:e.textSecondary,children:t.email||"unknown@gmail.com"})]})},he=pe,Oe=new(n(43).a),xe=Object(i.a)((function(e){return Object(s.a)({root:{zIndex:e.zIndex.drawer+1,flexGrow:1,display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",backgroundColor:"#fff",padding:"0 1rem",height:"56px",boxShadow:"0 .125rem .25rem rgba(0,0,0,.075)",position:"sticky",top:0},menuButton:{marginRight:e.spacing(1)},icons:{color:"#64748B"},menuItem:{padding:"0.8rem "},primaryHeader:{backgroundColor:e.palette.primary.main,padding:e.spacing(2),color:"#fafafa"},inline:{display:"inline"},listItem:{backgroundColor:"#fff","&:hover":{backgroundColor:"#fafafa"}},activeItem:{backgroundColor:"#f1f5f9 !important"}})})),ge=function(){var e=M("left","persistent",280),t=e.SwipeableSidenav,n=e.onSidenavToggle,a=e.show,o=xe(),i=Object(N.a)(),s=Object(x.a)(i.breakpoints.up("sm")),l=document.getElementById("app-main");return Object(r.useEffect)((function(){l&&(l.style.marginLeft=a?s?"".concat(280,"px"):"0px":"".concat(0,"px"))}),[a,s,l]),Object(_.jsxs)(c.a.Fragment,{children:[Object(_.jsx)(O.a,{onClick:n,edge:"start",className:o.menuButton,color:"inherit","aria-label":"menu",children:Object(_.jsx)(C.a,{className:o.icons})}),Object(_.jsx)(t,{children:Object(_.jsx)(he,{})})]})},ve=function(){var e=xe(),t=Object(L.a)(),n=t.PopoverComponent,a=t.handleClick;return Object(_.jsxs)(c.a.Fragment,{children:[Object(_.jsx)(O.a,{"aria-describedby":"notification-menu",edge:"start",color:"inherit","aria-label":"messages",className:e.menuButton,onClick:a,children:Object(_.jsx)(y.a,{className:e.icons})}),Object(_.jsx)(n,{id:"notification-menu",children:Object(_.jsx)(c.a.Fragment,{children:Object(_.jsx)(Ce,{})})})]})},Ae=function(){var e=Object(o.g)(),t=xe(),n=Object(l.b)().currentUser,a=Object(L.a)(),r=a.PopoverComponent,i=a.handleClick,s=a.handleClose,u=function(t){e.push(t),s()},d=function(){var t=Object(h.a)(m.a.mark((function t(){var n;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,I.a.post("/auth/logout");case 3:n=t.sent,n.data.success?(localStorage.clear(),sessionStorage.clear(),Oe.remove("isLogged"),setTimeout((function(){e.push("/login")}),1e3)):s(),t.next=11;break;case 8:throw t.prev=8,t.t0=t.catch(0),t.t0;case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(){return t.apply(this,arguments)}}();return Object(_.jsxs)(c.a.Fragment,{children:[Object(_.jsx)(O.a,{"aria-describedby":"account-menu",color:"inherit","aria-label":"profile",onClick:i,children:Object(_.jsx)(w.a,{className:t.icons})}),Object(_.jsx)(r,{id:"account-menu",children:Object(_.jsxs)(c.a.Fragment,{children:[Object(_.jsxs)(j.a,{py:1,mx:2,children:[Object(_.jsx)(p.a,{variant:"subtitle2",children:"Signed in as"}),Object(_.jsx)("small",{children:n.email||"unknown@gmail.com"})]}),Object(_.jsx)(g.a,{}),Object(_.jsxs)(v.a,{onClick:function(){return u("/team/profile")},className:t.menuItem,children:[Object(_.jsx)(w.a,{className:t.icons}),Object(_.jsx)("span",{style:{marginLeft:"0.8rem"},children:"Profile"})]}),Object(_.jsxs)(v.a,{onClick:function(){return u("/team/setting")},className:t.menuItem,children:[Object(_.jsx)(k.a,{className:t.icons}),Object(_.jsx)("span",{style:{marginLeft:"0.8rem"},children:"Setting"})]}),Object(_.jsx)(g.a,{}),Object(_.jsxs)(v.a,{onClick:d,className:t.menuItem,children:[Object(_.jsx)(E.a,{className:t.icons}),Object(_.jsx)("span",{style:{marginLeft:"0.8rem"},children:"Logout"})]})]})})]})},Ce=function(){var e=xe();return Object(_.jsxs)(j.a,{children:[Object(_.jsx)(j.a,{className:e.primaryHeader,children:Object(_.jsx)(p.a,{variant:"subtitle1",style:{fontWeight:600},children:"Notifications"})}),Object(_.jsx)(j.a,{className:"content-scroll",minWidth:"350px",maxWidth:"420px",maxHeight:"400px",overflow:"auto",children:Object(_.jsxs)(j.a,{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",width:"100%",height:"250px",children:[Object(_.jsx)(S.a,{color:"disabled",style:{fontSize:"55px",marginBottom:".5rem"}}),Object(_.jsx)(p.a,{component:"div",variant:"body2",color:"textSecondary",children:"No notifications found"})]})})]})},ye=function(){var e=xe();return Object(_.jsxs)("header",{className:e.root,children:[Object(_.jsx)(ge,{}),Object(_.jsxs)(j.a,{children:[Object(_.jsx)(O.a,{edge:"start",color:"inherit","aria-label":"Search",className:e.menuButton,children:Object(_.jsx)(A.a,{className:e.icons})}),Object(_.jsx)(ve,{}),Object(_.jsx)(Ae,{})]})]})},we=n(319),ke=Object(r.lazy)((function(){return Promise.all([n.e(4),n.e(3),n.e(19)]).then(n.bind(null,615))})),Ee=Object(r.lazy)((function(){return Promise.all([n.e(4),n.e(3),n.e(13),n.e(18)]).then(n.bind(null,600))})),Se=Object(r.lazy)((function(){return Promise.all([n.e(3),n.e(15)]).then(n.bind(null,604))})),Ne=Object(r.lazy)((function(){return Promise.all([n.e(4),n.e(5),n.e(12),n.e(16)]).then(n.bind(null,611))})),De=Object(r.lazy)((function(){return Promise.all([n.e(10),n.e(21)]).then(n.bind(null,608))})),Ie=Object(r.lazy)((function(){return Promise.all([n.e(5),n.e(14)]).then(n.bind(null,602))})),Te=Object(i.a)((function(e){return Object(s.a)({open:Object(a.a)({},e.breakpoints.up("sm"),{transition:e.transitions.create(["margin","width"],{easing:e.transitions.easing.easeOut,duration:e.transitions.duration.enteringScreen})})})})),Be=function(){return Object(_.jsxs)(j.a,{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",width:"100%",height:"calc(100vh - 56px)",children:[Object(_.jsx)(p.a,{component:"div",variant:"subtitle1",color:"textSecondary",gutterBottom:!0,children:"Loading...."}),Object(_.jsx)(b.a,{disableShrink:!0})]})};t.default=function(){var e=Te();return Object(_.jsx)(l.a,{children:Object(_.jsx)(d.b,{children:Object(_.jsx)(we.a,{children:Object(_.jsx)(u.a,{children:Object(_.jsx)(c.a.Fragment,{children:Object(_.jsxs)("main",{id:"app-main",className:e.open,children:[Object(_.jsx)(ye,{}),Object(_.jsx)(r.Suspense,{fallback:Object(_.jsx)(Be,{}),children:Object(_.jsxs)(o.d,{children:[Object(_.jsx)(o.b,{path:"/team",exact:!0,component:ke}),Object(_.jsx)(o.b,{path:"/team/scrumboard/:projectId",component:Ee}),Object(_.jsx)(o.b,{path:"/team/members",component:Se}),Object(_.jsx)(o.b,{path:"/team/profile",component:De}),Object(_.jsx)(o.b,{path:"/team/setting",component:Ie}),Object(_.jsx)(o.b,{path:"/team/chat/:memberId",component:Ne})]})})]})})})})})})}}}]);
//# sourceMappingURL=11.ddb63812.chunk.js.map